<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>è„šæ‰‹æ¶æ¶æ„è®¾è®¡å’Œæ¡†æ¶æ­å»º</title>
      <link href="2022/02/08/cli01/"/>
      <url>2022/02/08/cli01/</url>
      
        <content type="html"><![CDATA[<h2 id="è„šæ‰‹æ¶å¼€å‘æµç¨‹"><a href="#è„šæ‰‹æ¶å¼€å‘æµç¨‹" class="headerlink" title="è„šæ‰‹æ¶å¼€å‘æµç¨‹"></a>è„šæ‰‹æ¶å¼€å‘æµç¨‹</h2><ol><li><p>åˆ›å»º npm é¡¹ç›®</p></li><li><p>åˆ›å»ºè„šæ‰‹æ¶å…¥å£æ–‡ä»¶, æœ€ä¸Šæ–¹æ·»åŠ :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env node</span><br></pre></td></tr></table></figure></li><li><p>é…ç½® <code>package.json</code>, æ·»åŠ  <code>bin</code> å±æ€§</p></li><li><p>ç¼–å†™è„šæ‰‹æ¶ä»£ç </p></li><li><p>å°†è„šæ‰‹æ¶å‘å¸ƒåˆ° <code>npm</code></p></li></ol><h2 id="è„šæ‰‹æ¶ä½¿ç”¨æµç¨‹"><a href="#è„šæ‰‹æ¶ä½¿ç”¨æµç¨‹" class="headerlink" title="è„šæ‰‹æ¶ä½¿ç”¨æµç¨‹"></a>è„šæ‰‹æ¶ä½¿ç”¨æµç¨‹</h2><ol><li><p>å®‰è£…è„šæ‰‹æ¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g your-cli</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨è„šæ‰‹æ¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">your-cli</span><br></pre></td></tr></table></figure></li></ol><h2 id="è„šæ‰‹æ¶å¼€å‘éš¾ç‚¹"><a href="#è„šæ‰‹æ¶å¼€å‘éš¾ç‚¹" class="headerlink" title="è„šæ‰‹æ¶å¼€å‘éš¾ç‚¹"></a>è„šæ‰‹æ¶å¼€å‘éš¾ç‚¹</h2><ol><li><p>åˆ†åŒ…: å°†å¤æ‚çš„ç³»ç»Ÿæ‹†åˆ†æˆè‹¥å¹²ä¸ªæ¨¡å—</p></li><li><p>å‘½ä»¤æ³¨å†Œ:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vue create</span><br><span class="line">vue add</span><br><span class="line">vue invoke</span><br></pre></td></tr></table></figure></li><li><p>å‚æ•°è§£æ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue command [options] &lt;params&gt;</span><br></pre></td></tr></table></figure><ul><li><code>options</code> å…¨ç§°: â€“versionã€â€“help</li><li><code>options</code> ç®€å†™: -vã€ -h</li><li>å¸¦ <code>params</code> çš„ <code>options</code>: <code>--path /Users/ogliu/Desktop/vue-test</code></li></ul></li><li><p>å¸®åŠ©æ–‡æ¡£:</p><ul><li><p>global help</p><ul><li>Usage</li><li>Options</li><li>Commands</li></ul></li><li><p>command help</p><ul><li>Usage</li><li>Options</li></ul></li></ul></li><li><p>å‘½ä»¤è¡Œäº¤äº’</p></li><li><p>æ—¥å¿—æ‰“å°</p></li><li><p>å‘½ä»¤è¡Œæ–‡å­—å˜è‰²</p></li><li><p>ç½‘ç»œé€šä¿¡: HTTP / WebSocket</p></li><li><p>æ–‡ä»¶å¤„ç†</p></li></ol><p>ç­‰ç­‰â€¦â€¦  </p><h2 id="åŸç”Ÿè„šæ‰‹æ¶å¼€å‘ç—›ç‚¹"><a href="#åŸç”Ÿè„šæ‰‹æ¶å¼€å‘ç—›ç‚¹" class="headerlink" title="åŸç”Ÿè„šæ‰‹æ¶å¼€å‘ç—›ç‚¹"></a>åŸç”Ÿè„šæ‰‹æ¶å¼€å‘ç—›ç‚¹</h2><ol><li>é‡å¤æ“ä½œ<ul><li>å¤š Pacage æœ¬åœ° link</li><li>å¤š Package ä¾èµ–å®‰è£…</li><li>å¤š Package å•å…ƒæµ‹è¯•</li><li>å¤š Package ä»£ç æäº¤</li><li>å¤š Package ä»£ç å‘å¸ƒ</li></ul></li><li>ç‰ˆæœ¬ä¸€è‡´æ€§<ul><li>å‘å¸ƒæ—¶ç‰ˆæœ¬ä¸€è‡´æ€§</li><li>å‘å¸ƒåç›¸äº’ä¾èµ–ç‰ˆæœ¬å‡çº§</li></ul></li></ol><blockquote><p>package è¶Šå¤šï¼Œç®¡ç†å¤æ‚åº¦è¶Šé«˜</p></blockquote><h2 id="Lerna-ç®€ä»‹"><a href="#Lerna-ç®€ä»‹" class="headerlink" title="Lerna ç®€ä»‹"></a>Lerna ç®€ä»‹</h2><p>Lerna æ˜¯ä¸€ä¸ªä¼˜åŒ–åŸºäº git + npm çš„å¤š <code>package</code> é¡¹ç›®çš„ç®¡ç†å·¥å…·</p><blockquote><p> Lerna æ˜¯æ¶æ„ä¼˜åŒ–çš„äº§ç‰©, å®ƒæ­ç¤ºäº†ä¸€ä¸ªæ¶æ„çœŸç†: é¡¹ç›®å¤æ‚åº¦æå‡å, å°±éœ€è¦å¯¹é¡¹ç›®è¿›è¡Œæ¶æ„ä¼˜åŒ–ï¼Œæ¶æ„ä¼˜åŒ–çš„ä¸»è¦ç›®æ ‡å¾€å¾€éƒ½æ˜¯ä»¥æ•ˆèƒ½ä¸ºæ ¸å¿ƒã€‚</p></blockquote><p>å®˜ç½‘: <a href="https://lerna.js.org/">https://lerna.js.org</a></p><h2 id="Lerna-å¼€å‘è„šæ‰‹æ¶æµç¨‹"><a href="#Lerna-å¼€å‘è„šæ‰‹æ¶æµç¨‹" class="headerlink" title="Lerna å¼€å‘è„šæ‰‹æ¶æµç¨‹"></a>Lerna å¼€å‘è„šæ‰‹æ¶æµç¨‹</h2><ol><li>è„šæ‰‹æ¶é¡¹ç›®åˆå§‹åŒ–<ul><li>åˆå§‹åŒ– npm é¡¹ç›®</li><li>å®‰è£… lerna</li><li><code>lerna init</code> åˆå§‹åŒ–é¡¹ç›®</li></ul></li><li>åˆ›å»º package<ul><li><code>lerna create</code> åˆ›å»º Package</li><li><code>lerna add</code> å®‰è£…ä¾èµ–</li><li><code>lerna link</code> é“¾æ¥ä¾èµ–</li></ul></li><li>è„šæ‰‹æ¶å¼€å‘å’Œæµ‹è¯•<ul><li><code>lerna exec</code> æ‰§è¡Œ shell è„šæœ¬</li><li><code>lerna run</code> æ‰§è¡Œ npm å‘½ä»¤</li><li><code>lerna clean</code> æ¸…ç©ºä¾èµ–</li><li><code>lerna bootstrap</code> é‡è£…ä¾èµ–</li></ul></li><li>è„šæ‰‹æ¶å‘å¸ƒä¸Šçº¿<ul><li><code>lerna version</code> <code>bump version</code></li><li><code>lerna changed</code> æŸ¥çœ‹ä¸Šç‰ˆæœ¬ä»¥æ¥çš„æ‰€æœ‰å˜æ›´</li><li><code>lerna diff</code> æŸ¥çœ‹ diff</li><li><code>lerna publish</code> é¡¹ç›®å‘å¸ƒ</li></ul></li></ol><h2 id="Lerna-è„šæ‰‹æ¶æ¡†æ¶æ­å»ºé—­ç¯ç¤ºä¾‹"><a href="#Lerna-è„šæ‰‹æ¶æ¡†æ¶æ­å»ºé—­ç¯ç¤ºä¾‹" class="headerlink" title="Lerna è„šæ‰‹æ¶æ¡†æ¶æ­å»ºé—­ç¯ç¤ºä¾‹"></a>Lerna è„šæ‰‹æ¶æ¡†æ¶æ­å»ºé—­ç¯ç¤ºä¾‹</h2><blockquote><p>æ ¹æ®ä¸Šé¢çš„ Lerna å¼€å‘è„šæ‰‹æ¶æµç¨‹å®ç°å®Œæ•´ç¤ºä¾‹</p></blockquote><h3 id="åŸºç¡€æ¡†æ¶æ­å»º"><a href="#åŸºç¡€æ¡†æ¶æ­å»º" class="headerlink" title="åŸºç¡€æ¡†æ¶æ­å»º"></a>åŸºç¡€æ¡†æ¶æ­å»º</h3><ol><li><p>ç¡®è®¤è„šæ‰‹æ¶åç§°, è¿™é‡Œä»¥ <code>ogliu-cli-demo</code> ä¸ºä¾‹, ä¸ºäº†æ–¹ä¾¿ç®¡ç†åˆ†åŒ…, æ‰“å¼€ <code>npm</code> å®˜ç½‘, åˆ›å»ºç»„ç»‡ <code>Add Organization</code> , ç›´æ¥è¾“å…¥ç»„ç»‡åç§° <code>ogliu-cli-demo</code> , ç„¶åç‚¹å‡» <code>Create</code>  , ç„¶åç‚¹å‡» <code>Skip</code> è·³è¿‡</p></li><li><p>æ‰“å¼€ç»ˆç«¯å‘½ä»¤è¡Œ, åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹å¹¶åˆå§‹åŒ– <code>npm</code> é¡¹ç›®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir ogliu-cli-demo &amp;&amp; cd ogliu-cli-demo</span><br><span class="line">npm init -y</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£… Lerna</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -D lerna</span><br><span class="line">npm install lerna -g</span><br></pre></td></tr></table></figure></li><li><p>åˆå§‹åŒ– <code>lerna</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lerna init</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹é»˜è®¤é…ç½®æ–‡ä»¶ <code>lerna.json</code>, å°†å½“å‰ç‰ˆæœ¬å·ä¿®æ”¹æˆ <code>1.0.0</code></p></li><li><p>åˆ›å»º <code>git</code> å¿½ç•¥æ–‡ä»¶ <code>.gitignore</code> , å°†å¸¸è§çš„æ–‡ä»¶æ’é™¤æ‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.vscode</span><br><span class="line">.idea</span><br><span class="line">.DS_Store</span><br><span class="line"></span><br><span class="line">node_modules</span><br><span class="line"></span><br><span class="line">lerna-debug.log</span><br><span class="line">packages&#x2F;**&#x2F;node_modules</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ <code>lerna create</code> åˆ›å»º <code>Package</code>: <code>core</code>, <code>package name</code> ä½¿ç”¨ <code>@ogliu-cli-demo/core</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">lerna create core</span><br><span class="line"></span><br><span class="line">package name: (core) @ogliu-cli-demo&#x2F;core</span><br><span class="line">version: (1.0.0) </span><br><span class="line">description: ogliu-cli-demo core</span><br><span class="line">keywords: </span><br><span class="line">homepage: </span><br><span class="line">license: (ISC) </span><br><span class="line">entry point: (lib&#x2F;core.js) </span><br><span class="line">git repository: </span><br><span class="line">About to write to &#x2F;Users&#x2F;liukun&#x2F;Learn&#x2F;ogliu-cli-demo&#x2F;packages&#x2F;core&#x2F;package.json:</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;@ogliu-cli-demo&#x2F;core&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;ogliu-cli-demo core&quot;,</span><br><span class="line">  &quot;author&quot;: &quot;LiuKun &lt;308880147@qq.com&gt;&quot;,</span><br><span class="line">  &quot;homepage&quot;: &quot;&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;ISC&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;lib&#x2F;core.js&quot;,</span><br><span class="line">  &quot;directories&quot;: &#123;</span><br><span class="line">    &quot;lib&quot;: &quot;lib&quot;,</span><br><span class="line">    &quot;test&quot;: &quot;__tests__&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;files&quot;: [</span><br><span class="line">    &quot;lib&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;test&quot;: &quot;echo \&quot;Error: run tests from root\&quot; &amp;&amp; exit 1&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Is this OK? (yes) </span><br><span class="line">lerna success create New package @ogliu-cli-demo&#x2F;core created at .&#x2F;packages&#x2F;core</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ <code>lerna create</code> åˆ›å»º <code>Package</code>: <code>utils</code>, <code>package name</code> ä½¿ç”¨ <code>@ogliu-cli-demo/utils</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">lerna create utils</span><br><span class="line"></span><br><span class="line">package name: (utils) @ogliu-cli-demo&#x2F;utils</span><br><span class="line">version: (1.0.0) </span><br><span class="line">description: ogliu-cli-demo utils</span><br><span class="line">keywords: </span><br><span class="line">homepage: </span><br><span class="line">license: (ISC) </span><br><span class="line">entry point: (lib&#x2F;utils.js) </span><br><span class="line">git repository: </span><br><span class="line">About to write to &#x2F;Users&#x2F;liukun&#x2F;Learn&#x2F;ogliu-cli-demo&#x2F;packages&#x2F;utils&#x2F;package.json:</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;@ogliu-cli-demo&#x2F;utils&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;&gt; TODO: description&quot;,</span><br><span class="line">  &quot;author&quot;: &quot;LiuKun &lt;308880147@qq.com&gt;&quot;,</span><br><span class="line">  &quot;homepage&quot;: &quot;&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;ISC&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;lib&#x2F;utils.js&quot;,</span><br><span class="line">  &quot;directories&quot;: &#123;</span><br><span class="line">    &quot;lib&quot;: &quot;lib&quot;,</span><br><span class="line">    &quot;test&quot;: &quot;__tests__&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;files&quot;: [</span><br><span class="line">    &quot;lib&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;test&quot;: &quot;echo \&quot;Error: run tests from root\&quot; &amp;&amp; exit 1&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Is this OK? (yes) </span><br><span class="line">lerna success create New package @ogliu-cli-demo&#x2F;utils created at .&#x2F;packages&#x2F;utils</span><br></pre></td></tr></table></figure></li></ol><h3 id="Lerna-æ ¸å¿ƒæ“ä½œï¼ˆç»ƒä¹ ï¼‰"><a href="#Lerna-æ ¸å¿ƒæ“ä½œï¼ˆç»ƒä¹ ï¼‰" class="headerlink" title="Lerna æ ¸å¿ƒæ“ä½œï¼ˆç»ƒä¹ ï¼‰"></a>Lerna æ ¸å¿ƒæ“ä½œï¼ˆç»ƒä¹ ï¼‰</h3><ol><li><p>lerna add, ç»™æ‰€æœ‰ <code>package</code> å®‰è£…ä¾èµ–</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lerna add package-name</span><br></pre></td></tr></table></figure></li><li><p>lerna clean, æ¸…ç©ºæ‰€æœ‰ <code>package</code> çš„ä¾èµ–, éœ€è¦æ‰‹åŠ¨åˆ é™¤ <code>package.json</code> çš„ <code>dependencies</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lerna clean</span><br></pre></td></tr></table></figure></li><li><p>lerna add, ç»™æŒ‡å®š <code>package</code> å®‰è£…ä¾èµ–</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lerna add package-name packages&#x2F;core&#x2F;</span><br></pre></td></tr></table></figure></li><li><p>lerna bootstrap, é‡æ–°å®‰è£…æ‰€æœ‰ä¾èµ–</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lerna bootstrap</span><br></pre></td></tr></table></figure></li><li><p>lerna link, å°† <code>lerna</code> ç®¡ç†çš„æ‰€æœ‰ <code>package</code> ä¸‹é¢çš„ç›¸äº’ä¾èµ–è¿›è¡Œ link</p><ul><li><p>åœ¨ <code>package</code> å†…çš„ <code>package.json</code> æ–‡ä»¶ä¸­æŒ‡å®šä¾èµ–</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">package&#x2F;core&#x2F;package.json</span><br><span class="line"></span><br><span class="line">&quot;dependencies&quot;: &#123;</span><br><span class="line">  &quot;@ogliu-cli-demo&#x2F;utils&quot;: &quot;^1.0.0&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨å‘½ä»¤ <code>lerna link</code> , å®ƒå°†åœ¨ <code>core</code> ä¸­çš„ <code>node_modules</code> å†…åˆ›å»ºè½¯é“¾æ¥ï¼ŒæŒ‡å‘æœ¬åœ°çš„ <code>@ogliu-cli-demo/utils</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">lerna link</span><br><span class="line"></span><br><span class="line">cd packages&#x2F;core&#x2F;node_modules&#x2F;@ogliu-cli-demo &amp;&amp; ll</span><br><span class="line"></span><br><span class="line">total 0</span><br><span class="line">drwxr-xr-x  3 liukun  staff  96  2  8 15:12 .&#x2F;</span><br><span class="line">drwxr-xr-x  3 liukun  staff  96  2  8 15:12 ..&#x2F;</span><br><span class="line">lrwxr-xr-x  1 liukun  staff  14  2  8 15:12 utils@ -&gt; ..&#x2F;..&#x2F;..&#x2F;utils</span><br></pre></td></tr></table></figure></li></ul></li><li><p>lerna exec, åœ¨æ‰€æœ‰ <code>package</code> ä¸‹æ‰§è¡Œå‘½ä»¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lerna exec -- rm -rf node_modules&#x2F;</span><br></pre></td></tr></table></figure></li><li><p>lerna exec, åœ¨æŒ‡å®šçš„ <code>package</code> ä¸‹æ‰§è¡Œå‘½ä»¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lerna exec --scope @ogliu-cli-demo&#x2F;core -- rm -rf node_modules&#x2F;</span><br></pre></td></tr></table></figure></li><li><p>lerna run, æ‰§è¡Œæ¯ä¸€ä¸ª <code>package</code> çš„ <code>npm</code> è„šæœ¬, ä¹Ÿå°±æ˜¯ <code>package.json</code> ä¸­çš„ <code>scripts</code> , å¦‚æœéœ€è¦æ‰§è¡ŒæŒ‡å®š <code>package</code> ä¸‹çš„ <code>npm</code> è„šæœ¬ï¼Œåˆ™åŒ <code>lerna exec</code> ä¸€æ ·æ·»åŠ  <code>--scope</code> é€‰é¡¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lerna run test</span><br><span class="line">lerna run --scope @ogliu-cli-demo&#x2F;core test</span><br></pre></td></tr></table></figure></li></ol><h2 id="Lerna-å‘å¸ƒä¸Šçº¿ç›¸å…³å‘½ä»¤"><a href="#Lerna-å‘å¸ƒä¸Šçº¿ç›¸å…³å‘½ä»¤" class="headerlink" title="Lerna å‘å¸ƒä¸Šçº¿ç›¸å…³å‘½ä»¤"></a>Lerna å‘å¸ƒä¸Šçº¿ç›¸å…³å‘½ä»¤</h2><ol><li>é€šè¿‡ <code>lerna version</code> å‘½ä»¤å‡çº§ç‰ˆæœ¬å·</li><li>é€šè¿‡ <code>lerna changed</code> æŸ¥çœ‹è‡ªä¸Šä¸€ä¸ªç‰ˆæœ¬ä»¥æ¥ï¼Œå“ªäº› <code>package</code> åšäº†å˜æ›´</li><li>é€šè¿‡ <code>lerna diff</code> æŸ¥çœ‹è‡ªä¸Šä¸€ä¸ª <code>commit</code> ä»¥æ¥ï¼Œå“ªäº›æ–‡ä»¶åšäº†å˜æ›´</li><li>é€šè¿‡ <code>lerna publish</code> å‘å¸ƒä¸Šçº¿</li></ol><h2 id="Lerna-ç¬¬ä¸€æ¬¡å‘å¸ƒä¸Šçº¿"><a href="#Lerna-ç¬¬ä¸€æ¬¡å‘å¸ƒä¸Šçº¿" class="headerlink" title="Lerna ç¬¬ä¸€æ¬¡å‘å¸ƒä¸Šçº¿"></a>Lerna ç¬¬ä¸€æ¬¡å‘å¸ƒä¸Šçº¿</h2><ol><li><p>ä½¿ç”¨ <code>Organizations</code> çš„å½¢å¼å‘å¸ƒ <code>npm</code> åŒ…æ—¶, é»˜è®¤æƒ…å†µä¸‹éƒ½ä¸º <code>Private</code> çš„ï¼Œéœ€è¦æ·»åŠ é…ç½®ä¿®æ”¹ ä¸º <code>Public</code> , åœ¨æ¯ä¸ª <code>package</code> çš„ <code>package.json</code> æ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢é…ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;publishConfig&quot;: &#123;</span><br><span class="line">  &quot;access&quot;: &quot;public&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>éœ€è¦åœ¨æ ¹ç›®å½•ä¸‹æ·»åŠ  <code>LICENSE.md</code> æ–‡ä»¶</p></li><li><p>éœ€è¦æ‰§è¡Œ <code>npm login</code> è¿›è¡Œç™»å½•</p></li><li><p>é€šè¿‡ <code>lerna publish</code> å‘å¸ƒä¸Šçº¿</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">lerna publish</span><br><span class="line">info cli using local version of lerna</span><br><span class="line">lerna notice cli v4.0.0</span><br><span class="line">lerna info current version 1.0.0</span><br><span class="line">lerna info Assuming all packages changed</span><br><span class="line">? Select a new version (currently 1.0.0) Patch (1.0.1)</span><br><span class="line"></span><br><span class="line">Changes:</span><br><span class="line"> - @ogliu-cli-demo&#x2F;core: 1.0.0 &#x3D;&gt; 1.0.1</span><br><span class="line"> - @ogliu-cli-demo&#x2F;utils: 1.0.0 &#x3D;&gt; 1.0.1</span><br><span class="line"></span><br><span class="line">? Are you sure you want to publish these packages? Yes</span><br><span class="line">lerna info execute Skipping releases</span><br><span class="line">lerna info git Pushing tags...</span><br><span class="line">lerna info publish Publishing packages to npm...</span><br><span class="line">lerna info Verifying npm credentials</span><br><span class="line">lerna http fetch GET 200 https:&#x2F;&#x2F;registry.npmjs.org&#x2F;-&#x2F;npm&#x2F;v1&#x2F;user 856ms</span><br><span class="line">lerna http fetch GET 200 https:&#x2F;&#x2F;registry.npmjs.org&#x2F;-&#x2F;org&#x2F;og-liu&#x2F;package?format&#x3D;cli 1972ms (cache miss)</span><br><span class="line">lerna info Checking two-factor auth mode</span><br><span class="line">lerna http fetch GET 200 https:&#x2F;&#x2F;registry.npmjs.org&#x2F;-&#x2F;npm&#x2F;v1&#x2F;user 274ms</span><br><span class="line">lerna http fetch PUT 200 https:&#x2F;&#x2F;registry.npmjs.org&#x2F;@ogliu-cli-demo%2futils 2747ms</span><br><span class="line">lerna success published @ogliu-cli-demo&#x2F;utils 1.0.1</span><br><span class="line">lerna notice </span><br><span class="line">lerna notice ğŸ“¦  @ogliu-cli-demo&#x2F;utils@1.0.1</span><br><span class="line">lerna notice &#x3D;&#x3D;&#x3D; Tarball Contents &#x3D;&#x3D;&#x3D; </span><br><span class="line">lerna notice 73B  lib&#x2F;utils.js</span><br><span class="line">lerna notice 486B package.json</span><br><span class="line">lerna notice 0B   LICENSE.md  </span><br><span class="line">lerna notice 108B README.md   </span><br><span class="line">lerna notice &#x3D;&#x3D;&#x3D; Tarball Details &#x3D;&#x3D;&#x3D; </span><br><span class="line">lerna notice name:          @ogliu-cli-demo&#x2F;utils                   </span><br><span class="line">lerna notice version:       1.0.1                                   </span><br><span class="line">lerna notice filename:      ogliu-cli-demo-utils-1.0.1.tgz          </span><br><span class="line">lerna notice package size:  596 B                                   </span><br><span class="line">lerna notice unpacked size: 667 B                                   </span><br><span class="line">lerna notice shasum:        01393c72bce7b879c3929ba631bc9b11dbe63cd3</span><br><span class="line">lerna notice integrity:     sha512-mWU8zYJEsM2Qu[...]+ezmbg0&#x2F;BpgiQ&#x3D;&#x3D;</span><br><span class="line">lerna notice total files:   4                                       </span><br><span class="line">lerna notice </span><br><span class="line">lerna success published @ogliu-cli-demo&#x2F;core 1.0.1</span><br><span class="line">lerna notice </span><br><span class="line">lerna notice ğŸ“¦  @ogliu-cli-demo&#x2F;core@1.0.1</span><br><span class="line">lerna notice &#x3D;&#x3D;&#x3D; Tarball Contents &#x3D;&#x3D;&#x3D; </span><br><span class="line">lerna notice 71B  lib&#x2F;core.js </span><br><span class="line">lerna notice 546B package.json</span><br><span class="line">lerna notice 0B   LICENSE.md  </span><br><span class="line">lerna notice 105B README.md   </span><br><span class="line">lerna notice &#x3D;&#x3D;&#x3D; Tarball Details &#x3D;&#x3D;&#x3D; </span><br><span class="line">lerna notice name:          @ogliu-cli-demo&#x2F;core                    </span><br><span class="line">lerna notice version:       1.0.1                                   </span><br><span class="line">lerna notice filename:      ogliu-cli-demo-core-1.0.1.tgz           </span><br><span class="line">lerna notice package size:  623 B                                   </span><br><span class="line">lerna notice unpacked size: 722 B                                   </span><br><span class="line">lerna notice shasum:        67d557e3de1c10d8b40b3eb30c67c9e65a45c93c</span><br><span class="line">lerna notice integrity:     sha512-x&#x2F;XU8GiilKGG3[...]kBR&#x2F;UbJJDiW6A&#x3D;&#x3D;</span><br><span class="line">lerna notice total files:   4                                       </span><br><span class="line">lerna notice </span><br><span class="line">Successfully published:</span><br><span class="line"> - @ogliu-cli-demo&#x2F;core@1.0.1</span><br><span class="line"> - @ogliu-cli-demo&#x2F;utils@1.0.1</span><br><span class="line">lerna success published 2 packages</span><br><span class="line">lerna http fetch PUT 200 https:&#x2F;&#x2F;registry.npmjs.org&#x2F;@ogliu-cli-demo%2fcore 3709ms</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> è®°å½• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è„šæ‰‹æ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitHub æ— æ³•è®¿é—®è§£å†³æ–¹æ¡ˆ</title>
      <link href="2021/09/27/github/"/>
      <url>2021/09/27/github/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¬¬ä¸€æ­¥-æŸ¥çœ‹-GitHub-çš„-IP-åœ°å€"><a href="#ç¬¬ä¸€æ­¥-æŸ¥çœ‹-GitHub-çš„-IP-åœ°å€" class="headerlink" title="ç¬¬ä¸€æ­¥: æŸ¥çœ‹ GitHub çš„ IP åœ°å€"></a>ç¬¬ä¸€æ­¥: æŸ¥çœ‹ GitHub çš„ IP åœ°å€</h2><p>è¿›å…¥ç½‘å€  <a href="https://github.com.ipaddress.com/">https://github.com.ipaddress.com</a></p><img alt="" style="margin: 0" src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210927105709.png" /><h2 id="ç¬¬äºŒæ­¥-æŸ¥çœ‹-GitHub-çš„-åŸŸå-IP"><a href="#ç¬¬äºŒæ­¥-æŸ¥çœ‹-GitHub-çš„-åŸŸå-IP" class="headerlink" title="ç¬¬äºŒæ­¥: æŸ¥çœ‹ GitHub çš„ åŸŸå IP"></a>ç¬¬äºŒæ­¥: æŸ¥çœ‹ GitHub çš„ åŸŸå IP</h2><p>è¿›å…¥ç½‘å€  <a href="https://fastly.net.ipaddress.com/github.global.ssl.fastly.net">https://fastly.net.ipaddress.com/github.global.ssl.fastly.net</a></p><img alt="" style="margin: 0" src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210927110220.png" /><h2 id="ç¬¬ä¸‰æ­¥-æŸ¥çœ‹-GitHub-çš„-é™æ€èµ„æº-IP"><a href="#ç¬¬ä¸‰æ­¥-æŸ¥çœ‹-GitHub-çš„-é™æ€èµ„æº-IP" class="headerlink" title="ç¬¬ä¸‰æ­¥: æŸ¥çœ‹ GitHub çš„ é™æ€èµ„æº IP"></a>ç¬¬ä¸‰æ­¥: æŸ¥çœ‹ GitHub çš„ é™æ€èµ„æº IP</h2><p>è¿›å…¥ç½‘å€ <a href="https://github.com.ipaddress.com/assets-cdn.github.com">https://github.com.ipaddress.com/assets-cdn.github.com</a></p><img alt="" style="margin: 0" src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210927110423.png" /><h2 id="ç¬¬å››æ­¥-ä¿®æ”¹-Hosts-é…ç½®æ–‡ä»¶"><a href="#ç¬¬å››æ­¥-ä¿®æ”¹-Hosts-é…ç½®æ–‡ä»¶" class="headerlink" title="ç¬¬å››æ­¥: ä¿®æ”¹ Hosts é…ç½®æ–‡ä»¶"></a>ç¬¬å››æ­¥: ä¿®æ”¹ Hosts é…ç½®æ–‡ä»¶</h2><p>å°†ä¸Šé¢ä¸‰æ­¥æ‰€å¾—çš„ <code>IP</code> å†™è¿› <code>hosts</code> æ–‡ä»¶é‡Œ</p><ul><li>macOS hosts æ–‡ä»¶è·¯å¾„: /etc/hosts</li><li>Windows hosts æ–‡ä»¶è·¯å¾„: C:\Windows\System32\drivers\etc\hosts</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># GitHub</span><br><span class="line">140.82.114.4 github.com</span><br><span class="line">199.232.69.194 github.global.ssl.fastly.net</span><br><span class="line">185.199.108.153 assets-cdn.github.com</span><br><span class="line">185.199.109.153 assets-cdn.github.com</span><br><span class="line">185.199.110.153 assets-cdn.github.com</span><br><span class="line">185.199.111.153 assets-cdn.github.com</span><br></pre></td></tr></table></figure><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ol><li>è¿™äº› <code>IP</code> è¿‡ä¸€æ®µæ—¶é—´ä¼šå˜åŠ¨ï¼Œæ‰€ä»¥ç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹éƒ½æ˜¯ç›´æ¥å¤åˆ¶ç¬¬å››æ­¥ï¼Œå´æ²¡æœ‰æ•ˆæœï¼Œè¿™æ—¶å€™ä¸€å®šè®°å¾—è¦æŸ¥ä¸€ä¸‹ <code>IP</code> æ˜¯å¦ä¸€æ ·ã€‚</li><li>å¦‚æœåœ¨æµè§ˆå™¨å¼€ç€ <code>GitHub</code> ï¼ˆæ— æ³•è®¿é—®çŠ¶æ€ï¼‰çš„æ—¶å€™ä¿®æ”¹äº† <code>hosts</code> æ–‡ä»¶éœ€è¦é‡å¯æµè§ˆå™¨ã€‚</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> è®°å½• </tag>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜¿é‡Œäº‘å…è´¹ HTTPS è¯ä¹¦é…ç½®</title>
      <link href="2021/09/14/https/"/>
      <url>2021/09/14/https/</url>
      
        <content type="html"><![CDATA[<h1 id="è´­ä¹°å…è´¹è¯ä¹¦"><a href="#è´­ä¹°å…è´¹è¯ä¹¦" class="headerlink" title="è´­ä¹°å…è´¹è¯ä¹¦"></a>è´­ä¹°å…è´¹è¯ä¹¦</h1><blockquote><p>è·¯å¾„: èœå• =&gt; äº§å“ä¸æœåŠ¡ =&gt; å®‰å…¨ =&gt; äº‘å®‰å…¨ =&gt; SSLè¯ä¹¦ï¼ˆåº”ç”¨å®‰å…¨ï¼‰</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210916093950.png"></p><h1 id="åˆ›å»ºè¯ä¹¦"><a href="#åˆ›å»ºè¯ä¹¦" class="headerlink" title="åˆ›å»ºè¯ä¹¦"></a>åˆ›å»ºè¯ä¹¦</h1><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210916095236.png"></p><h1 id="ç”³è¯·è¯ä¹¦"><a href="#ç”³è¯·è¯ä¹¦" class="headerlink" title="ç”³è¯·è¯ä¹¦"></a>ç”³è¯·è¯ä¹¦</h1><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210916095821.png"></p><h1 id="ä¸‹è½½è¯ä¹¦"><a href="#ä¸‹è½½è¯ä¹¦" class="headerlink" title="ä¸‹è½½è¯ä¹¦"></a>ä¸‹è½½è¯ä¹¦</h1><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210916100426.png"></p><h1 id="æœåŠ¡å™¨ç±»å‹é€‰æ‹©ä¸‹è½½"><a href="#æœåŠ¡å™¨ç±»å‹é€‰æ‹©ä¸‹è½½" class="headerlink" title="æœåŠ¡å™¨ç±»å‹é€‰æ‹©ä¸‹è½½"></a>æœåŠ¡å™¨ç±»å‹é€‰æ‹©ä¸‹è½½</h1><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210916100427.png"></p><h1 id="æ£€æŸ¥è¯ä¹¦"><a href="#æ£€æŸ¥è¯ä¹¦" class="headerlink" title="æ£€æŸ¥è¯ä¹¦"></a>æ£€æŸ¥è¯ä¹¦</h1><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210916100804.png"></p><h1 id="ä¸Šä¼ è¯ä¹¦è‡³æœåŠ¡å™¨"><a href="#ä¸Šä¼ è¯ä¹¦è‡³æœåŠ¡å™¨" class="headerlink" title="ä¸Šä¼ è¯ä¹¦è‡³æœåŠ¡å™¨"></a>ä¸Šä¼ è¯ä¹¦è‡³æœåŠ¡å™¨</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp .&#x2F;6291212_ogliu.com.pem root@***.***.***.***:&#x2F;etc&#x2F;nginx&#x2F;cert</span><br><span class="line">scp .&#x2F;6291212_ogliu.com.key root@***.***.***.***:&#x2F;etc&#x2F;nginx&#x2F;cert</span><br></pre></td></tr></table></figure><h1 id="Nginx-é…ç½®è¯ä¹¦"><a href="#Nginx-é…ç½®è¯ä¹¦" class="headerlink" title="Nginx é…ç½®è¯ä¹¦"></a>Nginx é…ç½®è¯ä¹¦</h1><blockquote><p><code>ssl_certificate</code>ã€<code>ssl_certificate_key</code> å¯¹åº”è¯ä¹¦</p></blockquote><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  ogliu.com;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">root</span>   /*/ogliu/;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">index</span>  index.php index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">server_name</span> ogliu.com;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">root</span> /*/ogliu/;</span><br><span class="line">    <span class="attribute">index</span> index.html index.htm;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /etc/nginx/cert/<span class="regexp">*.ogliu.com.pem</span>;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /etc/nginx/cert/<span class="regexp">*.ogliu.com.key</span>;</span><br><span class="line">    <span class="attribute">ssl_session_timeout</span> <span class="number">5m</span>;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">    <span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line">    <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">index</span> index.php index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Nginx-é…ç½®æ£€æµ‹ã€é‡å¯"><a href="#Nginx-é…ç½®æ£€æµ‹ã€é‡å¯" class="headerlink" title="Nginx é…ç½®æ£€æµ‹ã€é‡å¯"></a>Nginx é…ç½®æ£€æµ‹ã€é‡å¯</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx -t</span><br><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> è®°å½• </tag>
            
            <tag> é˜¿é‡Œäº‘ </tag>
            
            <tag> https </tag>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¿«é€ŸæŒæ¡ ESLint ä»£ç æ£€æµ‹å·¥å…·</title>
      <link href="2021/09/01/eslint/"/>
      <url>2021/09/01/eslint/</url>
      
        <content type="html"><![CDATA[<h1 id="è§„åˆ™ç­‰çº§"><a href="#è§„åˆ™ç­‰çº§" class="headerlink" title="è§„åˆ™ç­‰çº§"></a>è§„åˆ™ç­‰çº§</h1><p>ESLint é™„å¸¦æœ‰å¤§é‡çš„è§„åˆ™ã€‚ä½ å¯ä»¥ä½¿ç”¨æ³¨é‡Šæˆ–é…ç½®æ–‡ä»¶ä¿®æ”¹ä½ é¡¹ç›®ä¸­è¦ä½¿ç”¨çš„è§„åˆ™ã€‚è¦æ”¹å˜ä¸€ä¸ªè§„åˆ™è®¾ç½®ï¼Œä½ å¿…é¡»å°†è§„åˆ™ ID è®¾ç½®ä¸ºä¸‹åˆ—å€¼ä¹‹ä¸€:</p><ol><li>â€œoffâ€ æˆ– 0 - å…³é—­è§„åˆ™</li><li>â€œwarnâ€ æˆ– 1 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨è­¦å‘Šçº§åˆ«çš„é”™è¯¯ï¼šwarn (ä¸ä¼šå¯¼è‡´ç¨‹åºé€€å‡º)</li><li>â€œerrorâ€ æˆ– 2 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨é”™è¯¯çº§åˆ«çš„é”™è¯¯ï¼šerror (å½“è¢«è§¦å‘çš„æ—¶å€™ï¼Œç¨‹åºä¼šé€€å‡º)</li></ol><h1 id="æ¨èè§„åˆ™123"><a href="#æ¨èè§„åˆ™123" class="headerlink" title="æ¨èè§„åˆ™123"></a>æ¨èè§„åˆ™123</h1><blockquote><p>ä¸‹åˆ—è§„åˆ™åªåˆ—ä¸¾æ¨èçš„è§„åˆ™å‚æ•°é…ç½®ï¼Œè¯¦æƒ…å¯ä»¥æ ¹æ®è§„åˆ™åè‡ªè¡ŒæŸ¥é˜…  <a href="http://eslint.cn/docs/rules/">ESLint å®˜æ–¹æ–‡æ¡£</a> , å¦å¤–æ¨èè§„åˆ™åŒ…å«äº†ä¸ªäººä¹ æƒ¯è·Ÿç†è§£, å¦‚æœæœ‰ä¸åŒæƒ³æ³•çš„å®Œå…¨å¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ³æ³•çµæ´»é…ç½®</p></blockquote><h2 id="å¼ºåˆ¶-generator-å‡½æ•°ä¸­-å·å‰åéƒ½æœ‰ç©ºæ ¼"><a href="#å¼ºåˆ¶-generator-å‡½æ•°ä¸­-å·å‰åéƒ½æœ‰ç©ºæ ¼" class="headerlink" title="å¼ºåˆ¶ generator å‡½æ•°ä¸­ * å·å‰åéƒ½æœ‰ç©ºæ ¼"></a>å¼ºåˆ¶ generator å‡½æ•°ä¸­ * å·å‰åéƒ½æœ‰ç©ºæ ¼</h2><p>åœ¨ ECMAScript 6 ä¸­ï¼ŒGenerators æ˜¯ä¸€ä¸ªæ–°çš„å‡½æ•°ç±»å‹ï¼Œéšç€æ—¶é—´çš„æ¨ç§»å¯ä»¥è¿”å›å¤šä¸ªå€¼ã€‚è¿™äº›ç‰¹æ®Šçš„å‡½æ•°æ˜¯åœ¨ function å…³é”®å­—åæ”¾ç½®ä¸€ä¸ª *ï¼Œä¸ºäº†ä¿æŒä½¿ç”¨ generators å‡½æ•°çš„ä¸€è‡´æ€§ï¼Œè¯¥è§„åˆ™å¯¹ * å¼ºåˆ¶è®¾ç½®ä¸€ä¸ªå•ç‹¬çš„ä½ç½®ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#39;generator-star-spacing&#39;: [1, &#123;&quot;before&quot;: true, &quot;after&quot;: true&#125;]</span><br></pre></td></tr></table></figure><h2 id="ç¦ç”¨-debugger"><a href="#ç¦ç”¨-debugger" class="headerlink" title="ç¦ç”¨ debugger"></a>ç¦ç”¨ debugger</h2><p>debugger è¯­å¥ç”¨äºå‘Šè¯‰ JavaScript æ‰§è¡Œç¯å¢ƒåœæ­¢æ‰§è¡Œå¹¶åœ¨ä»£ç çš„å½“å‰ä½ç½®å¯åŠ¨è°ƒè¯•å™¨ã€‚éšç€ç°ä»£è°ƒè¯•å’Œå¼€å‘å·¥å…·çš„å‡ºç°ï¼Œä½¿ç”¨è°ƒè¯•å™¨å·²ä¸æ˜¯æœ€ä½³å®è·µã€‚äº§å“ä»£ç ä¸åº”è¯¥åŒ…å« debuggerï¼Œå› ä¸ºå®ƒä¼šå¯¼è‡´æµè§ˆå™¨åœæ­¢æ‰§è¡Œä»£ç å¹¶æ‰“å¼€ä¸€ä¸ªé€‚å½“çš„è°ƒè¯•å™¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#39;no-debugger&#39;: 1</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>åå¤§æ’åºç®—æ³•ä¹‹é€‰æ‹©æ’åº</title>
      <link href="2021/08/26/SelectionSort/"/>
      <url>2021/08/26/SelectionSort/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯é€‰æ‹©æ’åº"><a href="#ä»€ä¹ˆæ˜¯é€‰æ‹©æ’åº" class="headerlink" title="ä»€ä¹ˆæ˜¯é€‰æ‹©æ’åº"></a>ä»€ä¹ˆæ˜¯é€‰æ‹©æ’åº</h2><p>é€‰æ‹©æ’åº <code>Selection sort</code> æ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯ï¼šç¬¬ä¸€æ¬¡ä»å¾…æ’åºçš„æ•°æ®å…ƒç´ ä¸­é€‰å‡ºæœ€å°ï¼ˆæˆ–æœ€å¤§ï¼‰çš„ä¸€ä¸ªå…ƒç´ ï¼Œå­˜æ”¾åœ¨åºåˆ—çš„èµ·å§‹ä½ç½®ï¼Œç„¶åå†ä»å‰©ä½™çš„æœªæ’åºå…ƒç´ ä¸­å¯»æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºçš„åºåˆ—çš„æœ«å°¾ã€‚ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°å…¨éƒ¨å¾…æ’åºçš„æ•°æ®å…ƒç´ çš„ä¸ªæ•°ä¸ºé›¶ã€‚</p><h2 id="é€‰æ‹©æ’åºæ€è·¯"><a href="#é€‰æ‹©æ’åºæ€è·¯" class="headerlink" title="é€‰æ‹©æ’åºæ€è·¯"></a>é€‰æ‹©æ’åºæ€è·¯</h2><p>å…ˆå°†æ•°ç»„ä¸­æœ€å°ï¼ˆå¤§ï¼‰çš„å…ƒç´ æ‰¾åˆ°å¹¶ä¸”æ ‡è®°ï¼Œå³è®°å½•æœ€å°ï¼ˆå¤§ï¼‰æ•°æ®çš„ä¸‹æ ‡ï¼Œå°†æ‰¾åˆ°çš„æœ€å°å…ƒç´ ç§»åŠ¨åˆ°æœ€å·¦ä¾§ï¼Œä¹Ÿå°±æ˜¯ç›®å‰çš„ä¸‹æ ‡æœ€å°ï¼ˆå¤§ï¼‰çš„ä½ç½®ï¼Œä¸‹æ¬¡æ¯”è¾ƒå°±é™¤å»ä¸Šæ¬¡æ‰¾åˆ°å¹¶ä¸”ç§»åŠ¨çš„æœ€å°ï¼ˆå¤§ï¼‰å€¼ï¼Œå¯¹å‰©ä¸‹æ•°æ®ç»§ç»­é‡å¤ä¸Šè¿°æ“ä½œï¼Œç›´åˆ°æ’åºç»“æŸã€‚</p><blockquote><p>é€‰æ‹©æ’åºå…¶å®å¯ä»¥ç®—æ˜¯å¯¹å†’æ³¡æ’åºçš„ä¸€ä¸ªä¼˜åŒ–ï¼ŒåŒºåˆ«å°±æ˜¯å†’æ³¡æ’åºæ¯æ¬¡æ¯”è¾ƒå®Œç«‹åˆ»å°†å¤§å°ä¸å¯¹æ•°æ®è¿›è¡Œäº¤æ¢ï¼Œé€‰æ‹©æ’åºè·Ÿå†’æ³¡çš„å¯¹æ¯”æ—¶é—´å¤æ‚åº¦æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯æ¯æ¬¡å†…å¾ªç¯éƒ½å°†æ•°æ®æœ€å°çš„è§’æ ‡æ ‡è®°ï¼Œä¸€è½®æ¯”è¾ƒç»“æŸä¹‹åå†äº¤æ¢æ•°æ®ï¼Œæ‰€ä»¥é€‰æ‹©æ’åºçš„æ•°æ®äº¤æ¢æ—¶é—´å¤æ‚åº¦æ˜¯ä½äºå†’æ³¡æ’åºã€‚</p></blockquote><h2 id="å›¾è§£"><a href="#å›¾è§£" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h2><ol><li>è¿™æ˜¯ç¬¬äºŒè½®çš„æ¯”è¾ƒæµç¨‹å›¾è§£ï¼ˆå‡åºï¼‰ï¼Œé»„è‰²è¡¨ç¤ºå·²æ’åºï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¬ä¸€è½®å·²ç»ç»“æŸï¼Œæœ€å°çš„ <code>10</code> å·²ç»è¢«æ‰¾å‡ºæ¥äº†ã€‚</li><li>ç¬¬äºŒè½®æ’åºæ¯”è¾ƒï¼Œé¦–å…ˆçº¢è‰²çš„å°±æ˜¯æœ¬è½®èµ·å§‹å…ƒç´ ï¼Œå»æ‰å·²æ’åºçš„ <code>10</code>ï¼Œä» <code>20</code> å¼€å§‹ï¼Œæ‰€ä»¥ <code>20</code> ç”¨çº¢è‰²è¡¨ç¤ºå½“å‰æœ€å°å€¼ï¼ˆç”±äºæ˜¯åšå‡åºæ’åºï¼Œæ‰€ä»¥è¦æ‰¾å‡ºæœ€å°çš„æ•°æ”¾å‰é¢ï¼‰ï¼Œä¸ä¸‹ä¸€ä¸ªå…ƒç´  <code>15</code> æ¯”è¾ƒå¤§å°ï¼Œä¸‹ä¸€ä¸ªå…ƒç´  <code>15</code> ç”¨ç»¿è‰²è¡¨ç¤º.</li><li><code>15</code> æ¯” <code>20</code> å°ï¼Œæ‰€ä»¥çº¢è‰²ï¼ˆå½“å‰æœ€å°å€¼ï¼‰ç”± <code>20</code> å˜æˆ <code>15</code> ï¼ˆæ­¤æ—¶å¹¶æœªäº¤æ¢ä½ç½®ï¼Œåªæ˜¯è®°å½•ç´¢å¼•ï¼Œç”¨äºè¡¨ç¤ºå½“å‰æœ€å°å€¼ï¼‰ä¸‹æ¬¡æ¯”è¾ƒå°±ä¸å†ä½¿ç”¨ <code>20</code> è€Œæ˜¯ ä½¿ç”¨ <code>15</code>, è€Œä¸‹ä¸€ä¸ªæ¯”è¾ƒçš„æ•°åˆ™æ˜¯ <code>15</code> åé¢çš„ <code>30</code>ï¼Œæ‰€ä»¥ <code>30</code> å˜ç»¿è‰²ã€‚</li><li>ä»¥æ­¤ç±»æ¨ï¼Œæœ€åå¾—å‡ºæœ€å°å€¼æ˜¯ <code>12</code>ï¼Œåˆ™æŠŠ <code>12</code> æ›¿æ¢åˆ°æœªæ’åºçš„ç¬¬ä¸€ä½ã€‚</li></ol><div style="width: 100%; text-align: left">    <img style="display: block; margin: 0" src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210826170436.gif" alt="å›¾ç‰‡æ›¿æ¢æ–‡æœ¬" /></div><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@title  </span>é€‰æ‹©æ’åº</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@auhor  </span>Liu Kun</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@date   </span>2021/08/26</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param  </span>array éœ€è¦åšæ’åºçš„æºæ•°ç»„</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param  </span>sort æ’åºæ–¹å¼ true = å‡åº  false = é™åºï¼Œé»˜è®¤å‡åº</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@return </span>æ’åºä¹‹åçš„æ•°ç»„</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">selectionSort</span> (<span class="params">array, sort = <span class="literal">true</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> length = array.length</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; i++)&#123;</span><br><span class="line">        <span class="comment">// æ¯ä¸€è½®æ‰¾å‡ºæ¥çš„æœ€å¤§å€¼ï¼ˆå‡åºï¼‰æˆ–è€…æœ€å°å€¼ï¼ˆé™åºï¼‰çš„ç´¢å¼•</span></span><br><span class="line">        <span class="keyword">let</span> index = i</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; length; j++)&#123;</span><br><span class="line">            <span class="comment">// æ ¹æ®å‚æ•°åˆ¤æ–­æ˜¯åšå‡åºæ¯”è¾ƒè¿˜æ˜¯é™åºæ¯”è¾ƒ</span></span><br><span class="line">            <span class="keyword">const</span> compare = sort ? array[index] &gt; array[j] : array[index] &lt; array[j]</span><br><span class="line">            <span class="keyword">if</span>(compare) index = j</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å°†æ¯ä¸€è½®çš„æœ€å¤§å€¼ï¼ˆå‡åºï¼‰æˆ–è€…æœ€å°å€¼ï¼ˆé™åºï¼‰æ›¿æ¢åˆ°æœªæ’åºçš„é¦–ä½</span></span><br><span class="line">        [array[i], array[index]] = [array[index], array[i]]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> array</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><p>é€‚ç”¨äºå¤§å¤šæ•°æ’åºåœºæ™¯ï¼Œè™½ç„¶ä»–çš„å¯¹æ¯”æ¬¡æ•°è¾ƒå¤šï¼Œä½†æ˜¯æ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œä»–çš„æ•ˆç‡æ˜æ˜¾ä¼˜äºå†’æ³¡ï¼Œè€Œä¸”æ•°æ®ç§»åŠ¨æ˜¯éå¸¸è€—æ—¶çš„ï¼Œé€‰æ‹©æ’åºç§»åŠ¨æ¬¡æ•°å°‘ã€‚</p><h2 id="ç®—æ³•ç¨³å®šæ€§"><a href="#ç®—æ³•ç¨³å®šæ€§" class="headerlink" title="ç®—æ³•ç¨³å®šæ€§"></a>ç®—æ³•ç¨³å®šæ€§</h2><p>é€‰æ‹©æ’åºæ˜¯ç»™æ¯ä¸ªä½ç½®é€‰æ‹©å½“å‰å…ƒç´ æœ€å°çš„ï¼Œæ¯”å¦‚ç»™ç¬¬ä¸€ä¸ªä½ç½®é€‰æ‹©æœ€å°çš„ï¼Œåœ¨å‰©ä½™å…ƒç´ é‡Œé¢ç»™ç¬¬äºŒä¸ªå…ƒç´ é€‰æ‹©ç¬¬äºŒå°çš„ï¼Œä¾æ¬¡ç±»æ¨ï¼Œç›´åˆ°ç¬¬ <code>n-1</code> ä¸ªå…ƒç´ ï¼Œç¬¬ <code>n</code> ä¸ªå…ƒç´ ä¸ç”¨é€‰æ‹©äº†ï¼Œå› ä¸ºåªå‰©ä¸‹å®ƒä¸€ä¸ªæœ€å¤§çš„å…ƒç´ äº†ã€‚é‚£ä¹ˆï¼Œåœ¨ä¸€è¶Ÿé€‰æ‹©ï¼Œå¦‚æœä¸€ä¸ªå…ƒç´ æ¯”å½“å‰å…ƒç´ å°ï¼Œè€Œè¯¥å°çš„å…ƒç´ åˆå‡ºç°åœ¨ä¸€ä¸ªå’Œå½“å‰å…ƒç´ ç›¸ç­‰çš„å…ƒç´ åé¢ï¼Œé‚£ä¹ˆäº¤æ¢åç¨³å®šæ€§å°±è¢«ç ´åäº†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåºåˆ— <code>5 8 5 2 9</code>ï¼Œæˆ‘ä»¬çŸ¥é“ç¬¬ä¸€éé€‰æ‹©ç¬¬ <code>1</code> ä¸ªå…ƒç´  <code>5</code> ä¼šå’Œ <code>2</code> äº¤æ¢ï¼Œé‚£ä¹ˆåŸåºåˆ—ä¸­ä¸¤ä¸ª <code>5</code> çš„ç›¸å¯¹å‰åé¡ºåºå°±è¢«ç ´åäº†ï¼Œæ‰€ä»¥é€‰æ‹©æ’åºæ˜¯ä¸€ä¸ªä¸ç¨³å®šçš„æ’åºç®—æ³•ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> ES6 </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¡«å‘æ—¥å¿—ä¹‹ router.go å¼•èµ·çš„æ­»å¾ªç¯</title>
      <link href="2021/08/25/routerGo/"/>
      <url>2021/08/25/routerGo/</url>
      
        <content type="html"><![CDATA[<h2 id="BUG-æè¿°"><a href="#BUG-æè¿°" class="headerlink" title="BUG æè¿°"></a>BUG æè¿°</h2><p>ç™»å½•é¡µé¢ï¼Œé€‰æ‹©å¾®ä¿¡æ‰«ç ç™»å½•ï¼Œå¦‚æœæ˜¯æ²¡æœ‰ç»‘å®šä¼ä¸šçš„å¾®ä¿¡è´¦å·ï¼Œåœ¨å¾®ä¿¡æ‰«ç é¡µé¢è·³è½¬å›æ¥çš„æ—¶å€™ï¼Œç™»å½•é¡µè¯·æ±‚æ¥å£ä¼šè¿”å› 400 çŠ¶æ€ç ï¼Œç„¶ååˆ·æ–°é¡µé¢å†æ¬¡è¯·æ±‚æ¥å£è¿”å› 400 çŠ¶æ€ç ï¼Œæ— é™å¾ªç¯ã€‚</p><h2 id="ä»£ç åˆ†æ"><a href="#ä»£ç åˆ†æ" class="headerlink" title="ä»£ç åˆ†æ"></a>ä»£ç åˆ†æ</h2><p>å‰ç«¯æ‰€æœ‰çš„ <code>http</code> è¯·æ±‚å…¨éƒ¨å°è£…åœ¨ <code>request.js</code> å†…ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šèµ°ä¸€éè¿™é‡Œé¢çš„ä»£ç ï¼Œè¿™é‡Œæ ¹æ®ä¸åŒçš„ <code>çŠ¶æ€ç </code> åšäº†ä¸€äº›å¤„ç†ï¼Œç»è¿‡é•¿æ—¶é—´å¤šäººçš„åå¤ä¿®æ”¹ï¼Œé‡Œé¢ç©¿æ’äº†å¾ˆå¤š <code>ä¸šåŠ¡å¤„ç†</code>, è¿™ä¸ª BUG å°±æ˜¯ç”±è¿™éƒ¨åˆ†ä»£ç æ‰€å¼•èµ·çš„ã€‚</p><blockquote><p>// â€¦ æ³¨é‡Šéƒ¨åˆ†ä¸ºä¸æœ¬æ¬¡ BUG åˆ†ææ— å…³çš„ä¸Šä¸‹æ–‡ç›¸å…³ä»£ç </p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// request.js ä¿®å¤å‰ä»£ç </span></span><br><span class="line"><span class="keyword">if</span> (status === <span class="number">401</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (status === <span class="number">400</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (error.response.data.error.message === <span class="string">&#x27;å½“å‰è´¦æˆ·æ²¡æœ‰ç»‘å®šä¼ä¸š&#x27;</span>) &#123;</span><br><span class="line">    Notification.error(&#123;</span><br><span class="line">      title: <span class="string">&#x27;å½“å‰è´¦æˆ·æ²¡æœ‰ç»‘å®šä¼ä¸š, è¯·é‡æ–°ç™»å½•&#x27;</span>,</span><br><span class="line">      position: <span class="string">&#x27;bottom-right&#x27;</span>,</span><br><span class="line">      duration: <span class="number">1000</span>,</span><br><span class="line">      onClose: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        store.dispatch(<span class="string">&#x27;authority/LogOut&#x27;</span>, <span class="literal">true</span>, &#123; <span class="attr">root</span>: <span class="literal">true</span> &#125;) <span class="comment">// é€€å‡ºç™»å½•</span></span><br><span class="line">        router.go(<span class="string">&#x27;/login&#x27;</span>) <span class="comment">// å»å¾€ç™»å½•é¡µ</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™æ®µä»£ç çš„å¤§æ¦‚æ„æ€æ˜¯ï¼Œæ‰€æœ‰çš„ <code>http</code> è¯·æ±‚è¿”å› <code>çŠ¶æ€ç  400</code>ï¼Œ å°±è®©è·¯ç”±è·³è½¬åˆ°ç™»å½•é¡µï¼Œç„¶åçœ‹ä¸‹ç™»å½•é¡µçš„å¤„ç†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// login/index.vue</span></span><br><span class="line"><span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="built_in">this</span>.getQRToken()<span class="comment">// åœ¨è¿›å…¥é¡µé¢çš„æ—¶å€™,éƒ½ä¼šè¯·æ±‚ä¸€æ¬¡ getQRToken() æ–¹æ³•</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">  <span class="comment">// è·å–å›è°ƒå‚æ•°</span></span><br><span class="line">  <span class="function"><span class="title">getQRToken</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> query = <span class="built_in">this</span>.$route.query</span><br><span class="line">    <span class="keyword">if</span> (query &amp;&amp; query.weixin_token) &#123;</span><br><span class="line">      <span class="comment">// è¿”å›å¾®ä¿¡ token è·³è½¬ ç»‘å®šè´¦å·é¡µé¢ ä¼ é€’token</span></span><br><span class="line">      <span class="built_in">this</span>.$router.push(&#123;<span class="attr">path</span>: <span class="string">&#x27;/binding&#x27;</span>, query&#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (query &amp;&amp; query.user_token) &#123;</span><br><span class="line">      <span class="comment">// è¿”å›ç”¨æˆ·token è¯·æ±‚ç¬¬ä¸‰æ–¹ç™»é™†è·å–ä»¤ç‰Œ</span></span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">true</span></span><br><span class="line">      <span class="built_in">this</span>[<span class="string">&#x27;authority/getAccessTokenByQR&#x27;</span>](&#123;<span class="attr">user_token</span>: query.user_token&#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.loading = <span class="literal">false</span></span><br><span class="line">        <span class="keyword">if</span> (res.status &lt; <span class="number">400</span> &amp;&amp; res.data.access_token) &#123;</span><br><span class="line">          <span class="built_in">this</span>[<span class="string">&#x27;authority/GetUserInfo&#x27;</span>](&#123;&#125;)</span><br><span class="line">            .then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.$notify.success(&#123;</span><br><span class="line">              title: <span class="string">&#x27;ç™»å½•æˆåŠŸ&#x27;</span>,</span><br><span class="line">              position: <span class="string">&#x27;right-bottom&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="built_in">this</span>[<span class="string">&#x27;authority/setUserLoginState&#x27;</span>](<span class="literal">true</span>)</span><br><span class="line">            <span class="built_in">this</span>.$disconnect()</span><br><span class="line">            <span class="built_in">this</span>.$connect()</span><br><span class="line">            <span class="keyword">if</span> (navigator.userAgent.indexOf(<span class="string">&#x27;Firefox&#x27;</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">              <span class="built_in">window</span>.location.href = getMainHost(ENV, <span class="literal">null</span>, <span class="literal">true</span>)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (<span class="built_in">this</span>.hasRoles) &#123;</span><br><span class="line">                <span class="built_in">this</span>.$router.push(&#123;<span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>&#125;)</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.$router.push(&#123;<span class="attr">path</span>: <span class="string">&#x27;/mySupplier&#x27;</span>&#125;)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;).catch(<span class="function">(<span class="params">errorRes</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>[<span class="string">&#x27;authority/LogOut&#x27;</span>]()</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;).catch(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(e)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="comment">// ...</span></span><br></pre></td></tr></table></figure><ul><li><p>åœ¨ç™»å½•é¡µï¼Œæ¯æ¬¡åˆ·æ–°é¡µé¢æˆ–è€…è¿›å…¥é¡µé¢ï¼Œéƒ½ä¼šè¿›å…¥åˆ° <code>mounted</code> ç”Ÿå‘½å‘¨æœŸï¼Œæ‰§è¡Œé‡Œé¢ä»£ç ï¼Œç„¶åè°ƒç”¨äº†  <code>getQRToken</code> æ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•å†…éƒ¨åˆ¤æ–­è·¯ç”±çš„å‚æ•°ï¼ˆqueryï¼‰æ¥å¾—çŸ¥æ˜¯å¦æ˜¯å¾®ä¿¡ç™»å½•ï¼Œå¦‚æœæ˜¯çš„è¯æ‰§è¡Œç›¸åº”çš„å¤„ç†ã€‚</p></li><li><p>è€Œå½“æˆ‘ä»¬ç”¨æ²¡æœ‰ç»‘å®šå¾®ä¿¡ä¼ä¸šçš„è´¦å·æ‰«ç ç™»å½•ï¼Œå¾®ä¿¡è·³è½¬å›æ¥çš„è·¯å¾„æ˜¯ <code>https://86yqy.com/login?user_token=4e411cf59c1ea7a9c04fdd9329492c3c</code> , æ‰€ä»¥åœ¨ <code>getQRToken</code> æ–¹æ³•ä¸­ï¼Œå°†ä¼šæ‰§è¡Œå¸¦æœ‰  <code>user_token</code> çš„åˆ¤æ–­åˆ†æ”¯é‡Œã€‚</p></li><li><p>åœ¨ <code>user_token</code> çš„åˆ¤æ–­åˆ†æ”¯é‡Œè¯·æ±‚æ¥å£ï¼Œç”±äºå¾®ä¿¡è´¦å·æ²¡æœ‰ç»‘å®šä¼ä¸šè¿”å›äº† <code>400</code>,  è€Œæ¯ä¸ªè¯·æ±‚éƒ½ä¼šèµ° <code>request.js</code>, è¿”å› <code>400</code> çš„è¯  <code>request.js</code>åˆä¼šè®©è·¯ç”±èµ°å›ç™»å½•é¡µã€‚</p></li></ul><blockquote><p>ç›®å‰çš„æƒ…å†µæ˜¯ï¼Œ<code>request.js</code> è®©è·¯ç”±èµ°å›ç™»å½•é¡µï¼Œä½†æ˜¯æ²¡æœ‰æ¸…é™¤æ‰ <code>query</code> å‚æ•°ï¼Œæ‰€ä»¥å¯¼è‡´ä»å¾®ä¿¡æ‰«ç ç™»å½•é¡µé¢è·³è½¬å›æ¥çš„è·¯å¾„æ˜¯ <code>https://86yqy.com/login?user_token=4e411cf59c1ea7a9c04fdd9329492c3c</code>, è€Œ <code>request.js</code> çš„ <code>400çŠ¶æ€ç </code> è®©è·¯ç”±è·³è½¬å›ç™»å½•é¡µï¼Œå®Œæ•´è·¯å¾„è¿˜æ˜¯ <code>https://86yqy.com/login?user_token=4e411cf59c1ea7a9c04fdd9329492c3c</code>, æ²¡æœ‰å˜ï¼Œæ‰€ä»¥åˆä¼šä»ç”Ÿå‘½å‘¨æœŸå¼€å§‹é‡æ–°èµ°ä¸€éï¼Œä¸€ç›´å¾ªç¯ã€‚</p></blockquote><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>åœ¨ <code>request.js</code> å†… <code>400çŠ¶æ€ç </code> çš„å¤„ç†ï¼Œè·³è½¬å›é¦–é¡µæ˜¯å¯¹çš„ï¼Œä½†æ˜¯è¦æŠŠå®Œæ•´è·¯ç”±é‡Œé¢çš„ <code>query</code> å‚æ•°ç»™æ¸…é™¤æ‰ï¼Œæ‰€ä»¥åœ¨ä¸Šè¿°ç¬¬ä¸€æ®µä»£ç ä¸­ä½¿ç”¨ <code>router.go(&#39;/login&#39;)</code> å»å¾€ç™»å½•é¡µå°±ä¸åˆé€‚äº†ï¼Œå› ä¸ºå®ƒæœ¬èº«å°±åœ¨ <code>/login</code> è·¯ç”±ä¸‹ï¼Œåªæ˜¯å¤šäº†å‚æ•°ï¼Œæ‰€ä»¥è¦ä½¿ç”¨ <code>router.replace(&#39;/login&#39;)</code> æ¥å°†å®Œæ•´çš„è·¯ç”± <code>/login?user_token=4e411cf59c1ea7a9c04fdd9329492c3c</code> æ›¿æ¢æˆ <code>/login</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// request.js ä¿®å¤åä»£ç </span></span><br><span class="line"><span class="keyword">if</span> (status === <span class="number">401</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (status === <span class="number">400</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (error.response.data.error.message === <span class="string">&#x27;å½“å‰è´¦æˆ·æ²¡æœ‰ç»‘å®šä¼ä¸š&#x27;</span>) &#123;</span><br><span class="line">    MessageBox.alert(<span class="string">&#x27;å½“å‰è´¦æˆ·æ²¡æœ‰ç»‘å®šä¼ä¸š, è¯·é‡æ–°ç™»å½•&#x27;</span>, &#123;</span><br><span class="line">      confirmButtonText: <span class="string">&#x27;ç¡®è®¤&#x27;</span>,</span><br><span class="line">      type: <span class="string">&#x27;warning&#x27;</span>,</span><br><span class="line">      callback: <span class="function"><span class="params">action</span> =&gt;</span> &#123;</span><br><span class="line">        store.dispatch(<span class="string">&#x27;authority/LogOut&#x27;</span>, <span class="literal">true</span>, &#123; <span class="attr">root</span>: <span class="literal">true</span> &#125;) <span class="comment">// é€€å‡ºç™»å½•</span></span><br><span class="line">        router.replace(<span class="string">&#x27;/login&#x27;</span>) <span class="comment">// å»å¾€ç™»å½•é¡µ</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="comment">// ...</span></span><br></pre></td></tr></table></figure><h2 id="é¢å¤–ä¼˜åŒ–"><a href="#é¢å¤–ä¼˜åŒ–" class="headerlink" title="é¢å¤–ä¼˜åŒ–"></a>é¢å¤–ä¼˜åŒ–</h2><ul><li><p>é™¤äº†æ›´æ¢ <code>router</code> çš„æ–¹æ³•ä½¿ç”¨è§£å†³æ­»å¾ªç¯ <code>BUG</code>, è¿™é‡Œè¿˜å°†ç¬¬ <code>Notification</code> ç»„ä»¶ æ›´æ¢æˆäº† <code>MessageBox</code> ç»„ä»¶ï¼Œä¸å…¶ä»–çŠ¶æ€ç çš„è¡¨ç°ä¿æŒç»Ÿä¸€</p></li><li><p>æ•´ä¸ª <code>request.js</code> å¤šå¤„ä½¿ç”¨äº† <code>router.go</code>ã€<code>router.push</code>ã€<code>router.replace</code>, ä¹Ÿå°±æ˜¯è¯´ä¸Šé¢çš„é—®é¢˜ï¼Œå…¶å®åœ¨å¾ˆå¤šåœ°æ–¹éƒ½æ˜¯æœ‰é—®é¢˜çš„ï¼Œåªæ˜¯æ²¡æœ‰è§¦å‘ï¼ŒåŸºäºä»£ç çš„ä¸¥è°¨æ€§ã€ç»Ÿä¸€æ€§åšäº†ç›¸åº”çš„æ›´æ”¹ã€‚</p></li></ul><h2 id="åç»­å¾…ä¼˜åŒ–"><a href="#åç»­å¾…ä¼˜åŒ–" class="headerlink" title="åç»­å¾…ä¼˜åŒ–"></a>åç»­å¾…ä¼˜åŒ–</h2><p><code>request.js</code> æœ¬æ„æ˜¯å°è£… <code>http</code> è¯·æ±‚, æœ€åˆä¹Ÿæ˜¯è¿™æ ·åšçš„ï¼Œä½†æ˜¯ç”±äºé•¿æ—¶é—´çš„å¤šäººä¿®æ”¹ï¼Œç©¿æ’äº†ä¸šåŠ¡ä»£ç ï¼Œå¯¼è‡´ç°çŠ¶ç»´æŠ¤éš¾åº¦é«˜ï¼Œå¯è¯»æ€§å·®ï¼Œé€»è¾‘æ··ä¹±éš¾ä»¥æ¢³ç†ï¼Œæ‰€ä»¥åº”è¯¥é‡æ–°å°è£… <code>request.js</code>,å°† <code>ä¸šåŠ¡ä»£ç </code> æŠ½å–å‡ºæ¥ï¼Œå•ç‹¬ç»´æŠ¤ï¼Œ <code>request.js</code> åªè´Ÿè´£æä¾› <code>http</code> è¯·æ±‚ç›¸å…³åŠŸèƒ½ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> å¼€å‘æ—¥å¿— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯ä»£ç å®¡æŸ¥äº¤ä»˜è¯´æ˜åŠå®¡æŸ¥è®°å½•</title>
      <link href="2021/08/25/codeReview/"/>
      <url>2021/08/25/codeReview/</url>
      
        <content type="html"><![CDATA[<h2 id="å¯¹-Review-çš„è¯„è®ºè¿›è¡Œåˆ†çº§ï¼Œä¸åŒçº§åˆ«çš„ç»“æœæ‰“ä¸Šä¸åŒçš„-Tag"><a href="#å¯¹-Review-çš„è¯„è®ºè¿›è¡Œåˆ†çº§ï¼Œä¸åŒçº§åˆ«çš„ç»“æœæ‰“ä¸Šä¸åŒçš„-Tag" class="headerlink" title="å¯¹ Review çš„è¯„è®ºè¿›è¡Œåˆ†çº§ï¼Œä¸åŒçº§åˆ«çš„ç»“æœæ‰“ä¸Šä¸åŒçš„ Tag"></a>å¯¹ Review çš„è¯„è®ºè¿›è¡Œåˆ†çº§ï¼Œä¸åŒçº§åˆ«çš„ç»“æœæ‰“ä¸Šä¸åŒçš„ Tag</h2><ul><li><code>blocker</code>: è¡¨ç¤ºè¿™ä¸ªä»£ç è¡Œçš„é—®é¢˜å¿…é¡»è¦ä¿®æ”¹ï¼</li><li><code>optional</code>ï¼šè¡¨ç¤ºè¿™ä¸ªä»£ç è¡Œçš„é—®é¢˜å¯æ”¹å¯ä¸æ”¹ï¼</li><li><code>question</code>ï¼šè¡¨ç¤ºå¯¹è¿™ä¸ªä»£ç è¡Œä¸ç†è§£ï¼Œæœ‰é—®é¢˜éœ€è¦é—®ï¼Œè¢«å®¡æŸ¥è€…éœ€è¦é’ˆå¯¹é—®é¢˜è¿›è¡Œå›å¤æ¾„æ¸…ï¼</li></ul><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><blockquote><p>æ¯æ¬¡ä»£ç å®¡æŸ¥å®Œæˆå, ä»¥ç¤ºä¾‹ä¸­çš„å½¢å¼å‘é€åˆ°ç¾¤é‡Œè¿›è¡ŒåŒé¢‘æ±‡æŠ¥ã€‚<br>è‹±æ–‡ç¼©å†™:Â CMNT; ä¸­æ–‡å…¨ç§°:Â v. æ³¨é‡Š, è¯„è®º; è‹±æ–‡å…¨ç§°:Â Comment.<br>è‹±æ–‡ç¼©å†™:Â CVRï¼›ä¸­æ–‡å…¨ç§°:Â v. è¦†ç›–, æ¶‰åŠ, åŒ…å«ï¼›è‹±æ–‡å…¨ç§°:Â Cover .</p></blockquote><p>CR: [blocker]ã€å›¢é˜Ÿç®¡ç†ã€‘{ä¸šåŠ¡å‘˜ç®¡ç†}-ä¸šåŠ¡å‘˜ç»‘å®šå®¢æˆ·æ—¶ï¼Œå¢åŠ å®¢æˆ·æ ‡ç­¾ç­›é€‰<br>CMNT: æ¥å£è¯·æ±‚é‡å¤ï¼Œåœ¨äº§å“æ¨¡å—ä¸‹æœ‰ getProduct æ–¹æ³•ï¼Œä¸æ­¤æ¬¡æ–°å¢çš„ getProductList æ–¹æ³• æ³¨å†Œçš„æ¥å£æ˜¯ä¸€æ ·çš„.<br>CVR: [VBOM]<br>gbcloud-admin/src/views/dataCenter/components/PanelGroup.vue<br>gbcloud-admin/src/views/dataCenter/coupon/index.vue<br>gbcloud-admin/src/views/dataCenter/staffs/check.vue</p><h2 id="å®¡æŸ¥å†å²è®°å½•"><a href="#å®¡æŸ¥å†å²è®°å½•" class="headerlink" title="å®¡æŸ¥å†å²è®°å½•"></a>å®¡æŸ¥å†å²è®°å½•</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">2021-05-20</span><br><span class="line"></span><br><span class="line">CR: [question]ã€æ´»åŠ¨æ¨¡å—ã€‘ç¼–è¾‘æ´»åŠ¨é¢å‘å®¢æˆ·æ—¶å¢åŠ å¯¹ç­›é€‰ç»“æœå…¨éƒ¨é€‰ä¸­</span><br><span class="line">CMNT: å…¨éƒ¨é€‰ä¸­æ²¡æœ‰é—®é¢˜, ä½†æ˜¯å·²é€‰å®¢æˆ·æœ‰ç‚¹ç–‘é—®, ä¸ºä»€ä¹ˆé»˜è®¤æ˜¾ç¤ºæ•°é‡ä¸º1, åˆ‡æ¢åˆ°å·²é€‰å®¢æˆ·å´åˆæ²¡æœ‰æ•°æ®, éœ€è¦è¿›ä¸€æ­¥ç¡®è®¤æ˜¯å¦ä¸ºbug.</span><br><span class="line">CVR: [VBOR]</span><br><span class="line">Gbcloud&#x2F;gbcloud-admin&#x2F;src&#x2F;views&#x2F;activity&#x2F;components&#x2F;SelectCustomer.vue</span><br><span class="line"></span><br><span class="line">CR:ã€ä¼ä¸šç®¡ç†æ¨¡å—ã€‘ä¼ä¸šèµ„è´¨ä¼˜åŒ–ï¼šèµ„è´¨ç±»å‹ä¼˜åŒ–ã€ç”³è¯·å®¢å•†å…³ç³»ä¼˜åŒ–</span><br><span class="line">CMNT: ä¼ä¸šèµ„è´¨åˆ—è¡¨å·²æ›´æ¢ç‹¬ç«‹ç»„ä»¶ä½¿ç”¨å¹¶ç»´æŠ¤, æ²¡æœ‰é—®é¢˜.</span><br><span class="line">CVR: [VBOR]</span><br><span class="line">Gbcloud&#x2F;gbcloud-admin&#x2F;src&#x2F;views&#x2F;enterprise&#x2F;qualifications&#x2F;index</span><br><span class="line">Gbcloud&#x2F;gbcloud-admin&#x2F;src&#x2F;views&#x2F;enterprise&#x2F;basicInfo&#x2F;index</span><br><span class="line">Gbcloud&#x2F;gbcloud-admin&#x2F;src&#x2F;views&#x2F;login&#x2F;index</span><br><span class="line"></span><br><span class="line">CR: [optional]ã€å•†åŸã€‘ä¾›åº”å•†logoåŠ è½½åï¼Œåšç¼“å­˜å¤„ç†</span><br><span class="line">CMNT: static åœ¨ webpack é…ç½®äº†è·¯å¾„åˆ«åï¼Œurl(&#39;..&#x2F;..&#x2F;..&#x2F;..&#x2F;static&#x2F;images&#x2F;avatar.jpg&#39;); è¿™ç§è·¯å¾„å¯ä»¥ç›´æ¥å†™æˆ url(&#39;static&#x2F;images&#x2F;avatar.jpg&#39;); åœ¨banner.vueç»„ä»¶ 19è¡Œå¤„ï¼Œæ¯”è¾ƒis_open &#x3D;&#x3D; 0å¯èƒ½ä¼šå¯¼è‡´æ„å¤–çš„ç±»å‹å¼ºåˆ¶ï¼Œä½¿ç”¨ç±»å‹å®‰å…¨çš„ç­‰äºè¿ç®—ç¬¦&#x3D;&#x3D;&#x3D;å’Œï¼&#x3D;&#x3D;ä»£æ›¿å¸¸è§„çš„å¯¹ç­‰è¿ç®—ç¬¦&#x3D;&#x3D;å’Œ !&#x3D; è¢«è®¤ä¸ºæ˜¯ä¸€ç§å¥½ä¹ æƒ¯ã€‚</span><br><span class="line">CVR: [VBOQ]</span><br><span class="line">Gbcloud&#x2F;gbcloud-shop&#x2F;src&#x2F;components&#x2F;headers&#x2F;index.vue</span><br><span class="line">Gbcloud&#x2F;gbcloud-shop&#x2F;src&#x2F;views&#x2F;homePage&#x2F;components&#x2F;banner&#x2F;index.vue</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">2021-04-27</span><br><span class="line"></span><br><span class="line">CR: [optional]  ã€å‰ç«¯ã€‘ã€å•†åŸã€‘ä¾§è¾¹å·¥å…·æ UIä¼˜åŒ–</span><br><span class="line">CMNT: æ ·å¼å›ºå®šå•ä½æ¨èä½¿ç”¨åŒæ•°, æ— æ„ä¹‰çš„æ³¨é‡Šä»£ç æœ€å¥½åˆ é™¤æ‰ï¼Œå¦‚æœæœ‰ç”¨çš„ä»£ç æ³¨é‡Šåº”è¯¥å†™æ¸…æ¥šæ³¨é‡Šçš„ç›®çš„ï¼Œæ•´ä½“æ²¡æœ‰ä»€ä¹ˆå½±å“ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡å®¡æŸ¥ã€‚</span><br><span class="line">CVR: [VBOM]</span><br><span class="line">gbcloud-shop&#x2F;src&#x2F;components&#x2F;toolbar&#x2F;index.vueLine: 657</span><br><span class="line">gbcloud-shop&#x2F;src&#x2F;components&#x2F;toolbar&#x2F;index.vueLine: 40</span><br><span class="line">gbcloud-shop&#x2F;src&#x2F;components&#x2F;toolbar&#x2F;index.vueLine: 550</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CR: [optional]  ã€å‰ç«¯ã€‘ã€åå°-è®¢å•ç®¡ç†ã€‘è®¢å•è¯¦æƒ…æ–°å¢æ ‡ç­¾å±•ç¤º</span><br><span class="line">CMNT: </span><br><span class="line">å¯ä»¥é€‚å½“çš„ä½¿ç”¨ switch æ›¿ä»£ if elseï¼ˆæ•ˆç‡æ›´é«˜ï¼‰;</span><br><span class="line">å¤šä¸ªåŒæ ·çš„ä»£ç ç‰‡æ®µå‡ºç°åœ¨ä¸€ä¸ªé¡µé¢çš„æ—¶å€™å°±å¯ä»¥è€ƒè™‘æœ‰æ²¡æœ‰åŠæ³•ä¼˜åŒ–ï¼ˆè¿™ä¸ªæ¶‰åŠæ•´ä¸ªé¡µé¢çš„è®¾è®¡ï¼Œè·Ÿæœ¬æ¬¡å¢åŠ ä¸€ä¸ªæ ‡ç­¾çš„ä»»åŠ¡æ²¡æœ‰ç›´æ¥å…³ç³»ï¼‰;</span><br><span class="line">ä¸å˜çš„å˜é‡èµ‹å€¼ä¼˜å…ˆä½¿ç”¨ const å…³é”®å­—ï¼ˆconst  æ•ˆç‡ä¼˜äº letã€varï¼‰;</span><br><span class="line">For å¾ªç¯ä½“å†…çš„å˜é‡ä½¿ç”¨letï¼ˆæ›´åŠ å¥‘åˆå¾ªç¯ä½“åˆ¶ï¼‰;</span><br><span class="line">var è¦ä¹ˆä¸ç”¨ï¼Œè¦ä¹ˆå½“å…¨å±€å˜é‡ä½¿ç”¨ï¼ˆç°åœ¨å˜é‡æœ‰çš„å—çº§ä½œç”¨åŸŸï¼Œå·²ç»ä¸é€‚ç”¨varï¼Œlet constè¶³å¤Ÿåº”ä»˜æ‰€æœ‰çš„åœºæ™¯ï¼Œæ‰€ä»¥æ²¡å¿…è¦ä½¿ç”¨äº†ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CVR: [VBON]</span><br><span class="line">gbcloud-admin&#x2F;src&#x2F;views&#x2F;settings&#x2F;parameters&#x2F;valetOrder&#x2F;index.vue</span><br><span class="line">gbcloud-admin&#x2F;src&#x2F;views&#x2F;orderMg&#x2F;market&#x2F;details.vue</span><br><span class="line">gbcloud-admin&#x2F;src&#x2F;views&#x2F;orderMg&#x2F;market&#x2F;index.vue</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å¼€å‘æ—¥å¿— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åå¤§æ’åºç®—æ³•ä¹‹å†’æ³¡æ’åº</title>
      <link href="2021/08/24/BubbleSort/"/>
      <url>2021/08/24/BubbleSort/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯å†’æ³¡æ’åºï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å†’æ³¡æ’åºï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å†’æ³¡æ’åºï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å†’æ³¡æ’åºï¼Ÿ</h2><p>å†’æ³¡æ’åºçš„è‹±æ–‡åæ˜¯ <code>Bubble Sort</code>, æ˜¯ä¸€ç§æœ€åŸºç¡€çš„äº¤æ¢æ’åºã€‚å®ƒé‡å¤åœ°èµ°è®¿è¿‡è¦æ’åºçš„å…ƒç´ åˆ—ï¼Œä¾æ¬¡æ¯”è¾ƒä¸¤ä¸ªç›¸é‚»çš„å…ƒç´ ï¼Œå¦‚æœé¡ºåºé”™è¯¯å°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚èµ°è®¿å…ƒç´ çš„å·¥ä½œæ˜¯é‡å¤åœ°è¿›è¡Œç›´åˆ°æ²¡æœ‰ç›¸é‚»å…ƒç´ éœ€è¦äº¤æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥å…ƒç´ åˆ—å·²ç»æ’åºå®Œæˆã€‚<br>è¿™ä¸ªç®—æ³•çš„åå­—ç”±æ¥æ˜¯å› ä¸ºè¶Šå°çš„å…ƒç´ ä¼šç»ç”±äº¤æ¢æ…¢æ…¢ <code>æµ®</code> åˆ°æ•°åˆ—çš„é¡¶ç«¯ï¼ˆå‡åºæˆ–é™åºæ’åˆ—ï¼‰, å°±å¦‚åŒç¢³é…¸é¥®æ–™ä¸­äºŒæ°§åŒ–ç¢³çš„æ°”æ³¡æœ€ç»ˆä¼šä¸Šæµ®åˆ°é¡¶ç«¯ä¸€æ ·ï¼Œæ•…å <code>å†’æ³¡æ’åº</code>ã€‚</p><h2 id="ç®—æ³•åŸç†"><a href="#ç®—æ³•åŸç†" class="headerlink" title="ç®—æ³•åŸç†"></a>ç®—æ³•åŸç†</h2><ol><li>æ¯”è¾ƒä¸¤ä¸ªç›¸é‚»çš„å…ƒç´ ï¼Œå°†å€¼å¤§ï¼ˆæˆ–å°ï¼Œæ ¹æ®å‡åºè¿˜æ˜¯é™åºå†³å®šï¼‰çš„å…ƒç´ äº¤æ¢åˆ°å³è¾¹ï¼Œå¦‚æœé‡åˆ°ç›¸ç­‰çš„å€¼ä¸è¿›è¡Œäº¤æ¢ã€‚</li><li>å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ åšåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ã€‚åœ¨è¿™ä¸€ç‚¹ï¼Œæœ€åçš„å…ƒç´ åº”è¯¥ä¼šæ˜¯æœ€å¤§çš„æ•°ï¼ˆé™åºåˆ™æ˜¯æœ€å°çš„æ•°ï¼‰ã€‚</li><li>é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªã€‚</li><li>æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚</li></ol><h2 id="åˆ†ææ€è·¯"><a href="#åˆ†ææ€è·¯" class="headerlink" title="åˆ†ææ€è·¯"></a>åˆ†ææ€è·¯</h2><ol><li>æ¯”è¾ƒè½®æ•°, æ˜¯æ•°ç»„çš„é•¿åº¦å‡ 1, å› ä¸ºæœ€åä¸€è½®åªæœ‰ä¸€ä¸ªå…ƒç´ , æ¯ä¸€è½®å†³å®šä¸€ä¸ªå·²æ’åºåºåˆ—</li><li>æ¯ä¸€è½®çš„æ¯”è¾ƒæ¬¡æ•°, æ˜¯æ•°ç»„é•¿åº¦å‡ 1, å› ä¸ºæœ€åä¸€ä¸ªå…ƒç´ ä¸éœ€è¦åšæ¯”è¾ƒ, æ¯ä¸€æ¬¡æ¯”è¾ƒå†³å®šæ˜¯å¦æ›´æ¢ä½ç½®</li><li>æ¯”è¾ƒç»“æœï¼Œä»¥å‡åºæ’åºä¸ºä¾‹ï¼Œä¾æ¬¡æ¯”è¾ƒç›¸é‚»çš„ä¸¤ä¸ªæ•°ï¼Œå°†æ¯”è¾ƒå°çš„æ•°æ”¾åœ¨å‰é¢ï¼Œæ¯”è¾ƒå¤§çš„æ•°æ”¾åœ¨åé¢ï¼Œé™åºåˆ™ç›¸åã€‚</li></ol><h2 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h2><p>æ•°ç»„ [3, 2, 4, 9, 1, 5, 7, 6, 8], é•¿åº¦ä¸º 9ï¼Œåˆ™éœ€è¦è¿›è¡Œ 8 è½®æ¯”è¾ƒï¼Œæ¯ä¸€è½®åˆéœ€è¦è¿›è¡Œ 8 æ¬¡æ¯”è¾ƒï¼Œæ¯ä¸€è½®çš„ 8 æ¬¡æ¯”è¾ƒå®Œä¹‹åå°†å†³å®šä¸€ä¸ªæœ«å°¾æ•°å­—æ˜¯å¤šå°‘ã€‚</p><p>ä»¥å‡åºä¸ºä¾‹: </p><p>ç¬¬ä¸€è½® ç¬¬ 1 æ¬¡æ¯”è¾ƒï¼Œ3 è·Ÿ 2 æ¯”è¾ƒ, 3 æ¯” 2 å¤§, æ‰€ä»¥å°† 3 è·Ÿ 2 äº¤æ¢ä½ç½®ï¼Œ<br>[<code>3</code>, <code>2</code>, 4, 9, 1, 5, 7, 6, 8] å˜æ›´ä¸º [2, 3, 4, 9, 1, 5, 7, 6, 8]</p><p>ç¬¬ä¸€è½® ç¬¬ 2 æ¬¡æ¯”è¾ƒï¼Œ3 è·Ÿ 4 æ¯”è¾ƒ, 4 æ¯” 3 å¤§, æ‰€ä»¥ä½ç½®ä¸å˜ï¼Œ<br>[2, <code>3</code>, <code>4</code>, 9, 1, 5, 7, 6, 8] ä¾ç„¶è¿˜æ˜¯ [2, 3, 4, 9, 1, 5, 7, 6, 8]</p><p>ç¬¬ä¸€è½® ç¬¬ 3 æ¬¡æ¯”è¾ƒï¼Œ4 è·Ÿ 9 æ¯”è¾ƒ, 9 æ¯” 4 å¤§, æ‰€ä»¥ä½ç½®ä¸å˜ï¼Œ<br>[2, 3, <code>4</code>, <code>9</code>, 1, 5, 7, 6, 8] ä¾ç„¶è¿˜æ˜¯ [2, 3, 4, 9, 1, 5, 7, 6, 8]</p><p>ç¬¬ä¸€è½® ç¬¬ 4 æ¬¡æ¯”è¾ƒï¼Œ9 è·Ÿ 1 æ¯”è¾ƒ, 9 æ¯” 1 å¤§, æ‰€ä»¥å°† 9 è·Ÿ 1 äº¤æ¢ä½ç½®ï¼Œ<br>[2, 3, 4, <code>9</code>, <code>1</code>, 5, 7, 6, 8] æ•°ç»„å˜æ›´ä¸º [2, 3, 4, 1, 9, 5, 7, 6, 8]</p><p>ç¬¬ä¸€è½® ç¬¬ 5 æ¬¡æ¯”è¾ƒï¼Œ9 è·Ÿ 5 æ¯”è¾ƒ, 9 æ¯” 5 å¤§, æ‰€ä»¥å°† 9 è·Ÿ 5 äº¤æ¢ä½ç½®ï¼Œ<br>[2, 3, 4, 1, <code>9</code>, <code>5</code>, 7, 6, 8] æ•°ç»„å˜æ›´ä¸º [2, 3, 4, 1, 5, 9, 7, 6, 8]</p><p>ç¬¬ä¸€è½® ç¬¬ 6 æ¬¡æ¯”è¾ƒï¼Œ9 è·Ÿ 7 æ¯”è¾ƒ, 9 æ¯” 7 å¤§, æ‰€ä»¥å°† 9 è·Ÿ 7 äº¤æ¢ä½ç½®ï¼Œ<br>[2, 3, 4, 1, 5, <code>9</code>, <code>7</code>, 6, 8] æ•°ç»„å˜æ›´ä¸º [2, 3, 4, 1, 5, 7, 9, 6, 8]</p><p>ç¬¬ä¸€è½® ç¬¬ 7 æ¬¡æ¯”è¾ƒï¼Œ9 è·Ÿ 6 æ¯”è¾ƒ, 9 æ¯” 6 å¤§, æ‰€ä»¥å°† 9 è·Ÿ 6 äº¤æ¢ä½ç½®ï¼Œ<br>[2, 3, 4, 1, 5, 7, <code>9</code>, <code>6</code>, 8] æ•°ç»„å˜æ›´ä¸º [2, 3, 4, 1, 5, 7, 6, 9, 8]</p><p>ç¬¬ä¸€è½® ç¬¬ 8 æ¬¡æ¯”è¾ƒï¼Œ9 è·Ÿ 8 æ¯”è¾ƒ, 9 æ¯” 8 å¤§, æ‰€ä»¥å°† 9 è·Ÿ 8 äº¤æ¢ä½ç½®ï¼Œ<br>[2, 3, 4, 1, 5, 7, 6, <code>9</code>, <code>8</code>] æ•°ç»„å˜æ›´ä¸º [2, 3, 4, 1, 5, 7, 6, 8, 9]</p><p>ä¸€è½®ç»“æŸï¼Œæœ€åä¸€ä½æ•°å­—ç¡®å®šå°±æ˜¯ <code>9</code> æ˜¯æœ€å¤§çš„ï¼Œç„¶åå¼€å¯ç¬¬äºŒè½®çš„æ¯”è¾ƒï¼Œé‡å¤ä¸Šé¢æ­¥éª¤ï¼Œæ‰¾å‡ºæœ«ä½æœ€å¤§æ•°å­—ï¼Œç›´åˆ°ç¬¬ 8 è½®ç»“æŸï¼Œåé¢8ä½æ•°å­—éƒ½æ’å‡ºæ¥ä¹‹åï¼Œå‰©ä¸‹åœ¨ç¬¬ä¸€ä½çš„æ•°å­—è‡ªç„¶å°±æ˜¯æœ€å°çš„ã€‚</p><h2 id="å›¾è§£"><a href="#å›¾è§£" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h2><p>ä¸‹é¢ä¸¾ä¾‹åŠ¨å›¾æ¼”ç¤ºç¬¬ä¸€è½®çš„æ¯”è¾ƒè¿‡ç¨‹<br><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210825163216.gif"></p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@title  </span>å†’æ³¡æ’åº</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@auhor  </span>Liu Kun</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@date   </span>2021/08/24</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param  </span>array éœ€è¦åšæ’åºçš„æºæ•°ç»„</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param  </span>sort æ’åºæ–¹å¼ true = å‡åº  false = é™åºï¼Œé»˜è®¤å‡åº</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@return </span>æ’åºä¹‹åçš„æ•°ç»„</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubbleSort</span> (<span class="params">array, sort = <span class="literal">true</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> length = array.length</span><br><span class="line">    <span class="comment">// æ¯ä¸€è½®æ¯”è¾ƒ</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length - <span class="number">1</span>; i ++) &#123;</span><br><span class="line">        <span class="comment">// æ¯ä¸€æ¬¡æ¯”è¾ƒ</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; length - <span class="number">1</span>; j++) &#123;</span><br><span class="line">            <span class="comment">// æ ¹æ®å‚æ•°åˆ¤æ–­æ˜¯åšå‡åºæ¯”è¾ƒè¿˜æ˜¯é™åºæ¯”è¾ƒ</span></span><br><span class="line">            <span class="keyword">const</span> compare = sort ? array[j] &gt; array[j + <span class="number">1</span>] : array[j] &lt; array[j + <span class="number">1</span>]</span><br><span class="line">            <span class="comment">// æ¯”è¾ƒä¹‹åå†³å®šæ˜¯å¦è¦äº¤æ¢ä½ç½®, è¿™é‡Œç”¨åˆ° ES 6 è§£æ„è¯­æ³• äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼</span></span><br><span class="line">            <span class="keyword">if</span> (compare) [array[j], array[j + <span class="number">1</span>]] = [array[j+ <span class="number">1</span>], array[j]]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> array</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> array = [<span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">8</span>];</span><br><span class="line">bubbleSort(array, <span class="literal">true</span>)       <span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br><span class="line">bubbleSort(array, <span class="literal">false</span>)      <span class="comment">// [9, 8, 7, 6, 5, 4, 3, 2, 1]</span></span><br></pre></td></tr></table></figure><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><p>ä½¿ç”¨æœ€ç®€å•ï¼Œé€‚ç”¨äºæ•°æ®é‡å¾ˆå°çš„æ’åºåœºæ™¯ï¼Œç”±äºæ•°æ®ç§»åŠ¨æ¬¡æ•°è¾ƒå¤šï¼Œä¸é€‚ç”¨äºæ•°æ®é‡å¾ˆå¤§çš„æ’åºåœºæ™¯ã€‚</p><h2 id="ç®—æ³•ç¨³å®šæ€§"><a href="#ç®—æ³•ç¨³å®šæ€§" class="headerlink" title="ç®—æ³•ç¨³å®šæ€§"></a>ç®—æ³•ç¨³å®šæ€§</h2><p>å†’æ³¡æ’åºå°±æ˜¯æŠŠå°ï¼ˆå¤§ï¼‰çš„å…ƒç´ å¾€å‰è°ƒæˆ–è€…æŠŠå¤§ï¼ˆå°ï¼‰çš„å…ƒç´ å¾€åè°ƒã€‚æ¯”è¾ƒæ˜¯ç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ æ¯”è¾ƒï¼Œäº¤æ¢ä¹Ÿå‘ç”Ÿåœ¨è¿™ä¸¤ä¸ªå…ƒç´ ä¹‹é—´ã€‚æ‰€ä»¥ï¼Œå¦‚æœä¸¤ä¸ªå…ƒç´ ç›¸ç­‰ï¼Œæ˜¯ä¸ä¼šå†äº¤æ¢çš„ï¼›å¦‚æœä¸¤ä¸ªç›¸ç­‰çš„å…ƒç´ æ²¡æœ‰ç›¸é‚»ï¼Œé‚£ä¹ˆå³ä½¿é€šè¿‡å‰é¢çš„ä¸¤ä¸¤äº¤æ¢æŠŠä¸¤ä¸ªç›¸é‚»èµ·æ¥ï¼Œè¿™æ—¶å€™ä¹Ÿä¸ä¼šäº¤æ¢ï¼Œæ‰€ä»¥ç›¸åŒå…ƒç´ çš„å‰åé¡ºåºå¹¶æ²¡æœ‰æ”¹å˜ï¼Œæ‰€ä»¥å†’æ³¡æ’åºæ˜¯ä¸€ç§ç¨³å®šæ’åºç®—æ³•ã€‚</p><h2 id="ä½•ä¸ºç¨³å®šæ’åº"><a href="#ä½•ä¸ºç¨³å®šæ’åº" class="headerlink" title="ä½•ä¸ºç¨³å®šæ’åº"></a>ä½•ä¸ºç¨³å®šæ’åº</h2><p>å¾…æ’åºçš„è®°å½•åºåˆ—ä¸­å¯èƒ½å­˜åœ¨ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šå…³é”®å­—ç›¸ç­‰çš„è®°å½•ã€‚æ’åºå‰çš„åºåˆ—ä¸­ <code>Ri</code> é¢†å…ˆäº <code>Rj</code>ï¼ˆå³ <code>i</code> &lt; <code>j</code>ï¼‰.è‹¥åœ¨æ’åºåçš„åºåˆ—ä¸­ <code>Ri</code> ä»ç„¶é¢†å…ˆäº <code>Rj</code>ï¼Œåˆ™ç§°æ‰€ç”¨çš„æ–¹æ³•æ˜¯ç¨³å®šçš„ã€‚æ¯”å¦‚æ•°ç»„ <code>[1,1,1,6,4]</code> ä¸­ <code>a[0]</code>, <code>a[1]</code>, <code>a[2]</code> çš„å€¼ç›¸ç­‰ï¼Œåœ¨æ’åºæ—¶ä¸æ”¹å˜å…¶åºåˆ—ï¼Œåˆ™ç§°æ‰€ç”¨çš„æ–¹æ³•æ˜¯ç¨³å®šçš„ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> ES6 </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹æ¨¡å¼</title>
      <link href="2021/08/23/Singleton/"/>
      <url>2021/08/23/Singleton/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼"><a href="#ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼"></a>ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼</h2><p>å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå…¶å®šä¹‰æ˜¯å•ä¾‹å¯¹è±¡çš„ç±»åªèƒ½å…è®¸ä¸€ä¸ªå®ä¾‹å­˜åœ¨ã€‚</p><h2 id="å•ä¾‹æ¨¡å¼å®ç°æ€è·¯"><a href="#å•ä¾‹æ¨¡å¼å®ç°æ€è·¯" class="headerlink" title="å•ä¾‹æ¨¡å¼å®ç°æ€è·¯"></a>å•ä¾‹æ¨¡å¼å®ç°æ€è·¯</h2><p>å•ä¾‹çš„å®ç°ä¸»è¦æ˜¯é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š</p><ol><li><p>å°†è¯¥ç±»çš„ <code>æ„é€ æ–¹æ³•</code> å®šä¹‰ä¸º <code>ç§æœ‰æ–¹æ³•</code>ï¼Œè¿™æ ·å…¶ä»–å¤„çš„ä»£ç å°± <code>æ— æ³•é€šè¿‡è°ƒç”¨è¯¥ç±»çš„æ„é€ æ–¹æ³•æ¥å®ä¾‹åŒ–è¯¥ç±»çš„å¯¹è±¡</code>ï¼Œåªæœ‰é€šè¿‡è¯¥ç±»æä¾›çš„é™æ€æ–¹æ³•æ¥å¾—åˆ°è¯¥ç±»çš„å”¯ä¸€å®ä¾‹ï¼›</p></li><li><p>åœ¨è¯¥ç±»å†…æä¾›ä¸€ä¸ª <code>é™æ€æ–¹æ³•</code>ï¼Œå½“æˆ‘ä»¬è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œå¦‚æœç±»æŒæœ‰çš„å¼•ç”¨ä¸ä¸ºç©ºå°±è¿”å›è¿™ä¸ªå¼•ç”¨ï¼Œå¦‚æœç±»ä¿æŒçš„å¼•ç”¨ä¸ºç©ºå°±åˆ›å»ºè¯¥ç±»çš„å®ä¾‹å¹¶å°†å®ä¾‹çš„å¼•ç”¨èµ‹äºˆè¯¥ç±»ä¿æŒçš„å¼•ç”¨ã€‚</p></li></ol><h2 id="å•ä¾‹æ¨¡å¼ä¸‰è¦ç´ "><a href="#å•ä¾‹æ¨¡å¼ä¸‰è¦ç´ " class="headerlink" title="å•ä¾‹æ¨¡å¼ä¸‰è¦ç´ "></a>å•ä¾‹æ¨¡å¼ä¸‰è¦ç´ </h2><ol><li>ç§æœ‰æ„é€ æ–¹æ³•</li><li>ç§æœ‰é™æ€å¼•ç”¨æŒ‡å‘è‡ªå·±å®ä¾‹</li><li>ä»¥è‡ªå·±å®ä¾‹ä¸ºè¿”å›å€¼çš„å…¬æœ‰é™æ€æ–¹æ³•</li></ol><h2 id="å•ä¾‹æ¨¡å¼è®¾è®¡åŸåˆ™"><a href="#å•ä¾‹æ¨¡å¼è®¾è®¡åŸåˆ™" class="headerlink" title="å•ä¾‹æ¨¡å¼è®¾è®¡åŸåˆ™"></a>å•ä¾‹æ¨¡å¼è®¾è®¡åŸåˆ™</h2><p>ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œè‡ªè¡Œå®ä¾‹åŒ–å¹¶å‘ç³»ç»Ÿæä¾›è¿™ä¸ªå®ä¾‹</p><h2 id="å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰ç±»å›¾"><a href="#å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰ç±»å›¾" class="headerlink" title="å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰ç±»å›¾"></a>å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰ç±»å›¾</h2><p><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="188" height="132"><defs/><g><text fill="#eeeeee" stroke="none" font-family="Arial" font-size="24px" font-style="normal" font-weight="normal" text-decoration="none" x="0" y="0">UNREGISTERED</text><text fill="#eeeeee" stroke="none" font-family="Arial" font-size="24px" font-style="normal" font-weight="normal" text-decoration="none" x="0" y="30">UNREGISTERED</text><text fill="#eeeeee" stroke="none" font-family="Arial" font-size="24px" font-style="normal" font-weight="normal" text-decoration="none" x="0" y="60">UNREGISTERED</text><text fill="#eeeeee" stroke="none" font-family="Arial" font-size="24px" font-style="normal" font-weight="normal" text-decoration="none" x="0" y="90">UNREGISTERED</text><text fill="#eeeeee" stroke="none" font-family="Arial" font-size="24px" font-style="normal" font-weight="normal" text-decoration="none" x="0" y="120">UNREGISTERED</text><g transform="translate(-70,-926) scale(1,1)"><rect fill="#C0C0C0" stroke="none" x="87" y="943" width="168" height="112" opacity="0.2"/></g><g transform="translate(-70,-926) scale(1,1)"><rect fill="#ffffff" stroke="none" x="80" y="936" width="168" height="112"/></g><g transform="translate(-70,-926) scale(1,1)"><path fill="none" stroke="#000000" d="M 80 936 L 248 936 L 248 1048 L 80 1048 L 80 936 Z Z" stroke-miterlimit="10"/></g><g transform="translate(-70,-926) scale(1,1)"><path fill="none" stroke="#000000" d="M 80 961 L 248 961" stroke-miterlimit="10"/></g><g transform="translate(-70,-926) scale(1,1)"><path fill="none" stroke="#000000" d="M 80 984 L 248 984" stroke-miterlimit="10"/></g><g transform="translate(-70,-926) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="bold" text-decoration="none" x="136.8955078125" y="955.5">Singleton</text></g></g><g transform="translate(-70,-926) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="85" y="978.5">-instance: Singleton</text><path fill="none" stroke="#000000" d="M 85 978.5 L 199.181640625 978.5" stroke-miterlimit="10"/></g></g><g transform="translate(-70,-926) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="85" y="1001.5">-constructor()</text></g></g><g transform="translate(-70,-926) scale(1,1)"><g><path fill="none" stroke="none"/><text fill="#000000" stroke="none" font-family="Arial" font-size="13px" font-style="normal" font-weight="normal" text-decoration="none" x="85" y="1016.5">+getInstance(): Singleton</text><path fill="none" stroke="#000000" d="M 85 1016.5 L 229.89794921875 1016.5" stroke-miterlimit="10"/></g></g></g></svg></p><h2 id="å…·ä½“ä»£ç å®ç°"><a href="#å…·ä½“ä»£ç å®ç°" class="headerlink" title="å…·ä½“ä»£ç å®ç°"></a>å…·ä½“ä»£ç å®ç°</h2><blockquote><p>ä»£ç æ¼”ç¤ºéƒ¨åˆ†ä¸º TypeScript è¯­æ³•</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// static é™æ€çš„ï¼Œå­˜æ”¾åœ¨ç±»ä¸Šçš„ï¼Œè€Œä¸æ˜¯åœ¨å®ä¾‹ä¸Š</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> instance: Singleton</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="title">getInstance</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">this</span>.instance) &#123;</span><br><span class="line">            <span class="built_in">this</span>.instance = <span class="keyword">new</span> Singleton()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.instance</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> singleton = Singleton.getInstance()     <span class="comment">// æ— è®ºè°ƒç”¨å¤šå°‘æ¬¡ getInstance éƒ½åªä¼š new ä¸€æ¬¡</span></span><br></pre></td></tr></table></figure><h2 id="å•ä¾‹æ¨¡å¼çš„ä¼˜ç‚¹ï¼š"><a href="#å•ä¾‹æ¨¡å¼çš„ä¼˜ç‚¹ï¼š" class="headerlink" title="å•ä¾‹æ¨¡å¼çš„ä¼˜ç‚¹ï¼š"></a>å•ä¾‹æ¨¡å¼çš„ä¼˜ç‚¹ï¼š</h2><ol><li>åœ¨å•ä¾‹æ¨¡å¼ä¸­ï¼Œæ´»åŠ¨çš„å•ä¾‹åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¯¹å•ä¾‹ç±»çš„æ‰€æœ‰å®ä¾‹åŒ–å¾—åˆ°çš„éƒ½æ˜¯ç›¸åŒçš„ä¸€ä¸ªå®ä¾‹ã€‚è¿™æ ·å°± é˜²æ­¢å…¶å®ƒå¯¹è±¡å¯¹è‡ªå·±çš„å®ä¾‹åŒ–ï¼Œç¡®ä¿æ‰€æœ‰çš„å¯¹è±¡éƒ½è®¿é—®ä¸€ä¸ªå®ä¾‹</li><li>å•ä¾‹æ¨¡å¼å…·æœ‰ä¸€å®šçš„ä¼¸ç¼©æ€§ï¼Œç±»è‡ªå·±æ¥æ§åˆ¶å®ä¾‹åŒ–è¿›ç¨‹ï¼Œç±»å°±åœ¨æ”¹å˜å®ä¾‹åŒ–è¿›ç¨‹ä¸Šæœ‰ç›¸åº”çš„ä¼¸ç¼©æ€§ã€‚</li><li>æä¾›äº†å¯¹å”¯ä¸€å®ä¾‹çš„å—æ§è®¿é—®ã€‚</li><li>ç”±äºåœ¨ç³»ç»Ÿå†…å­˜ä¸­åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤å¯ä»¥ èŠ‚çº¦ç³»ç»Ÿèµ„æºï¼Œå½“ éœ€è¦é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çš„å¯¹è±¡æ—¶å•ä¾‹æ¨¡å¼æ— ç–‘å¯ä»¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½ã€‚</li><li>å…è®¸å¯å˜æ•°ç›®çš„å®ä¾‹ã€‚</li><li>é¿å…å¯¹å…±äº«èµ„æºçš„å¤šé‡å ç”¨ã€‚</li></ol><h2 id="å•ä¾‹æ¨¡å¼çš„ç¼ºç‚¹ï¼š"><a href="#å•ä¾‹æ¨¡å¼çš„ç¼ºç‚¹ï¼š" class="headerlink" title="å•ä¾‹æ¨¡å¼çš„ç¼ºç‚¹ï¼š"></a>å•ä¾‹æ¨¡å¼çš„ç¼ºç‚¹ï¼š</h2><ol><li>ä¸é€‚ç”¨äºå˜åŒ–çš„å¯¹è±¡ï¼Œå¦‚æœåŒä¸€ç±»å‹çš„å¯¹è±¡æ€»æ˜¯è¦åœ¨ä¸åŒçš„ç”¨ä¾‹åœºæ™¯å‘ç”Ÿå˜åŒ–ï¼Œå•ä¾‹å°±ä¼šå¼•èµ·æ•°æ®çš„é”™è¯¯ï¼Œä¸èƒ½ä¿å­˜å½¼æ­¤çš„çŠ¶æ€ã€‚ </li><li>ç”±äºå•åˆ©æ¨¡å¼ä¸­æ²¡æœ‰æŠ½è±¡å±‚ï¼Œå› æ­¤å•ä¾‹ç±»çš„æ‰©å±•æœ‰å¾ˆå¤§çš„å›°éš¾ã€‚ </li><li>å•ä¾‹ç±»çš„èŒè´£è¿‡é‡ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šè¿èƒŒäº†â€œå•ä¸€èŒè´£åŸåˆ™â€ã€‚ </li><li>æ»¥ç”¨å•ä¾‹å°†å¸¦æ¥ä¸€äº›è´Ÿé¢é—®é¢˜ï¼Œå¦‚ä¸ºäº†èŠ‚çœèµ„æºå°†æ•°æ®åº“è¿æ¥æ± å¯¹è±¡è®¾è®¡ä¸ºçš„å•ä¾‹ç±»ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…±äº«è¿æ¥æ± å¯¹è±¡çš„ç¨‹åºè¿‡å¤šè€Œå‡ºç°è¿æ¥æ± æº¢å‡ºï¼›å¦‚æœå®ä¾‹åŒ–çš„å¯¹è±¡é•¿æ—¶é—´ä¸è¢«åˆ©ç”¨ï¼Œç³»ç»Ÿä¼šè®¤ä¸ºæ˜¯åƒåœ¾è€Œè¢«å›æ”¶ï¼Œè¿™å°†å¯¼è‡´å¯¹è±¡çŠ¶æ€çš„ä¸¢å¤±ã€‚ </li></ol><h2 id="å•ä¾‹æ¨¡å¼é€‚ç”¨åœºæ™¯"><a href="#å•ä¾‹æ¨¡å¼é€‚ç”¨åœºæ™¯" class="headerlink" title="å•ä¾‹æ¨¡å¼é€‚ç”¨åœºæ™¯"></a>å•ä¾‹æ¨¡å¼é€‚ç”¨åœºæ™¯</h2><p>å•ä¾‹æ¨¡å¼åªå…è®¸åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤èŠ‚çœå†…å­˜ï¼ŒåŠ å¿«å¯¹è±¡è®¿é—®é€Ÿåº¦ï¼Œå› æ­¤å¯¹è±¡éœ€è¦è¢«å…¬ç”¨çš„åœºåˆé€‚åˆä½¿ç”¨ï¼Œå¦‚å¤šä¸ªæ¨¡å—ä½¿ç”¨åŒä¸€ä¸ªæ•°æ®æºè¿æ¥å¯¹è±¡ç­‰ç­‰ã€‚å¦‚ï¼š</p><ol><li>éœ€è¦é¢‘ç¹å®ä¾‹åŒ–ç„¶åé”€æ¯çš„å¯¹è±¡ã€‚</li><li>åˆ›å»ºå¯¹è±¡æ—¶è€—æ—¶è¿‡å¤šæˆ–è€…è€—èµ„æºè¿‡å¤šï¼Œä½†åˆç»å¸¸ç”¨åˆ°çš„å¯¹è±¡ã€‚</li><li>æœ‰çŠ¶æ€çš„å·¥å…·ç±»å¯¹è±¡ã€‚</li><li>é¢‘ç¹è®¿é—®æ•°æ®åº“æˆ–æ–‡ä»¶çš„å¯¹è±¡ã€‚ </li></ol><h2 id="å•ä¾‹æ¨¡å¼åˆ†ç±»ï¼š"><a href="#å•ä¾‹æ¨¡å¼åˆ†ç±»ï¼š" class="headerlink" title="å•ä¾‹æ¨¡å¼åˆ†ç±»ï¼š"></a>å•ä¾‹æ¨¡å¼åˆ†ç±»ï¼š</h2><ol><li>é¥¿å•ä¾‹æ¨¡å¼ï¼ˆç±»åŠ è½½æ—¶å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ç»™è‡ªå·±çš„å¼•ç”¨ï¼‰</li><li>æ‡’å•ä¾‹æ¨¡å¼ï¼ˆè°ƒç”¨å–å¾—å®ä¾‹çš„æ–¹æ³•å¦‚ getInstance æ—¶æ‰ä¼šå®ä¾‹åŒ–å¯¹è±¡ï¼‰</li></ol><h2 id="å•ä¾‹æ¨¡å¼ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š"><a href="#å•ä¾‹æ¨¡å¼ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="å•ä¾‹æ¨¡å¼ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š"></a>å•ä¾‹æ¨¡å¼ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š</h2><ol><li>ä½¿ç”¨æ—¶ä¸èƒ½ç”¨åå°„æ¨¡å¼åˆ›å»ºå•ä¾‹ï¼Œå¦åˆ™ä¼šå®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„å¯¹è±¡</li><li>ä½¿ç”¨æ‡’å•ä¾‹æ¨¡å¼æ—¶æ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜</li><li>é¥¿å•ä¾‹æ¨¡å¼å’Œæ‡’å•ä¾‹æ¨¡å¼æ„é€ æ–¹æ³•éƒ½æ˜¯ç§æœ‰çš„ï¼Œå› è€Œæ˜¯ä¸èƒ½è¢«ç»§æ‰¿çš„ï¼Œæœ‰äº›å•ä¾‹æ¨¡å¼å¯ä»¥è¢«ç»§æ‰¿ï¼ˆå¦‚ç™»è®°å¼æ¨¡å¼ï¼‰ </li></ol><h2 id="éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š"><a href="#éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š" class="headerlink" title="éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š"></a>éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š</h2><p>å•ä¾‹æ¨¡å¼åœ¨å¤šçº¿ç¨‹çš„åœºåˆä¸‹å¿…é¡»å°å¿ƒä½¿ç”¨ã€‚å¦‚æœå½“å”¯ä¸€å®ä¾‹å°šæœªåˆ›å»ºæ—¶ï¼Œæœ‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨åˆ›å»ºæ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒä»¬åŒæ—¶æ²¡æœ‰æ£€æµ‹åˆ°å”¯ä¸€å®ä¾‹çš„å­˜åœ¨ï¼Œä»è€ŒåŒæ—¶å„è‡ªåˆ›å»ºäº†ä¸€ä¸ªå®ä¾‹ï¼Œ è¿™æ ·å°±æœ‰ä¸¤ä¸ªå®ä¾‹è¢«æ„é€ å‡ºæ¥ï¼Œä»è€Œè¿åäº†å•ä¾‹æ¨¡å¼ä¸­å®ä¾‹å”¯ä¸€çš„åŸåˆ™ã€‚ è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•æ˜¯ä¸ºæŒ‡ç¤ºç±»æ˜¯å¦å·²ç»å®ä¾‹åŒ–çš„å˜é‡æä¾›ä¸€ä¸ªäº’æ–¥é”(è™½ç„¶è¿™æ ·ä¼šé™ä½æ•ˆç‡)ã€‚ </p>]]></content>
      
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue js é«˜é˜¶æŠ€å·§æŒ‡å—ï¼ˆæŒç»­æ›´æ–°ï¼‰</title>
      <link href="2021/06/29/vuejs/"/>
      <url>2021/06/29/vuejs/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç°åœ¨ï¼ŒVue.js å·²æˆä¸ºå‰ç«¯å¼€å‘çš„çƒ­é—¨æ¡†æ¶ã€‚æœ‰å¾ˆå¤šå·¥ç¨‹å¸ˆåˆ©ç”¨ Vue.js çš„ä¾¿åˆ©æ€§å’Œå¼ºå¤§åŠŸèƒ½ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å®Œæˆçš„æŸäº›è§£å†³æ–¹æ¡ˆå¯èƒ½æœªéµå¾ªæœ€ä½³åšæ³•ã€‚ä»Šå¤©æœ¬æ–‡å°±ç›˜ç‚¹ä¸€ä¸‹é‚£äº›é²œä¸ºäººçŸ¥çš„ Vue æŠ€æœ¯ã€‚</p></blockquote><h1 id="è·¯ç”±å™¨å‚æ•°è§£è€¦"><a href="#è·¯ç”±å™¨å‚æ•°è§£è€¦" class="headerlink" title="è·¯ç”±å™¨å‚æ•°è§£è€¦"></a>è·¯ç”±å™¨å‚æ•°è§£è€¦</h1><p>ç›¸ä¿¡è¿™æ˜¯å¤§å¤šæ•°äººå¤„ç†ç»„ä»¶ä¸­è·¯ç”±å‚æ•°çš„æ–¹å¼:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="function"><span class="title">getRouteParamsId</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.$route.query.id</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨ <code>$route</code> ä¼šå¯¹æŸä¸ª <code>URL</code> äº§ç”Ÿå¼ºè€¦åˆï¼Œè¿™é™åˆ¶äº†ç»„ä»¶çš„çµæ´»æ€§ã€‚</p><p>æ­£ç¡®çš„è§£å†³æ–¹æ¡ˆæ˜¯å‘è·¯ç”±å™¨æ·»åŠ  <code>props</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·¯ç”±é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">    routes: [&#123;</span><br><span class="line">        path: <span class="string">&#x27;/:id&#x27;</span>,</span><br><span class="line">        component: Component,</span><br><span class="line">        props: <span class="literal">true</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œç»„ä»¶å¯ä»¥ç›´æ¥ä» <code>props</code> è·å– <code>id</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    props: [<span class="string">&#x27;id&#x27;</span>],</span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="function"><span class="title">getParamsId</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.id</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥ä¼ å…¥å‡½æ•°ä»¥è¿”å›è‡ªå®šä¹‰ <code>props</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·¯ç”±é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [&#123;</span><br><span class="line">    path: <span class="string">&#x27;/:id&#x27;</span>,</span><br><span class="line">    component: Component,</span><br><span class="line">    props: <span class="function"><span class="params">router</span> =&gt;</span> (&#123; <span class="attr">id</span>: router.query.id &#125;)</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå‚æ•°æ¶‰åŠä¸¤ç§, åˆ†åˆ«æ˜¯è·¯ç”±çš„ <code>params</code> å’Œ <code>query</code>ï¼Œéœ€è¦æ³¨æ„åŒºåˆ†</p><ul><li><p><code>params</code> è¡¨ç¤º <code>router</code> å¯¹è±¡ä¸‹çš„ <code>params</code> å±æ€§, å¯ä»¥ç”± <code>props</code> çš„å›è°ƒå‡½æ•°å†…ç½®å‚æ•°è®¿é—®, å‚æ•°åç”± <code>path</code> å±æ€§ <code>/:</code> è¾“å…¥ï¼Œ è¿™é‡Œæ˜¯ <code>id</code>, ä¹Ÿå¯ä»¥å†™æˆåˆ«çš„ï¼Œåœ¨è·¯ç”±å±•ç¤ºä¸Šæ˜¯ç”¨ <code>/</code> æ‹¼æ¥åœ¨è·¯ç”±ååé¢, ä¾‹å¦‚: <a href="http://localhost:8080/test/9010903">http://localhost:8080/test/9010903</a></p></li><li><p><code>query</code> åˆ™æ˜¯è¡¨ç¤º <code>router</code> å¯¹è±¡ä¸‹çš„ <code>query</code> å±æ€§, ä¹Ÿå¯ä»¥ç”± <code>props</code> çš„å›è°ƒå‡½æ•°å†…ç½®å‚æ•°è®¿é—®, å‚æ•°å¯ä»¥åœ¨é¡µé¢ä¸­æ“ä½œ <code>router</code> å¯¹è±¡è¾“å…¥, åœ¨è·¯ç”±å±•ç¤ºä¸Šæ˜¯ç”¨ <code>?</code> æ‹¼æ¥åœ¨è·¯ç”±æœ«ç«¯, ä¾‹å¦‚: <a href="http://localhost:8080/test/9010903?name=ogliu">http://localhost:8080/test/9010903?name=ogliu</a></p></li></ul><p>å¦‚æœä¸¤ç§å‚æ•°ä¸€èµ·ä½¿ç”¨ï¼Œå¯å¦‚ä¸‹é…ç½®:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">    path: <span class="string">&#x27;test/:id&#x27;</span>,</span><br><span class="line">    component: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/test.vue&#x27;</span>),</span><br><span class="line">    name: <span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">    props: <span class="function"><span class="params">router</span> =&gt;</span> (&#123;</span><br><span class="line">        id: router.params.id,</span><br><span class="line">        name: router.query.name</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å¯¹åº”çš„é¡µé¢å°±å¯ä»¥åƒè¿™æ ·è·å–å‚æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“å‰ä½ç½® test.vue</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    props: [<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;name&#x27;</span>],</span><br><span class="line">    <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.id)    <span class="comment">// å‡è®¾å½“å‰è·¯ç”±ä¸º http://localhost:8080/test/9010903?name=ogliu, åˆ™ä¼šè¾“å‡º 9010903         </span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)  <span class="comment">// å‡è®¾å½“å‰è·¯ç”±ä¸º http://localhost:8080/test/9010903?name=ogliu, åˆ™ä¼šè¾“å‡º &#x27;ogliu&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç›‘å¬å¤šä¸ªå˜é‡"><a href="#ç›‘å¬å¤šä¸ªå˜é‡" class="headerlink" title="ç›‘å¬å¤šä¸ªå˜é‡"></a>ç›‘å¬å¤šä¸ªå˜é‡</h1><p><code>watcher</code> ä¸èƒ½ç›‘å¬å¤šä¸ªå˜é‡ï¼Œä½†æˆ‘ä»¬å¯ä»¥å°†ç›®æ ‡ç»„åˆåœ¨ä¸€èµ·ä½œä¸ºä¸€ä¸ªæ–°çš„ <code>computed</code>ï¼Œå¹¶ç›‘è§†è¿™ä¸ªæ–°çš„ â€œå˜é‡â€ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            msg1: <span class="string">&#x27;apple&#x27;</span>,</span><br><span class="line">            msg2: <span class="string">&#x27;banana&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    compouted: &#123;</span><br><span class="line">        <span class="function"><span class="title">msgObj</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123; msg1, msg2 &#125; = <span class="built_in">this</span></span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                msg1,</span><br><span class="line">                msg2</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    watch: &#123;</span><br><span class="line">        msgObj: &#123;</span><br><span class="line">            <span class="function"><span class="title">handler</span>(<span class="params">newVal, oldVal</span>)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (newVal.msg1 != oldVal.msg1) &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">&#x27;msg1 is change&#x27;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (newVal.msg2 != oldVal.msg2) &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">&#x27;msg2 is change&#x27;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            deep: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å‡½æ•°å¼ç»„ä»¶"><a href="#å‡½æ•°å¼ç»„ä»¶" class="headerlink" title="å‡½æ•°å¼ç»„ä»¶"></a>å‡½æ•°å¼ç»„ä»¶</h1><p>å‡½æ•°ç»„ä»¶ æ˜¯æ— çŠ¶æ€çš„(æ²¡æœ‰å“åº”å¼æ•°æ®)ï¼Œæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸæˆ–æ–¹æ³•ï¼Œå› æ­¤æ— æ³•å®ä¾‹åŒ–, åˆ›å»ºä¸€ä¸ªå‡½æ•°ç»„ä»¶éå¸¸å®¹æ˜“ï¼Œä½ éœ€è¦åšçš„å°±æ˜¯åœ¨ <code>SFC</code> ä¸­æ·»åŠ ä¸€ä¸ª <code>functional: true</code> å±æ€§ï¼Œæˆ–è€…åœ¨æ¨¡æ¿ä¸­æ·»åŠ  <code>functional</code> ã€‚ç”±äºå®ƒåƒå‡½æ•°ä¸€æ ·è½»å·§ï¼Œæ²¡æœ‰å®ä¾‹å¼•ç”¨ï¼Œæ‰€ä»¥æ¸²æŸ“æ€§èƒ½æé«˜äº†ä¸å°‘, å‡½æ•°ç»„ä»¶ä¾èµ–äºä¸Šä¸‹æ–‡ï¼Œå¹¶éšç€å…¶ä¸­ç»™å®šçš„æ•°æ®è€Œçªå˜ã€‚</p><blockquote><p>ä¸‹åˆ—ç¤ºä¾‹ä¸ vue å®˜æ–¹æ–‡æ¡£ç¤ºä¾‹ä¸åŒï¼Œå®ƒæ˜¯åŸºäº <code>vue-cli</code> æ„å»ºçš„é¡¹ç›®å†™æ³•ï¼Œæ›´è´´è¿‘æ—¥å¸¸ä½¿ç”¨ï¼Œä¹Ÿæ›´é€‚åˆæ–°æ‰‹å­¦ä¹ </p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test-components</span> <span class="attr">text</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">test-components</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  components: &#123;</span><br><span class="line">    testComponents: &#123;</span><br><span class="line"><span class="javascript">      functional: <span class="literal">true</span>,</span></span><br><span class="line">      props: &#123;</span><br><span class="line">        text: &#123;</span><br><span class="line"><span class="javascript">          type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">          required: <span class="literal">true</span></span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line"><span class="javascript">      render: <span class="function"><span class="keyword">function</span> (<span class="params">createElement, context</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> createElement(<span class="string">&#x27;h1&#x27;</span>, context.props.text)</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ-Hook"><a href="#ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ-Hook" class="headerlink" title="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ Hook"></a>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ Hook</h1><p>é€šå¸¸ï¼Œä½ å¯ä»¥åƒè¿™æ ·ç›‘å¬å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼ˆä¾‹å¦‚ <code>mounted</code>ï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Child --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  mounted () &#123;</span><br><span class="line"><span class="javascript">    <span class="built_in">this</span>.$emit(<span class="string">&#x27;onMounted&#x27;</span>)</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Parent --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Child</span> @<span class="attr">onMounted</span>=<span class="string">&quot;handleOnMounted&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿˜æœ‰å¦ä¸€ç§ç®€å•çš„è§£å†³æ–¹æ¡ˆï¼Œä½ å¯ä»¥æ”¹ç”¨ <code>@hook:mount</code> åœ¨ <code>Vue</code> å†…éƒ¨ç³»ç»Ÿä¸­ä½¿ç”¨ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Parent --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Child</span> @<span class="attr">hook:mounted</span>=<span class="string">&quot;handleOnMounted&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="æ ·å¼ç©¿é€"><a href="#æ ·å¼ç©¿é€" class="headerlink" title="æ ·å¼ç©¿é€"></a>æ ·å¼ç©¿é€</h1><p>åœ¨å¼€å‘ä¸­ä¿®æ”¹ç¬¬ä¸‰æ–¹ç»„ä»¶æ ·å¼æ˜¯å¾ˆå¸¸è§ï¼Œä½†ç”±äº <code>scoped</code> å±æ€§çš„æ ·å¼éš”ç¦»ï¼Œå¯èƒ½éœ€è¦å»é™¤ <code>scoped</code> æˆ–æ˜¯å¦èµ·ä¸€ä¸ª <code>style</code> ã€‚è¿™äº›åšæ³•éƒ½ä¼šå¸¦æ¥å‰¯ä½œç”¨ï¼ˆç»„ä»¶æ ·å¼æ±¡æŸ“ã€ä¸å¤Ÿä¼˜é›…ï¼‰ï¼Œæ ·å¼ç©¿é€åœ¨ <code>css</code> é¢„å¤„ç†å™¨ä¸­ä½¿ç”¨æ‰ç”Ÿæ•ˆã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>&gt;&gt;&gt;</code> æˆ– <code>/deep/</code> è§£å†³è¿™ä¸€é—®é¢˜:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br><span class="line">å¤–å±‚ &gt;&gt;&gt; .el-checkbox &#123;</span><br><span class="line">  display: block;</span><br><span class="line">  font-size: 26px;</span><br><span class="line"></span><br><span class="line">  .el-checkbox__label &#123;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br><span class="line">&#x2F;deep&#x2F; .el-checkbox &#123;</span><br><span class="line">  display: block;</span><br><span class="line">  font-size: 26px;</span><br><span class="line"></span><br><span class="line">  .el-checkbox__label &#123;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure><h1 id="äº‹ä»¶å‚æ•°-event"><a href="#äº‹ä»¶å‚æ•°-event" class="headerlink" title="äº‹ä»¶å‚æ•° $event"></a>äº‹ä»¶å‚æ•° $event</h1><p><code>$event</code> æ˜¯äº‹ä»¶å¯¹è±¡çš„ç‰¹æ®Šå˜é‡ï¼Œåœ¨ä¸€äº›åœºæ™¯èƒ½ç»™æˆ‘ä»¬å®ç°å¤æ‚åŠŸèƒ½æä¾›æ›´å¤šå¯ç”¨çš„å‚æ•°</p><h2 id="åŸç”Ÿäº‹ä»¶"><a href="#åŸç”Ÿäº‹ä»¶" class="headerlink" title="åŸç”Ÿäº‹ä»¶"></a>åŸç”Ÿäº‹ä»¶</h2><p>åœ¨åŸç”Ÿäº‹ä»¶ä¸­è¡¨ç°å’Œé»˜è®¤çš„äº‹ä»¶å¯¹è±¡ç›¸åŒ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;inputHandler(&#x27;hello&#x27;, $event)&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="function"><span class="title">inputHandler</span>(<span class="params">msg, e</span>)</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(e.target.value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰äº‹ä»¶"><a href="#è‡ªå®šä¹‰äº‹ä»¶" class="headerlink" title="è‡ªå®šä¹‰äº‹ä»¶"></a>è‡ªå®šä¹‰äº‹ä»¶</h2><p>åœ¨è‡ªå®šä¹‰äº‹ä»¶ä¸­è¡¨ç°ä¸ºæ•è·ä»å­ç»„ä»¶æŠ›å‡ºçš„å€¼</p><p><strong>my-item.vue:</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="function"><span class="title">customEvent</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.$emit(<span class="string">&#x27;custom-event&#x27;</span>, <span class="string">&#x27;some value&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>App.vue:</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">my-item</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in list&quot;</span> @<span class="attr">custom-event</span>=<span class="string">&quot;customEvent(index, $event)&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">my-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="function"><span class="title">customEvent</span>(<span class="params">index, e</span>)</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(e) <span class="comment">// &#x27;some value&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="è§¦å‘ç›‘å¬æ‰§è¡Œå¤šä¸ªæ–¹æ³•"><a href="#è§¦å‘ç›‘å¬æ‰§è¡Œå¤šä¸ªæ–¹æ³•" class="headerlink" title="è§¦å‘ç›‘å¬æ‰§è¡Œå¤šä¸ªæ–¹æ³•"></a>è§¦å‘ç›‘å¬æ‰§è¡Œå¤šä¸ªæ–¹æ³•</h1><p>ä½ å¯ä»¥ä¼ å…¥å›è°ƒæ•°ç»„ï¼Œå®ƒä»¬ä¼šè¢«é€ä¸€è°ƒç”¨ï¼Œå½¢å¼åŒ…æ‹¬å­—ç¬¦ä¸²ã€å‡½æ•°ã€å¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    data: &#123;</span><br><span class="line">        name: <span class="string">&#x27;Joe&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    watch: &#123;</span><br><span class="line">        name: [</span><br><span class="line">            <span class="string">&#x27;sayName1&#x27;</span>,</span><br><span class="line">            <span class="function"><span class="keyword">function</span>(<span class="params">newVal, oldVal</span>) </span>&#123;</span><br><span class="line">                <span class="built_in">this</span>.sayName2()</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                handler: <span class="string">&#x27;sayName3&#x27;</span>,</span><br><span class="line">                immaediate: <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="function"><span class="title">sayName1</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;sayName1==&gt;&#x27;</span>, <span class="built_in">this</span>.name)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">sayName2</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;sayName2==&gt;&#x27;</span>, <span class="built_in">this</span>.name)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">sayName3</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;sayName3==&gt;&#x27;</span>, <span class="built_in">this</span>.name)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Watch-ä¸­çš„å¼•å·"><a href="#Watch-ä¸­çš„å¼•å·" class="headerlink" title="Watch ä¸­çš„å¼•å·"></a>Watch ä¸­çš„å¼•å·</h1><blockquote><p>åœ¨ vuejs é¡¹ç›®ä¸­, å…ä¸äº†ä½¿ç”¨ watch, è€Œåœ¨æˆ‘ä»¬é¡¹ç›®ä»£ç ä¸­ç»å¸¸çœ‹åˆ° watch ç›‘å¬çš„å±æ€§éƒ¨åˆ†ï¼Œæœ‰äº›æœ‰å¼•å·ï¼Œæœ‰äº›æ²¡å¼•å·ï¼Œç”šè‡³æœ‰äº›ä¸ç”¨å¼•å·ä¸è¡Œï¼Œå®˜æ–¹æ–‡æ¡£æ²¡æœ‰è¯¦ç»†è¯´æ˜è¿™ä¸ªå¼•å·çš„ä½œç”¨ï¼Œæ‰€ä»¥å¾ˆå¤šäººå¼„ä¸æ¸…æ¥šå®ƒåˆä»€ä¹ˆä½œç”¨ã€‚</p></blockquote><p>å¯¹è±¡å…·ä½“å±æ€§çš„ <code>watch</code> å¯ä»¥ç›´æ¥ç”¨å¼•å·æŠŠå±æ€§æ‹¬èµ·æ¥ï¼Œå°±å¯ä»¥å®ç°å¯¹è±¡ä¸­ç‰¹å®šå±æ€§çš„ç›‘å¬äº‹ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">   &#39;queryData.name&#39;: &#123;</span><br><span class="line">     handler: function() &#123;</span><br><span class="line">      &#x2F;&#x2F;do something</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ç›‘å¬ä¸€ä¸ªå±æ€§ï¼Œä¸ä¼šä½¿ç”¨åˆ°æ”¹å˜å‰åçš„å€¼ï¼Œåªæ˜¯ä¸ºäº†æ‰§è¡Œä¸€äº›æ–¹æ³•ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²ä»£æ›¿</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">data:&#123;</span><br><span class="line">    name:<span class="string">&#x27;Joe&#x27;</span></span><br><span class="line">&#125;,</span><br><span class="line">watch:&#123;</span><br><span class="line">    name:<span class="string">&#x27;sayName&#x27;</span></span><br><span class="line">&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">    <span class="function"><span class="title">sayName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vuejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2021 Webå‰ç«¯å¼€å‘å…¥å‘æŒ‡å—</title>
      <link href="2021/06/25/QA/"/>
      <url>2021/06/25/QA/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰æ™¯"><a href="#å‰æ™¯" class="headerlink" title="å‰æ™¯"></a>å‰æ™¯</h1><p>è¿‘æ—¥å¶ç„¶é—´å…¥äº†ä¸€ä¸ª <code>å…¨æ ˆæ¶æ„å¸ˆ</code> çš„å¾®ä¿¡ç¾¤ï¼Œå¯æ˜æ˜æ˜¯ <code>å…¨æ ˆæ¶æ„å¸ˆ</code> çš„ç¾¤ï¼Œå¯é‡Œé¢è®¨è®ºã€äº¤æµçš„å´æ˜¯æåº¦ <code>å°ç™½</code> çš„é—®é¢˜ï¼Œå¯èƒ½æ˜¯ç¾¤ä¸»æ¨å¹¿çš„é—®é¢˜å§ï¼Œç»è¿‡å‡ å¤©çš„äº¤æµæˆ‘å‘ç°ï¼Œå¤§å®¶è®¨è®ºçš„æ¯”è¾ƒå¤šçš„é—®é¢˜éƒ½ä¸å‰ç«¯å¦‚ä½•ä¸Šæ‰‹æœ‰å…³ï¼Œå¯¹å‰ç«¯å¸‚åœºçš„ä¸æ˜ç¡®ï¼Œå¯¹å‰ç«¯æŠ€æœ¯æ ˆçš„è¿·èŒ«ç­‰ç­‰ï¼Œè®©æˆ‘å›æƒ³èµ·å¤šå¹´å‰æˆ‘åˆšæ­¥å…¥å‰ç«¯å¼€å‘çš„åœºæ™¯ä¸å¿ƒæƒ…ï¼Œäºæ˜¯æˆ‘å†³å®šï¼Œä¸“é—¨å†™ä¸€ç¯‡ï¼Œå‰ç«¯ä» 0 åˆ° 1 ç›¸å…³é—®é¢˜çš„åšæ–‡ï¼Œä»¥ä¸€ä¸ªè¿‡æ¥äººçš„èº«ä»½ï¼Œæ¥ç»™å¤§å®¶åšä¸ªå¼•è·¯äººï¼Œå¸Œæœ›å¤§å®¶ä¸ä¼šåƒæˆ‘ä»ä¸šä¸€æ · <code>å±±è·¯åå…«å¼¯</code>ã€‚</p><h1 id="Q-amp-A-ï¼ˆæœ¬æ–‡ä»¥é—®ç­”å½¢å¼æ¥æ¢è®¨å‰ç«¯é—®é¢˜ï¼Œå¦‚æœ‰è¡¥å……é—®é¢˜ï¼Œå¯åœ¨è¯„è®ºåŒºç•™ä¸‹ã€‚ï¼‰"><a href="#Q-amp-A-ï¼ˆæœ¬æ–‡ä»¥é—®ç­”å½¢å¼æ¥æ¢è®¨å‰ç«¯é—®é¢˜ï¼Œå¦‚æœ‰è¡¥å……é—®é¢˜ï¼Œå¯åœ¨è¯„è®ºåŒºç•™ä¸‹ã€‚ï¼‰" class="headerlink" title="Q &amp; A ï¼ˆæœ¬æ–‡ä»¥é—®ç­”å½¢å¼æ¥æ¢è®¨å‰ç«¯é—®é¢˜ï¼Œå¦‚æœ‰è¡¥å……é—®é¢˜ï¼Œå¯åœ¨è¯„è®ºåŒºç•™ä¸‹ã€‚ï¼‰"></a>Q &amp; A ï¼ˆæœ¬æ–‡ä»¥é—®ç­”å½¢å¼æ¥æ¢è®¨å‰ç«¯é—®é¢˜ï¼Œå¦‚æœ‰è¡¥å……é—®é¢˜ï¼Œå¯åœ¨è¯„è®ºåŒºç•™ä¸‹ã€‚ï¼‰</h1><blockquote><p>æœ‰äº›éƒ¨åˆ†æ˜¯é’ˆå¯¹å¯¹å‰ç«¯å®Œå…¨ä¸äº†è§£çš„æ–°äººæ¥è®¨è®ºçš„ï¼Œå¦‚æœå·²ç»æœ‰æ‰€äº†è§£çš„åŒå­¦å¯ä»¥ç›´æ¥è·³è¿‡ï¼Œæ–‡ç¬”ä¸å¥½ã€åŸåˆ›ç å­—ï¼Œè€é¸Ÿå‹¿å–·ï¼Œè°¢è°¢ï¼</p></blockquote><h3 id="é—®é¢˜-1ï¼šä»€ä¹ˆæ˜¯å‰ç«¯ï¼Ÿ"><a href="#é—®é¢˜-1ï¼šä»€ä¹ˆæ˜¯å‰ç«¯ï¼Ÿ" class="headerlink" title="é—®é¢˜ 1ï¼šä»€ä¹ˆæ˜¯å‰ç«¯ï¼Ÿ"></a>é—®é¢˜ 1ï¼šä»€ä¹ˆæ˜¯å‰ç«¯ï¼Ÿ</h3><p>ä»€ä¹ˆæ˜¯å‰ç«¯ï¼Ÿå‰ç«¯çš„å®šä½å¦‚ä½•ï¼Ÿ é¦–å…ˆå¾—è¯´è¯´è¿™ä¸ª <code>ç½‘ç«™å»ºè®¾</code> / <code>Webå¼€å‘</code>ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯åšä¸€ä¸ªç½‘ç«™ï¼ˆæœ€åˆæ˜¯æ²¡æœ‰ç§»åŠ¨ç«¯ã€å°ç¨‹åºçš„ï¼‰ï¼Œå¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>äº§å“ï¼ˆè€æ¿ï¼‰è®¾è®¡åŸå‹å›¾ï¼ˆè‰ç¨¿ï¼‰ï¼Œä¸å®¢æˆ·æ´½è°ˆï¼›</li><li>è°ˆå¦¥äº†ä¹‹åï¼Œè®¾è®¡å¸ˆæŒ‰ç…§åŸå‹åšè®¾è®¡å›¾ï¼›</li><li>è®¾è®¡å®šç¨¿äº†ä¹‹åï¼Œè®¾è®¡å›¾äº¤ç”±å‰ç«¯å¼€å‘åˆ¶ä½œç½‘é¡µï¼›</li><li>åç«¯è®¾è®¡æ•°æ®åº“ï¼Œæ¥å£ï¼Œä¸å‰ç«¯å¯¹æ¥æ•°æ®ï¼›</li><li>æµ‹è¯•å·¥ç¨‹å¸ˆæµ‹è¯•ç½‘é¡µæˆ–è€…åŠŸèƒ½æ˜¯å¦æ­£å¸¸æ»¡è¶³é¢„æœŸï¼›</li><li>é¡¹ç›®ä¸Šçº¿å‘å¸ƒï¼›</li></ol><p>ç”±æ­¤çœ‹å‡ºï¼Œ<code>å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ</code>ï¼Œæ˜¯å¤„äº <code>ç½‘ç«™å»ºè®¾</code> çš„ä¸€éƒ¨åˆ†ï¼Œä¸€ä¸ªé¡¹ç›®ï¼Œåº”è¯¥æ˜¯ç”±ä¸€ä¸ªå¼€å‘å›¢é˜ŸåŠŸèƒ½æ¨è¿›çš„ï¼Œä¸ä¹‹æ­æ¡£çš„åº”è¯¥è¿˜æœ‰: äº§å“ç»ç†ã€è®¾è®¡å¸ˆã€åç«¯å¼€å‘å·¥ç¨‹å¸ˆã€æµ‹è¯•å·¥ç¨‹å¸ˆã€è¿ç»´å·¥ç¨‹å¸ˆç­‰ï¼Œè‡³æ­¤ï¼Œä½ åº”è¯¥å·²ç»äº†è§£å‰ç«¯çš„åŸºæœ¬å®šä½ï¼Œæˆ–è®¸è¿˜ä¸æ˜¯å¾ˆæ˜ç¡®ï¼Œæˆ‘ä»¬ç»§ç»­è¯´è¯´å‰ç«¯ä¸åç«¯çš„åŒºåˆ«:</p><ul><li>æµè§ˆå™¨å±•ç¤ºçš„ç½‘é¡µï¼Œä»¥åŠç½‘é¡µä¸Šçš„äº¤äº’ï¼ˆç‰¹æ•ˆï¼‰ç­‰ç­‰ï¼Œç”±å‰ç«¯å®Œæˆ;</li><li>ç½‘é¡µä¸Šçš„æ•°æ®ï¼Œä¸¾ä¾‹: ç™»å½•çš„è´¦å·å¯†ç ã€å•†åŸçš„äº§å“ä»·æ ¼æˆ–åº“å­˜ç­‰ç­‰ï¼Œç”±åç«¯æ•°æ®åº“æä¾›;</li><li>ç”¨å¤§ç™½è¯è¯´å°±æ˜¯å‰ç«¯è´Ÿè´£å±•ç¤ºï¼Œåç«¯è´Ÿè´£æä¾›ä¸ç»´æŠ¤æ•°æ®ï¼Œè€Œå‰ç«¯ä»åç«¯è·å–æ•°æ®å¹¶å±•ç¤ºå‡ºæ¥åˆ™ç§°ä¸ºå‰åç«¯å¯¹æ¥ï¼›</li></ul><h3 id="é—®é¢˜-2-ä¸ºä»€ä¹ˆå¾ˆå¤šå…¬å¸æ‹›-H5-è·Ÿå‰ç«¯æœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ"><a href="#é—®é¢˜-2-ä¸ºä»€ä¹ˆå¾ˆå¤šå…¬å¸æ‹›-H5-è·Ÿå‰ç«¯æœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ" class="headerlink" title="é—®é¢˜ 2: ä¸ºä»€ä¹ˆå¾ˆå¤šå…¬å¸æ‹› H5, è·Ÿå‰ç«¯æœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ"></a>é—®é¢˜ 2: ä¸ºä»€ä¹ˆå¾ˆå¤šå…¬å¸æ‹› H5, è·Ÿå‰ç«¯æœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ</h3><p><code>H5</code> å³ <code>HTML 5</code> æ˜¯ <code>HTML</code> çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œæ˜¯ <code>ç½‘é¡µå¼€å‘</code> çš„ä¸€ä¸ªåŸºç¡€è¯­è¨€ï¼Œå…·æœ‰é‡Œç¨‹ç¢‘æ„ä¹‰ï¼Œåœ¨ <code>H5</code> å‡ºç°ä¹‹å‰ï¼Œè¿˜æ²¡æœ‰ <code>å‰ç«¯</code> è¿™ä¸ªè¯æ±‡ï¼Œå½“æ—¶åšç½‘é¡µå¼€å‘çš„è¢«ç§°ä¸º <code>ç½‘é¡µåˆ¶ä½œ</code>ï¼Œä¿—ç§° <code>åˆ‡å›¾ä»”</code>ï¼Œ è€Œ <code>H5</code> å‡ºç°ä»¥åç§»åŠ¨äº’è”ç½‘åŒæ—¶ä¹Ÿç«äº†ï¼Œå› ä¸ºç§»åŠ¨ç«¯æ²¡æœ‰ä¸‡æ¶çš„ <code>IE</code> æµè§ˆå™¨ï¼Œå¯¹ <code>H5</code> çš„æ”¯æŒéå¸¸å¥½ï¼Œæ‰€ä»¥è¢«å¹¿æ³›çš„åº”ç”¨åœ¨ç§»åŠ¨ç«¯å¼€å‘ï¼Œæ‰€ä»¥å¾ˆå¤šæ‹›è˜ä¿¡æ¯æ‹›ç§»åŠ¨ç«¯å¼€å‘ï¼Œéƒ½ç§°ä¸º æ‹› <code>H5</code>ï¼Œå®é™…ä¸Šè¿™æ—¶å€™ä»–ä»¬æ‰€è¯´çš„ <code>H5</code> å·²ç»æ˜¯ <code>HTML 5</code>ã€ <code>CSS 3</code>ã€<code>javascript</code>çš„é›†åˆï¼Œè€Œä¸æ˜¯å•çº¯çš„è¯´ <code>HTML 5</code> è¿™ä¸€é—¨è¯­è¨€ã€‚<code>H5</code> æ˜¯å‰ç«¯çš„ä¸€éƒ¨åˆ†ï¼</p><h3 id="é—®é¢˜-3-å‰ç«¯ç°çŠ¶å¦‚ä½•ï¼Ÿ"><a href="#é—®é¢˜-3-å‰ç«¯ç°çŠ¶å¦‚ä½•ï¼Ÿ" class="headerlink" title="é—®é¢˜ 3 å‰ç«¯ç°çŠ¶å¦‚ä½•ï¼Ÿ"></a>é—®é¢˜ 3 å‰ç«¯ç°çŠ¶å¦‚ä½•ï¼Ÿ</h3><ul><li>æœ€åˆçš„ <code>ç½‘é¡µåˆ¶ä½œ</code> åæ¥å‘å±•æˆ <code>å‰ç«¯å·¥ç¨‹å¸ˆ</code>ã€ç”šè‡³å› ä¸º <code>nodejs</code> çš„å‡ºç°ï¼Œå¯æ‰©å±•åˆ° <code>å…¨æ ˆå·¥ç¨‹å¸ˆ</code>, æ‰€ä»¥å‰ç«¯ç›¸è¾ƒåç«¯æ¥è¯´ï¼Œå‘å±•ä¸Šé™æ›´é«˜ï¼›</li><li>æŠ€æœ¯æ›´è¿­å¿«, æŠ€æœ¯é¢è¶Šæ¥è¶Šå¹¿, å„ç§ESï¼ˆJSï¼‰ç‰ˆæœ¬ã€å„ç§æ„å»ºå·¥å…·ã€ä¼ä¸šçº§æ¡†æ¶ï¼Œ<code>æ··åˆAPP</code>, <code>å¾®ä¿¡å°ç¨‹åº</code>, ç™¾èŠ±ç¼­ä¹±, å¦‚æœä¸æ˜ç¡®å‘å±•è·¯çº¿, å¾ˆå®¹æ˜“èµ°å¼¯è·¯ï¼›</li><li>ç”±äºä¸Šä¸€ç‚¹ï¼Œå¯¼è‡´ç°åœ¨å¸‚é¢ä¸Šçš„åˆçº§å‰ç«¯æ³›æ»¥ã€ä¸­é«˜çº§ç¨€ç¼ºï¼Œå¤§éƒ¨åˆ†åº”å±Šç”Ÿå‡ºæ¥å¹²ä¸äº†å¤šä¹…å°± <code>è¿·è·¯</code> äº†, èƒ½æ‰¾å›æ¥çš„å¯¥å¯¥æ— å‡ ï¼Œèƒ½çªç ´æŠ€æœ¯ç“¶é¢ˆä¸Šå‡é«˜çº§å·¥ç¨‹å¸ˆçš„æ›´æ˜¯å°‘ä¹‹åˆå°‘ï¼›</li><li>åˆä¹…å¿…åˆ†ï¼Œå‰ç«¯ç°åœ¨å·²ç»åŒ…ç½—ä¸‡è±¡ï¼Œæ¶‰åŠé¢å¤ªå¹¿ï¼ŒæŠ€æœ¯æ ˆé‡å¤ªå¤§ï¼Œæ‰€ä»¥å¿…ç„¶ä¼šåˆ†æµå‡ºå‡ æ¡å‘å±•è·¯çº¿ã€‚</li><li>å¦‚æœèƒ½ä¿æŒæŒç»­å­¦ä¹ ï¼Œå¹¶èƒ½ç†æ¸…æ¥šè‡ªå·±çš„å‘å±•è§„åˆ’ï¼Œæ— è®ºå“ªæ¡å‘å±•è·¯çº¿ï¼Œå‰ç«¯çš„å‰æ™¯éƒ½æ˜¯å¥½çš„ï¼ˆç›®å‰è–ªèµ„ä¹Ÿæ˜¯å®¢è§‚çš„ï¼‰ï¼Œä½†æ˜¯å¦‚æœåªæ˜¯åˆçº§å°±å¾ˆéš¾æ‰¾å·¥ä½œï¼Œå› ä¸ºé—¨æ§›ä½ã€‚</li></ul><h3 id="é—®é¢˜-4ï¼šå¦‚ä½•é«˜æ•ˆå­¦ä¹ ï¼Ÿ"><a href="#é—®é¢˜-4ï¼šå¦‚ä½•é«˜æ•ˆå­¦ä¹ ï¼Ÿ" class="headerlink" title="é—®é¢˜ 4ï¼šå¦‚ä½•é«˜æ•ˆå­¦ä¹ ï¼Ÿ"></a>é—®é¢˜ 4ï¼šå¦‚ä½•é«˜æ•ˆå­¦ä¹ ï¼Ÿ</h3><ol><li><p>é€‰æ‹©å¤§äºåŠªåŠ›ï¼</p><ul><li>ç†æ¸…æ¥šæŠ€æœ¯æ ˆï¼Œåˆ¶å®šå¥½å­¦ä¹ è·¯çº¿ï¼Œæ˜ç¡®ç›®çš„çš„å­¦ä¹ </li></ul></li><li><p>è´¹æ›¼å­¦ä¹ æ³•</p><ul><li>æ•™å­¦å¼å­¦ä¹ ï¼Œå°†è‡ªå·±å­¦åˆ°çš„ä¸œè¥¿å°è¯•æ•™ç»™åˆ«äººï¼ŒåŒæ—¶è‡ªèº«åŠ æ·±å°è±¡ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥æ•™å¾—å¯¹è±¡ï¼Œå¯ä»¥å†™æ–‡ç« çš„å½¢å¼æ¥è®²è¿°ï¼ŒæŠŠæœªæ¥çœ‹ä½ æ–‡ç« çš„æ¯ä¸ªäººéƒ½å½“æˆä½ çš„æ•™å­¦å¯¹è±¡</li></ul></li><li><p>åˆ†ç±»è®°å¿†</p><ul><li>ä¸¾ä¾‹ï¼šhtmlæ ‡ç­¾å¤ªå¤šï¼Œè®°ä¸ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ†ç±»è®°å¿†ï¼Œå—çº§å…ƒç´ æœ‰å“ªäº›ã€å†…è”å…ƒç´ æœ‰å“ªäº›ï¼›</li></ul></li><li><p>åˆ»æ„å­¦ä¹ </p><ul><li>åœ¨å­¦ä¹ ä¸€ä¸ªçŸ¥è¯†ç‚¹çš„æ—¶å€™ï¼Œåšå¥½ç¬”è®°æ¢³ç†ï¼Œä»¥ååœ¨åˆ©ç”¨ç¢ç‰‡æ—¶é—´ï¼Œåå¤åŠ æ·±è®°å¿†ï¼Œä¸¾ä¾‹: ä»Šå¤©å­¦ä¹ äº†ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œå¹¶ä¸”åšå¥½äº†ç¬”è®°ï¼Œç¡è§‰å‰ã€æˆ–è€…æ´—æ¾¡çš„æ—¶å€™æˆ–è€…ä»»ä½•å…¶ä»–è„‘å­ç©ºé—²çš„æ—¶å€™ï¼Œåˆ»æ„å›æƒ³ä¸€ä¸‹ï¼Œä»Šå¤©å­¦ä¹ çš„å†…å®¹ï¼Œå¦‚æœæƒ³ä¸èµ·æ¥ï¼Œå›å¤´ç¿»ä¸€ä¸‹ç¬”è®°ï¼Œçœ‹çœ‹æ˜¯å¿˜è®°äº†å“ªä¸€å—ï¼Œå¦‚æ­¤åå¤ï¼</li></ul></li><li><p>é¡¹ç›®ä¸­å­¦ä¹ </p><ul><li>è‡ªä¸»å¼€å‘ä¸€ä¸ªé¡¹ç›®ï¼Œä¸€ç‚¹ä¸€ç‚¹çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè‡ªå·±å°±ä¼šäº§ç”Ÿå¾ˆå¤šæ€è€ƒï¼Œæœ‰é—®é¢˜å°±ä¸Šç½‘æŸ¥ï¼Œè§£å†³é—®é¢˜çš„æˆå°±æ„Ÿä¼šæ…¢æ…¢è®©ä½ å¯¹ç¼–ç¨‹äº§ç”Ÿå…´è¶£ï¼Œè€Œå…´è¶£æ˜¯æœ€å¥½çš„è€å¸ˆã€‚</li></ul></li><li><p>é€ è½®å­</p><ul><li>åœ¨æ²¡æœ‰ç‹¬æŒ¡ä¸€é¢çš„èƒ½åŠ›æ—¶ï¼Œé‚£å°±æ‰¾ä¸€ä¸ªæ¨¡ä»¿å¯¹è±¡ï¼Œçœ‹åˆ«äººæ€ä¹ˆå†™ï¼Œç…§ç€å†™ï¼Œå°è¯•ç†è§£åˆ«äººä¸ºä»€ä¹ˆè¿™ä¹ˆå†™ã€‚</li></ul></li></ol><h3 id="é—®é¢˜-5ï¼šæ˜¯å¦åº”è¯¥å‚ä¸åŸ¹è®­æœºæ„ï¼Ÿ"><a href="#é—®é¢˜-5ï¼šæ˜¯å¦åº”è¯¥å‚ä¸åŸ¹è®­æœºæ„ï¼Ÿ" class="headerlink" title="é—®é¢˜ 5ï¼šæ˜¯å¦åº”è¯¥å‚ä¸åŸ¹è®­æœºæ„ï¼Ÿ"></a>é—®é¢˜ 5ï¼šæ˜¯å¦åº”è¯¥å‚ä¸åŸ¹è®­æœºæ„ï¼Ÿ</h3><blockquote><p>å…³äºè¿™ç‚¹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä¸ªäººçš„æ€è€ƒï¼Œå¹¶éæ‰“å‡»é’ˆå¯¹å“ªä¸ªåŸ¹è®­æœºæ„ï¼Œå¦‚æœæœ‰è¢«å†’çŠ¯åˆ°ï¼Œè¿˜è¯·è°…è§£ï¼</p></blockquote><p>å‰ç«¯ç›¸è¾ƒå…¶ä»–çš„ä¸“ä¸šæ¥è¯´ï¼Œæ¯”è¾ƒç‰¹æ®Šï¼ŒçŸ¥è¯†é¢å¹¿ï¼Œé‡ä¹Ÿå°±å¤šï¼ŒæŠ€æœ¯æ›´è¿­ä¹Ÿå¿«ï¼ŒåŸ¹è®­æœºæ„é€šå¸¸éƒ½æ˜¯4ä¸ªå¤šæœˆä¸€ä¸ªç­æœŸï¼Œè€Œ4ä¸ªå¤šæœˆæ—¶é—´è¿™ä¸ªè¯¾ç¨‹å¤§çº²æ€ä¹ˆå®‰æ’éƒ½æ˜¯å¾ˆéš¾å­¦å¥½çš„ï¼Œæ—¶é—´ä¸å¤Ÿï¼Œè€Œä¸”å› ä¸ºè¦ç³»ç»ŸåŒ–åŸ¹è®­ï¼Œæœ‰å¾ˆå¤šæŠ€èƒ½å¯èƒ½å·¥ä½œç”¨ä¸ä¸Šä¹Ÿä¼šåˆ—å…¥è¯¾ç¨‹å¤§çº²å†…ï¼Œæ‰€ä»¥å¾€å¾€å‡ºæ¥çš„å­¦å‘˜éƒ½æ˜¯çŸ¥é“çš„å¤šï¼Œèƒ½ç†Ÿç»ƒè¿ç”¨çš„æŠ€èƒ½å´å°‘ï¼Œä¹Ÿæ²¡æœ‰å®æˆ˜é¡¹ç›®çš„ç»éªŒï¼Œå·¥ä½œè‡ªç„¶éš¾æ‰¾ï¼Œ4ä¸ªæœˆä¸€æ‰¹ï¼Œä¸€æ‰¹ï¼Œåˆä¸€æ‰¹ï¼Œæ‰€ä»¥å¯¼è‡´å¸‚é¢ç°åœ¨å·²ç»æ˜¯åˆçº§æ³›æ»¥ï¼Œæ‰€ä»¥æˆ‘çš„ç»“è®ºæ˜¯ï¼ŒåŸ¹è®­æœºæ„é€‚åˆä¸€äº›æ²¡æœ‰äººå¼•å¯¼ã€è‡ªå·±åˆå®Œå…¨æ²¡æœ‰æ¥è§¦è¿‡è¿™ä¸ªè¡Œä¸šçš„æ–°äººæ˜¯å¯ä»¥è€ƒè™‘å»çš„ï¼Œå¯ä»¥å…¥é—¨ï¼Œè€Œè‡ªå·±æ‹å¾—æ¸…çš„ä¸”è‡ªå¾‹æœ‰å†³å¿ƒè‡ªå­¦çš„ï¼Œå®Œå…¨å¯ä»¥åˆ©ç”¨äº’è”ç½‘çš„åŠ›é‡ï¼Œè‡ªå­¦æˆæ‰ã€‚</p><h3 id="é—®é¢˜-6ï¼šå­¦ä¹ æ¸ é“"><a href="#é—®é¢˜-6ï¼šå­¦ä¹ æ¸ é“" class="headerlink" title="é—®é¢˜ 6ï¼šå­¦ä¹ æ¸ é“"></a>é—®é¢˜ 6ï¼šå­¦ä¹ æ¸ é“</h3><ol><li><p>è§†é¢‘æ•™å­¦</p><ul><li><p><a href="https://www.bilibili.com/">å“”å“©å“”å“©</a><br>å†…å®¹å¤šã€æ‚ï¼Œä½†å…è´¹ï¼Œå¦‚æœä¼šæŒ‘çš„è¯è¿˜æ˜¯èƒ½æ‰¾åˆ°ä¸€äº›ä¸é”™çš„æ•™ç¨‹ã€‚</p></li><li><p><a href="https://class.imooc.com/">æ…•è¯¾ç½‘</a><br>ç¨‹åºå‘˜çš„æ¢¦å·¥å‚ï¼Œä¸“ä¸šçš„æ•™å­¦ï¼Œåˆ†ç±»æ˜ç¡®ï¼Œ<code>å…è´¹è§†é¢‘</code> å¯å…¥é—¨ï¼Œ<code>å®æˆ˜è§†é¢‘</code>ï¼ˆæ”¶è´¹ï¼‰ç§¯ç´¯å®æˆ˜ç»éªŒï¼Œç›®å‰è¿˜æœ‰3é—¨ä¸å‰ç«¯ç›¸å…³çš„ <code>ä½“ç³»è¯¾ç¨‹</code>ï¼Œåˆ†åˆ«æ˜¯ <code>å‰ç«¯å·¥ç¨‹å¸ˆ</code>ï¼Œ<code>å¤§å‰ç«¯</code>ï¼Œ<code>Webå‰ç«¯æ¶æ„å¸ˆ</code>ï¼Œå¯æ ¹æ®è‡ªèº«æƒ…å†µè€ƒè™‘é€‰æ‹©ï¼Œæ”¶è´¹è¾ƒé«˜ï¼Œç±»ä¼¼åŸ¹è®­æœºæ„ã€‚</p></li></ul></li><li><p>å„å¤§ç¨‹åºå‘˜èšé›†çš„ç¤¾åŒºç½‘ç«™, ä¸Šé¢æœ‰å¾ˆå¤šä¼˜è´¨çš„æ–‡ç« ï¼Œä»¥åŠç³»åˆ—è¯¾ç¨‹ã€‚(æ’åä¸åˆ†å…ˆå)</p><ul><li><a href="https://www.zhihu.com/">çŸ¥ä¹</a></li><li><a href="https://juejin.cn/">æ˜é‡‘</a></li><li><a href="https://www.jianshu.com/">ç®€ä¹¦</a></li><li><a href="https://segmentfault.com/">æ€å¦ / SegmentFault</a></li><li><a href="https://www.csdn.net/">CSDN</a></li><li>â€¦</li></ul></li><li><p>å®˜æ–¹æ–‡æ¡£ï¼Œçœ‹æ–‡æ¡£æ¯”çœ‹è§†é¢‘æ¥å¾—æ›´å¿«ï¼Œç½‘ä¸Šå¾ˆå¤šæ–‡ç« ï¼Œæˆ–è€…æ•™ç¨‹éƒ½æ˜¯åŸºäºå®˜æ–¹æ–‡æ¡£è¡ç”Ÿå‡ºæ¥çš„ï¼Œæ‰€ä»¥å­¦ä¹ æ—¶åº”è¯¥è¯¦ç»†çš„é˜…è¯»å¯¹åº”çš„å®˜æ–¹æ–‡æ¡£ï¼Œä¸¾ä¾‹ï¼šå­¦ <code>vue</code> å°±çœ‹ <code>vue</code> çš„æ–‡æ¡£ï¼Œåå¤çœ‹ï¼</p></li><li><p><a href="https://github.com/">Github</a>ï¼Œå‚è€ƒåˆ«äººçš„é¡¹ç›®æºç ï¼Œåˆ†æåˆ«äººçš„ä»£ç ï¼Œè¿™éœ€è¦ä¸€å®šçš„ä»£ç é˜…è¯»èƒ½åŠ›ã€‚</p></li></ol><h3 id="é—®é¢˜-7ï¼šå‰ç«¯æŠ€æœ¯æ ˆçš„åˆ†æµï¼Ÿä»€ä¹ˆé‡ç‚¹å­¦ï¼Œä»€ä¹ˆæŠ€æœ¯äº†è§£å³å¯"><a href="#é—®é¢˜-7ï¼šå‰ç«¯æŠ€æœ¯æ ˆçš„åˆ†æµï¼Ÿä»€ä¹ˆé‡ç‚¹å­¦ï¼Œä»€ä¹ˆæŠ€æœ¯äº†è§£å³å¯" class="headerlink" title="é—®é¢˜ 7ï¼šå‰ç«¯æŠ€æœ¯æ ˆçš„åˆ†æµï¼Ÿä»€ä¹ˆé‡ç‚¹å­¦ï¼Œä»€ä¹ˆæŠ€æœ¯äº†è§£å³å¯?"></a>é—®é¢˜ 7ï¼šå‰ç«¯æŠ€æœ¯æ ˆçš„åˆ†æµï¼Ÿä»€ä¹ˆé‡ç‚¹å­¦ï¼Œä»€ä¹ˆæŠ€æœ¯äº†è§£å³å¯?</h3><ol><li><p>HTMLã€CSSï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œè¿™ä¸¤é¡¹åŸºç¡€å¿…é¡»ç†Ÿç»ƒæŒæ¡ã€‚</p></li><li><p>JavaScript / ECMAScript 6ï¼Œ å¦‚æœç°åœ¨å…¥å‘å‰ç«¯ï¼Œæ¨èç›´æ¥ä» <code>ES6</code> èµ·æ­¥ï¼Œä»¥å…è¢« JavaScriptï¼ˆå®é™…ä¸Šæ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œç‰ˆæœ¬ä¸ä¸€æ ·è€Œå·²ï¼‰çš„ä¸€äº›éº»çƒ¦ç‚¹ç»™ç»•å‘é‡Œï¼Œæ‰“å‡»åˆ°ä¿¡å¿ƒï¼Œä¾‹å¦‚: é—­åŒ…ã€åœ°ç‹±å›è°ƒã€åŸå‹é“¾ç­‰ç­‰ï¼Œå®é™…ä¸Šè¿™äº›å‘å¤§éƒ¨åˆ†åœ¨æ–°ç‰ˆæœ¬é‡Œå·²ç»æœ‰æ–°çš„ <code>è¯­æ³•ç³–</code> æˆ–æ˜¯ <code>API</code>  æˆ–æ˜¯å…¶ä»–æ–°ç‰¹æ€§ç»™è§£å†³äº†ï¼Œæ–°äººåº”è¯¥ä»¥å¿«é€Ÿä¸Šæ‰‹å·¥ä½œä¸ºä¸»ï¼Œç›´æ¥å­¦ä¹  <code>ES6</code>ï¼Œå·¥ä½œä¹‹åå†æ…¢æ…¢å›å¤´çœ‹è¿™äº›é—®é¢˜ï¼Œæå‡ç¼–ç¨‹æ€æƒ³ã€‚å…³äº <code>JavaScript</code> å’Œ <code>ECMAScript</code> ä¹‹é—´çš„å…³ç³»å¦‚æœè¿˜ä¸æ˜¯å¾ˆæ¸…æ¥šçš„åŒå­¦ï¼Œå¯ä»¥å‚è€ƒ <code>é˜®ä¸€å³°</code> è€å¸ˆçš„ <a href="https://es6.ruanyifeng.com/#docs/intro">ã€ŠECMAScript 6 å…¥é—¨ã€‹</a> ä¸€ä¹¦ä¸­çš„ <code>ECMAScript 6 ç®€ä»‹</code>ã€‚</p></li><li><p>jQuey äº†è§£å³å¯ï¼Œç°é˜¶æ®µè¿˜ç”¨ jQuery çš„å…¬å¸ï¼Œåº”è¯¥æ˜¯è®²æ±‚æ•ˆç‡è¦å¿«ï¼Œè€Œä¸”é¡¹ç›®å¯¹æ€§èƒ½è¦æ±‚å¹¶ä¸é«˜ï¼Œå› ä¸º jQuery æ’ä»¶åº“åºå¤§ï¼Œç°æˆçš„æ’ä»¶å¤šï¼Œå¯ä»¥æ‹†ç®±å³ç”¨ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼ŒjQuery å› ä¸ºæ²¡æœ‰æ¨¡å—åŒ–ï¼Œå·²ç»é€æ¸è¢«æ·˜æ±°äº†ã€‚</p></li><li><p>æ¡†æ¶, ä¸‰é€‰ä¸€ï¼Œæ¨è <code>Vue</code>ï¼Œè½»é‡çº§ã€ç¤¾åŒºæ´»è·ƒï¼Œä¸Šæ‰‹ç›¸å¯¹å®¹æ˜“å¾ˆå¤šï¼Œå…¶æ¬¡æ¨è <code>React</code>ï¼Œå­¦å¥½å…¶ä¸­ä¸€ç§æ¡†æ¶ä»¥åŠæ¶‰åŠçš„æ ¸å¿ƒæ’ä»¶ï¼Œä¾‹å¦‚ï¼švue-routerã€vuexç­‰ï¼Œæ—¢å¯æ‰¾åˆ°å¯¹åº”æŠ€æœ¯æ ˆçš„å…¬å¸å·¥ä½œã€‚æ­é…å­¦ä¹ çš„è¿˜æœ‰ä¸»æµçš„ UI æ¡†æ¶ï¼Œæ¡†æ¶çš„è„šæ‰‹æ¶é…ç½®æœ€å¥½ä¹Ÿåšä¸€äº›äº†è§£ã€‚</p><ul><li>Vue</li><li>React</li><li>Angela</li></ul></li><li><p>å·¥ç¨‹åŒ–æ„å»ºå·¥å…·ï¼Œæœ‰å¾ˆå¤šç§ï¼Œè¿™é‡Œåªåˆ—å‡ºç›¸å¯¹æµè¡Œçš„å‡ ç§ï¼Œæ–°æ‰‹é€‰æ‹©ä¸€ç§å­¦ä¹ å³å¯ï¼Œæ¨è <code>Webpack</code>ï¼Œå¦‚æœå¯¹é¡¹ç›®å·¥ç¨‹åŒ–æ„Ÿå…´è¶£ï¼Œå¯ä»¥æ·±å…¥å­¦ä¹ ï¼Œå‘ <code>å‰ç«¯æ¶æ„å¸ˆ</code> æ–¹å‘å‘å±•ã€‚</p><ul><li>Webpack</li><li>Gulp</li><li>Grunt</li><li>Browserify</li></ul></li><li><p>nodejsï¼Œæ–°æ‰‹å…¥é—¨å»ºè®®äº†è§£å³å¯ï¼ŒåŸºç¡€ç‰¢å›ºç¨³å®šä¹‹åå¯ä»¥æ‰©å±•å­¦ä¹ ï¼Œå‘ <code>å…¨æ ˆ</code> å°è¯•ã€‚</p></li><li><p>å¾®ä¿¡å°ç¨‹åºã€å…¬ä¼—å·ï¼Œå»ºè®®è¦ä¹ˆä¸“æ”»è¦ä¹ˆæ”¾å¼ƒï¼Œå¦‚æœä¸“æ”» <code>å¾®ä¿¡å¼€å‘</code>ï¼Œä¸Šè¿°å†…å®¹éƒ½å¯ä»¥æš‚æ—¶ä¸å­¦ï¼Œå…³è”æ€§ä¸å¤§ã€‚</p></li><li><p>React Nativeï¼Œç§»åŠ¨ç«¯å¼€å‘çš„é‡ç£…æ¡†æ¶ï¼Œä¸å…¶ç±»ä¼¼çš„æ¡†æ¶è¿˜æœ‰å¾ˆå¤šï¼Œå¦‚æœä¸“æ”» <code>ç§»åŠ¨ç«¯å¼€å‘</code> çš„åŒå­¦ï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©æ€§çš„å­¦ä¹ .</p></li></ol><p><strong>ä¸Šè¿°å†…å®¹, æˆ‘ä»¬å¯ä»¥åˆ†æå¾—å‡ºç»“è®º: å½“å‰çš„ <code>å¤§å‰ç«¯æ—¶ä»£</code>, è‡³å°‘æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹å‘å¯ä»¥å‘å±•:</strong></p><ol><li>ä¸šåŠ¡å‹å‰ç«¯å·¥ç¨‹å¸ˆï¼Œæ¯”è¾ƒåˆçº§ï¼Œä¼šåŸºç¡€ã€ä¼šç”¨æ¡†æ¶å†™ä¸šåŠ¡ä»£ç å³å¯ï¼Œå…¥é—¨é¦–é€‰ã€‚</li><li>å…¨æ ˆå·¥ç¨‹å¸ˆï¼Œå‰åç«¯é€šåƒã€‚</li><li>å‰ç«¯æ¶æ„å¸ˆï¼Œä¸»æ”»æ€§èƒ½æå‡ï¼Œåº•å±‚æ¶æ„ã€‚</li><li>å¾®ä¿¡å¼€å‘</li><li>ç§»åŠ¨ç«¯å¼€å‘</li></ol><p><strong>å‘å±•è§„åˆ’é€‰æ‹©æœ‰ä»¥ä¸‹å‡ ç§ï¼Œæ•°å­—å¯¹åº”ä¸Šæ–‡åºå·:</strong></p><ul><li>1 &gt; 2 &gt; 3 æŒ‰é¡ºåºé€æ­¥å‡çº§</li><li>5 &gt; 4</li><li>4</li><li>5</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å½»åº•å‘Šåˆ« Cannot read property *** of undefined</title>
      <link href="2021/05/26/OptionalChaining/"/>
      <url>2021/05/26/OptionalChaining/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä½ æ˜¯å¦ä¹Ÿç»å¸¸è¢«ä¸‹é¢è¿™ç§æŠ¥é”™æ•´å¾—æŠ“ç‹‚ï¼Ÿ</p><ul><li>â€œTypeError: Cannot read property *** of undefinedâ€</li><li>â€œTypeError: Cannot read property *** of nullâ€</li></ul><p>é€šå¸¸è¿™ç§æŠ¥é”™ï¼Œåœ¨æ§åˆ¶å°æ‰“å°çš„éƒ½æ˜¯å †æ ˆä¿¡æ¯ï¼Œå¾€å¾€å¾ˆéš¾å®šä½åˆ°å…·ä½“ä½ç½®ï¼Œè€Œä¸”è¿™ç§æŠ¥é”™ä¿¡æ¯æ˜¯å¾ˆå®¹æ˜“å¤å‘çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç»å¸¸è„‘ç¥è´¹å¿ƒçš„å»ä¸€æ¬¡åˆä¸€æ¬¡çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ˜¯ä¸€ä¸ªå‰ç«¯é€šç—…å¤§å®¶éƒ½ä¼šé‡åˆ°ï¼Œä»Šå¤©è¿™ç¯‡æ–‡ç« çš„ä¸»é¢˜å°±æ˜¯æ‰¾ä¸€ä¸ªæ–¹æ³•æ¥å®Œç¾è§£å†³è¿™ä¸ªé—®é¢˜ï¼</p><h1 id="åˆ†æåŸå› "><a href="#åˆ†æåŸå› " class="headerlink" title="åˆ†æåŸå› "></a>åˆ†æåŸå› </h1><p>å…ˆçœ‹ä¸€æ®µä»£ç :</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> firstName = message.body.user.firstName;</span><br></pre></td></tr></table></figure><ul><li>å‡è®¾ <code>message</code> ä¸‹é¢å¹¶æ²¡æœ‰ <code>body</code>ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™: <code>Cannot read property user of undefined</code></li><li>å‡è®¾ <code>message</code> ä¸‹é¢æœ‰ <code>body</code> ä½†æ˜¯å€¼ä¸º <code>null</code>ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™: <code>Cannot read property user of null</code></li><li>åŒç†å‡è®¾ <code>meseage.body</code> æ²¡é—®é¢˜ï¼Œä½†æ˜¯ <code>user</code> æ²¡æœ‰å®šä¹‰æˆ–è€…å€¼ä¸º <code>null</code> ä¼šæŠ¥é”™ <code>Cannot read property firstName of undefined/null</code></li></ul><p>æ—¥å¸¸å¼€å‘ä¸­ï¼Œå‰ç«¯é€šè¿‡æ¥å£è·å–åç«¯æ•°æ®åï¼Œå¾€å¾€éƒ½ä¼šå‡ºç°è¿™æ ·çš„èµ‹å€¼ï¼Œè€Œåç«¯å¦‚æœä¸ä¸¥æ ¼æŒ‰ç…§æŠ¥æ–‡æ¥è¿”å›æ•°æ®ç»“æ„ï¼Œå°±ä¼šå‡ºç°è¿™ç§é—®é¢˜ï¼</p><p>æ¯”å¦‚: åç«¯è§‰å¾— <code>user</code> ä¸‹é¢åªæœ‰ <code>firstName</code> ä¸€ä¸ªå±æ€§ï¼Œå¦‚æœ <code>firstName</code> æœ‰å€¼ï¼Œé‚£å°±å®Œæ•´è¿”å›ï¼Œå¦‚æœæ²¡æœ‰å€¼ï¼Œç›´æ¥è¿ <code>user</code> è¿™ä¸€å±‚éƒ½å»æ‰ä¸è¿”å›ã€‚</p><ul><li>å½“ <code>firstName</code> æœ‰å€¼æ—¶è¿”å›æ•°æ®</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;body&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;user&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;firstName&quot;</span>: <span class="string">&quot;Liu&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å½“ <code>firstName</code> æ²¡æœ‰å€¼æ—¶è¿”å›æ•°æ®</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;body&quot;</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆ"><a href="#ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆ" class="headerlink" title="ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆ"></a>ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆ</h1><p>æ‰€ä»¥æˆ‘ä»¬å¦‚æœè¯»å–å¯¹è±¡å†…éƒ¨çš„æŸä¸ªå±æ€§ï¼Œå¾€å¾€éœ€è¦åˆ¤æ–­ä¸€ä¸‹è¯¥å¯¹è±¡æ˜¯å¦å­˜åœ¨ã€‚å®‰å…¨çš„å†™æ³•æ˜¯å†™æˆä¸‹é¢è¿™æ ·ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­£ç¡®çš„å†™æ³•</span></span><br><span class="line"><span class="keyword">const</span> firstName = (message</span><br><span class="line">  &amp;&amp; message.body</span><br><span class="line">  &amp;&amp; message.body.user</span><br><span class="line">  &amp;&amp; message.body.user.firstName) || <span class="string">&#x27;default&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œ<code>firstName</code> å±æ€§åœ¨å¯¹è±¡çš„ç¬¬å››å±‚ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­å››æ¬¡ï¼Œæ¯ä¸€å±‚æ˜¯å¦æœ‰å€¼ï¼Œéå¸¸çš„ç¹çä¸”æœ‰å¤±ä¼˜é›…ï¼Œè€Œä¸”ç»å¸¸æ˜¯åœ¨å‰åç«¯è”è°ƒçš„æ—¶å€™æ˜¯æœ‰å€¼çš„ï¼Œæˆ‘ä»¬å°±ç›´æ¥èµ‹å€¼æ¼äº†åˆ¤æ–­ä¹Ÿæ²¡é—®é¢˜<code>ï¼ˆå¾ˆå®¹æ˜“å¿˜è®°å†™åˆ¤æ–­ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¿™ä¸ªé—®é¢˜å¾ˆå®¹æ˜“å¤å‘çš„åŸå› ï¼‰</code>ï¼Œä½†æ˜¯ç­‰åˆ°ä¸Šçº¿ä¹‹åï¼Œæ•°æ®å˜æˆæ²¡æœ‰å€¼äº†ï¼Œåç«¯è¿”å›çš„æ•°æ®ç»“æ„å˜åŠ¨äº†ï¼Œæ‰€ä»¥å¯¼è‡´æŠ¥é”™ï¼Œè€Œä¸”è¿˜ä¸å®¹æ˜“å®šä½å…·ä½“ä½ç½®ï¼Œå¾ˆéš¾æ’æŸ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬å¸Œæœ›åç«¯å°±ç®—æ²¡æœ‰å€¼ï¼Œä¹Ÿä¿ç•™æ•°æ®ç»“æ„ï¼Œè¿”å›å®Œæ•´çš„æŠ¥æ–‡ç»“æ„, æ²¡æœ‰å€¼å°±çº¦å®šä¸€ä¸ª <code>ç©ºå­—ç¬¦ä¸²</code> æˆ–è€… <code>null</code>ï¼Œè¿™æ ·å°±ä¸éœ€è¦ä¸€å±‚ä¸€å±‚å»åˆ¤æ–­ï¼Œæ¯”å¦‚è¿™æ ·:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;body&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;user&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;firstName&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="é“¾åˆ¤æ–­è¿ç®—ç¬¦"><a href="#é“¾åˆ¤æ–­è¿ç®—ç¬¦" class="headerlink" title="é“¾åˆ¤æ–­è¿ç®—ç¬¦"></a>é“¾åˆ¤æ–­è¿ç®—ç¬¦</h1><p>ä¸Šé¢ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼Œç¬¬ä¸€ç§å±‚å±‚åˆ¤æ–­éå¸¸éº»çƒ¦ã€ä¸å¤Ÿä¼˜é›…ã€å®¹æ˜“é—å¿˜ï¼Œç¬¬äºŒç§åç«¯æŠ¥æ–‡åŸºäºæ¡†æ¶åŸå› æˆ–è€…ä¸ªäººä¹ æƒ¯åŸå› ï¼Œæ•°æ®ç»“æ„ä¹Ÿä¸å¯æ§ï¼Œå³ä½¿å¯æ§ä¹Ÿéº»çƒ¦ä¸”ä¸å®‰å…¨ï¼Œå› æ­¤ <code>ES2020</code> å¼•å…¥äº† <code>é“¾åˆ¤æ–­è¿ç®—ç¬¦</code>ï¼ˆoptional chaining operatorï¼‰<code>?.</code>ï¼Œç®€åŒ–ä¸Šé¢çš„å†™æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> firstName = message?.body?.user?.firstName</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä½¿ç”¨äº† <code>?.</code> è¿ç®—ç¬¦ï¼Œç›´æ¥åœ¨é“¾å¼è°ƒç”¨çš„æ—¶å€™åˆ¤æ–­ï¼Œå·¦ä¾§çš„å¯¹è±¡æ˜¯å¦ä¸º <code>null</code> æˆ– <code>undefined</code>ã€‚å¦‚æœæ˜¯çš„ï¼Œå°±ä¸å†å¾€ä¸‹è¿ç®— <code>ï¼ˆçŸ­è·¯æœºåˆ¶ï¼‰</code>ï¼Œè€Œæ˜¯è¿”å› <code>undefined</code>ã€‚ä¸‹é¢æ˜¯åˆ¤æ–­å¯¹è±¡æ–¹æ³•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±ç«‹å³æ‰§è¡Œçš„ä¾‹å­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iterator.return?.()</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>iterator.return</code> å¦‚æœæœ‰å®šä¹‰ï¼Œå°±ä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¦åˆ™ <code>iterator.return</code> ç›´æ¥è¿”å› <code>undefined</code>ï¼Œä¸å†æ‰§è¡Œ <code>?.</code> åé¢çš„éƒ¨åˆ†ã€‚</p><h1 id="å¦‚ä½•åœ¨-vue-é¡¹ç›®ä¸­åº”ç”¨è¿™ç§æ–°è¯­æ³•"><a href="#å¦‚ä½•åœ¨-vue-é¡¹ç›®ä¸­åº”ç”¨è¿™ç§æ–°è¯­æ³•" class="headerlink" title="å¦‚ä½•åœ¨ vue é¡¹ç›®ä¸­åº”ç”¨è¿™ç§æ–°è¯­æ³•"></a>å¦‚ä½•åœ¨ vue é¡¹ç›®ä¸­åº”ç”¨è¿™ç§æ–°è¯­æ³•</h1><blockquote><p>åœ¨ <code>vue 3.0</code> åå¯ä»¥ç›´æ¥ä½¿ç”¨ <code>é“¾åˆ¤æ–­è¿ç®—ç¬¦(?.)</code> è¯­æ³•, å¦åˆ™å°±è¦å€ŸåŠ© <code>babel</code> æ’ä»¶è§£æå¸®åŠ©æˆ‘ä»¬è¿›è¡Œä»£ç è½¬æ¢ã€‚</p></blockquote><p>ç”±äº <code>vue 3.0</code> è¿˜æ²¡æœ‰æ™®åŠï¼Œæˆ‘ä»¬è¿˜æ˜¯æœ‰å¿…è¦ç ”ç©¶ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨æ’ä»¶æä¾›è¯­æ³•æ”¯æŒ:</p><ul><li>æ’ä»¶åç§° <a href="https://babeljs.io/docs/en/babel-plugin-proposal-optional-chaining">@babel/plugin-proposal-optional-chaining</a></li><li>æ–‡æ¡£åœ°å€ <a href="https://babeljs.io/docs/en/babel-plugin-proposal-optional-chaining">https://babeljs.io/docs/en/babel-plugin-proposal-optional-chaining</a></li></ul><h2 id="å‡çº§-babel"><a href="#å‡çº§-babel" class="headerlink" title="å‡çº§ babel"></a>å‡çº§ babel</h2><p><code>vue-cli</code> æ­å»ºçš„é¡¹ç›®ä¸­ï¼Œ<code>babel</code> ç‰ˆæœ¬é»˜è®¤æ˜¯å°äº <code>7</code> çš„ï¼Œä¸ºäº†ä½¿ç”¨ <code>@babel/plugin-proposal-optional-chaining</code>ï¼Œ æˆ‘ä»¬éœ€è¦å…ˆå°† <code>babel</code> å‡çº§åˆ° <code>7</code>ï¼Œå®˜æ–¹æä¾›äº†ä¸€ä¸ªå·¥å…· <code>babel-upgrade</code>, å¯¹äºå·²æœ‰é¡¹ç›®ï¼Œåªéœ€è¦è¿è¡Œä¸€è¡Œå‘½ä»¤å°±å¯ä»¥å‡çº§åˆ° <code>7</code> ç‰ˆæœ¬ä»¥ä¸Šäº†ï¼Œå¦‚æœæ‰¾ä¸åˆ° <code>npx</code> å‘½ä»¤å°±æ£€æŸ¥ä¸€ä¸‹ <code>npm</code> ç‰ˆæœ¬æ˜¯å¦ &lt; <code>5.2.0</code>.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx babel-upgrade --write --install  </span><br></pre></td></tr></table></figure><h2 id="å…¼å®¹ç‰ˆæœ¬"><a href="#å…¼å®¹ç‰ˆæœ¬" class="headerlink" title="å…¼å®¹ç‰ˆæœ¬"></a>å…¼å®¹ç‰ˆæœ¬</h2><p>å‡çº§å®Œä¹‹åè¿è¡Œé¡¹ç›®å¯èƒ½ä¼šå‡ºç°ä¸€äº›æŠ¥é”™ä¿¡æ¯:</p><ul><li>Cannot find module â€˜babel-plugin-syntax-jsxâ€™</li><li>Cannot find module â€˜@babel/coreâ€™</li></ul><p>æ ¹æ®æŠ¥é”™ä¿¡æ¯ï¼Œæˆ‘ä»¬ç¨ä½œè°ƒæ•´ï¼Œå°† <code>@babel/plugin-syntax-jsx</code> å¸è½½ï¼Œæ›´æ¢æˆ <code>babel-plugin-syntax-jsx</code>ï¼Œå°† <code>@babel/polyfill</code> å¸è½½ï¼Œæ›´æ¢æˆ <code>babel-polyfill</code>ï¼Œå†å®‰è£…ä¸€ä¸ª <code>@babel/runtime-corejs2</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall @babel/plugin-syntax-jsx </span><br><span class="line">npm install babel-plugin-syntax-jsx --save-dev</span><br><span class="line"></span><br><span class="line">npm uninstall @babel/polyfill</span><br><span class="line">npm install --save babel-polyfill</span><br><span class="line"></span><br><span class="line">npm install --save @babel/runtime-corejs2 -dev</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><p>æœ€ååœ¨ <code>.babelrc</code> æ–‡ä»¶ä¸­æ³¨å…¥æ’ä»¶, åœ¨ <code>plugins</code> æ•°ç»„ä¸­ æ’å…¥ <code>&quot;@babel/plugin-proposal-optional-chaining&quot;</code>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;presets&quot;</span>: [</span><br><span class="line">        [</span><br><span class="line">            <span class="string">&quot;@babel/preset-env&quot;</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;modules&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">&quot;targets&quot;</span>: &#123;</span><br><span class="line">                    <span class="attr">&quot;browsers&quot;</span>: [</span><br><span class="line">                        <span class="string">&quot;&gt; 1%&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;last 2 versions&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;not ie &lt;= 8&quot;</span></span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    ],</span><br><span class="line">        <span class="attr">&quot;plugins&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;transform-vue-jsx&quot;</span>,</span><br><span class="line">        [</span><br><span class="line">            <span class="string">&quot;@babel/plugin-transform-runtime&quot;</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;corejs&quot;</span>: <span class="number">2</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;@babel/plugin-syntax-dynamic-import&quot;</span>,</span><br><span class="line">        <span class="string">&quot;@babel/plugin-syntax-import-meta&quot;</span>,</span><br><span class="line">        <span class="string">&quot;@babel/plugin-proposal-class-properties&quot;</span>,</span><br><span class="line">        <span class="string">&quot;@babel/plugin-proposal-json-strings&quot;</span>,</span><br><span class="line">        [</span><br><span class="line">            <span class="string">&quot;@babel/plugin-proposal-decorators&quot;</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;legacy&quot;</span>: <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;@babel/plugin-proposal-function-sent&quot;</span>,</span><br><span class="line">        <span class="string">&quot;@babel/plugin-proposal-export-namespace-from&quot;</span>,</span><br><span class="line">        <span class="string">&quot;@babel/plugin-proposal-numeric-separator&quot;</span>,</span><br><span class="line">        <span class="string">&quot;@babel/plugin-proposal-throw-expressions&quot;</span>, </span><br><span class="line">        <span class="string">&quot;@babel/plugin-proposal-optional-chaining&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å®Œæˆä¸Šè¿°æ­¥éª¤ä¹‹åï¼Œä¸è¦å¿˜è®°é‡å¯é¡¹ç›®ï¼Œé€šå¸¸é…ç½®æ–‡ä»¶æœ‰æ”¹åŠ¨éƒ½éœ€è¦é‡å¯é¡¹ç›®æ‰ç”Ÿæ•ˆï¼Œç„¶åå°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨ <code>é“¾åˆ¤æ–­è¿ç®—ç¬¦(?.)</code> è¯­æ³•äº†ï¼Œæ­£å¼å‘Šåˆ«é‚£äº›ä¸€å±‚ä¸€å±‚çš„åˆ¤æ–­ï¼Œè¿˜æœ‰åå¤å‡ºç°çš„ <code>&quot;TypeError: Cannot read property *** of undefined/null&quot;</code>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES2020 </tag>
            
            <tag> Babel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS æ¨¡å—åŒ–è§„èŒƒå…¨é¢è§£è¯»</title>
      <link href="2021/03/25/commonjs-ES6/"/>
      <url>2021/03/25/commonjs-ES6/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>CommonJS å¬è¯´è¿‡ï¼ŸAMD å¬è¯´è¿‡ï¼ŒCMDä¹Ÿå¬è¯´è¿‡ï¼Œè¿˜æœ‰ä¸ªES6 æ¨¡å—åŒ–ã€‚å½“é¡¹ç›®é‡Œä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯å¦çœŸæ­£çŸ¥é“ï¼Œä½ ç”¨çš„åˆ°åº•åŸºäºå“ªä¸ªè§„èŒƒçš„æ¨¡å—åŒ–ï¼Ÿ</p></blockquote><p>Ps: ç”±äºæ–‡ç« å¤ªé•¿ï¼Œä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œå»ºè®®å…ˆçœ‹å³ä¾§æ–‡ç« ç›®å½•ï¼Œäº†è§£å¤§çº²ä¹‹åé€æ­¥é˜…è¯»ã€‚</p><h2 id="ç¬¬ä¸€ç« -è¿½æº¯æ ¹æºï¼Œä¸ºä½•å‰ç«¯éœ€è¦æ¨¡å—åŒ–ï¼Ÿ"><a href="#ç¬¬ä¸€ç« -è¿½æº¯æ ¹æºï¼Œä¸ºä½•å‰ç«¯éœ€è¦æ¨¡å—åŒ–ï¼Ÿ" class="headerlink" title="ç¬¬ä¸€ç« : è¿½æº¯æ ¹æºï¼Œä¸ºä½•å‰ç«¯éœ€è¦æ¨¡å—åŒ–ï¼Ÿ"></a>ç¬¬ä¸€ç« : è¿½æº¯æ ¹æºï¼Œä¸ºä½•å‰ç«¯éœ€è¦æ¨¡å—åŒ–ï¼Ÿ</h2><p><strong>ä¸ºäº†å½»åº•å¼„æ¸…æ¥šæ¨¡å—åŒ–è¿™ä¸ªä¸œè¥¿ï¼Œæˆ‘ä»¬è¦ä»æœ€å¼€å§‹æ¨¡å—åŒ–çš„èµ·æºè¯´èµ·ã€‚</strong></p><h3 id="æ— æ¨¡å—åŒ–çš„åŸå§‹æ—¶ä»£"><a href="#æ— æ¨¡å—åŒ–çš„åŸå§‹æ—¶ä»£" class="headerlink" title="æ— æ¨¡å—åŒ–çš„åŸå§‹æ—¶ä»£"></a>æ— æ¨¡å—åŒ–çš„åŸå§‹æ—¶ä»£</h3><p>æœ€å¼€å§‹ <code>js</code> åªæ˜¯ä½œä¸ºä¸€ä¸ªè„šæœ¬è¯­è¨€æ¥ä½¿ç”¨ï¼Œåšä¸€äº›ç®€å•çš„è¡¨å•æ ¡éªŒï¼ŒåŠ¨ç”»å®ç°ç­‰ç­‰ã€‚ ä»£ç éƒ½æ˜¯è¿™æ ·çš„,ç›´æ¥æŠŠä»£ç å†™è¿› <code>&lt;script&gt;</code> æ ‡ç­¾é‡Œï¼Œä»£ç é‡éå¸¸å°‘ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"> <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">   <span class="comment">// ...</span></span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="comment">// ...</span></span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">   <span class="comment">// ...</span></span><br><span class="line"> &#125;</span><br><span class="line">    </span><br><span class="line"> <span class="built_in">document</span>.getElementById(<span class="string">&#x27;button&#x27;</span>).onClick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">// ...</span></span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="ä»£ç é‡å‰§å¢å¸¦æ¥çš„ç¾éš¾æ€§é—®é¢˜"><a href="#ä»£ç é‡å‰§å¢å¸¦æ¥çš„ç¾éš¾æ€§é—®é¢˜" class="headerlink" title="ä»£ç é‡å‰§å¢å¸¦æ¥çš„ç¾éš¾æ€§é—®é¢˜"></a>ä»£ç é‡å‰§å¢å¸¦æ¥çš„ç¾éš¾æ€§é—®é¢˜</h3><blockquote><p>åæ¥éšç€ajaxå¼‚æ­¥è¯·æ±‚çš„å‡ºç°ï¼Œå‰ç«¯èƒ½åšçš„äº‹æƒ…è¶Šæ¥è¶Šå¤šï¼Œä»£ç é‡é£é€Ÿå¢é•¿ã€‚ ä¹Ÿæš´éœ²å‡ºäº†ä¸€äº›é—®é¢˜ã€‚</p></blockquote><p><strong>å…¨å±€å˜é‡çš„ç¾éš¾</strong></p><p>è¿™ä¸ªéå¸¸å¥½ç†è§£ï¼Œå°±æ˜¯å¤§å®¶çš„ä»£ç éƒ½åœ¨ä¸€ä¸ªä½œç”¨åŸŸï¼Œä¸åŒçš„äººå®šä¹‰çš„å˜é‡å¯èƒ½ä¼šé‡å¤ä»è€Œäº§ç”Ÿè¦†ç›–ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&#x27;LiuKun&#x27;</span>;</span><br><span class="line"></span><br><span class="line">name =  <span class="string">&#x27;ithhx&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(name === <span class="string">&#x27;LiuKun&#x27;</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¾èµ–å…³ç³»ç®¡ç†çš„ç¾éš¾</strong></p><p>å¦‚æœ c ä¾èµ–äº† bï¼Œb ä¾èµ–äº† cï¼Œåˆ™ script å¼•å…¥çš„é¡ºåºå¿…é¡»è¢«ä¾èµ–çš„æ”¾åœ¨å‰é¢ï¼Œè¯•æƒ³è¦æ˜¯æœ‰å‡ åä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬éƒ½è¦å¼„æ¸…æ¥šæ–‡ä»¶ä¾èµ–å…³ç³»ç„¶åæ‰‹åŠ¨ï¼ŒæŒ‰é¡ºåºå¼•å…¥ï¼Œæ— ç–‘è¿™æ˜¯éå¸¸ç—›è‹¦çš„äº‹æƒ…ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;a.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;b.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;c.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æ—©æœŸçš„è§£å†³æ–¹å¼"><a href="#æ—©æœŸçš„è§£å†³æ–¹å¼" class="headerlink" title="æ—©æœŸçš„è§£å†³æ–¹å¼"></a>æ—©æœŸçš„è§£å†³æ–¹å¼</h3><ul><li>é—­åŒ…ï¼Œä½¿ <code>function</code> å†…éƒ¨çš„å˜é‡å¯¹å…¨å±€éšè—ï¼Œè¾¾åˆ°äº†å°è£…çš„ç›®çš„ï¼Œä½†æ˜¯æœ€å¤–å±‚æ¨¡å—åè¿˜æ˜¯æš´éœ²åœ¨å…¨å±€ï¼Œè¦æ˜¯æ¨¡å¿«è¶Šæ¥è¶Šå¤šï¼Œä¾ç„¶ä¼šå­˜åœ¨æ¨¡å—åå†²çªçš„é—®é¢˜ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span> = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> a,b;</span><br><span class="line">   <span class="keyword">return</span> &#123;</span><br><span class="line">      add: <span class="function"><span class="keyword">function</span> (<span class="params">c</span>)</span>&#123;</span><br><span class="line">         <span class="keyword">return</span> a + b + c;</span><br><span class="line">      &#125;;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure><ul><li>å‘½åç©ºé—´</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.tools.module.add = <span class="function"><span class="keyword">function</span>(<span class="params">c</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> app.tools.moduleA.a + c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ¯«æ— ç–‘é—®ä»¥ä¸Šä¸¤ç§æ–¹æ³•éƒ½ä¸å¤Ÿä¼˜é›…ã€‚é‚£ä¹ˆï¼Œæ¨¡å—åŒ–åˆ°åº•éœ€è¦è§£å†³ä»€ä¹ˆé—®é¢˜æå‘¢ï¼Ÿæˆ‘ä»¬å…ˆè®¾æƒ³ä¸€ä¸‹å¯èƒ½æœ‰ä»¥ä¸‹å‡ ç‚¹:</strong></p><ul><li>å®‰å…¨çš„åŒ…è£…ä¸€ä¸ªæ¨¡å—çš„ä»£ç ï¼Œé¿å…å…¨å±€æ±¡æŸ“</li><li>å”¯ä¸€æ ‡è¯†ä¸€ä¸ªæ¨¡å—</li><li>ä¼˜é›…çš„å°†æ¨¡å—apiæš´éœ²å‡ºå»</li><li>æ–¹ä¾¿çš„ä½¿ç”¨æ¨¡å—</li></ul><h2 id="ç¬¬äºŒç« -æœåŠ¡ç«¯æ¨¡å—åŒ–-CommonJS"><a href="#ç¬¬äºŒç« -æœåŠ¡ç«¯æ¨¡å—åŒ–-CommonJS" class="headerlink" title="ç¬¬äºŒç« : æœåŠ¡ç«¯æ¨¡å—åŒ– CommonJS"></a>ç¬¬äºŒç« : æœåŠ¡ç«¯æ¨¡å—åŒ– CommonJS</h2><blockquote><p>Nodejs å‡ºç°å¼€åˆ›äº†ä¸€ä¸ªæ–°çš„çºªå…ƒï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ javascript å†™æœåŠ¡å™¨ä»£ç ï¼Œå¯¹äºæœåŠ¡ç«¯è€Œè¨€å¿…ç„¶æ˜¯éœ€è¦æ¨¡å—åŒ–çš„ã€‚</p></blockquote><h3 id="Nodejs-å’Œ-CommonJS-çš„å…³ç³»"><a href="#Nodejs-å’Œ-CommonJS-çš„å…³ç³»" class="headerlink" title="Nodejs å’Œ CommonJS çš„å…³ç³»"></a>Nodejs å’Œ CommonJS çš„å…³ç³»</h3><ul><li><code>Nodejs</code> çš„æ¨¡å—åŒ–èƒ½ä¸€ç§æˆç†Ÿçš„å§¿æ€å‡ºç°ç¦»ä¸å¼€ <code>CommonJS</code> çš„è§„èŒƒçš„å½±å“</li><li>åœ¨æœåŠ¡å™¨ç«¯ <code>CommonJS</code> èƒ½ä»¥ä¸€ç§å¯»å¸¸çš„å§¿æ€å†™è¿›å„ä¸ªå…¬å¸çš„é¡¹ç›®ä»£ç ä¸­ï¼Œç¦»ä¸å¼€ <code>Nodejs</code> çš„ä¼˜å¼‚è¡¨ç°</li><li><code>Nodejs</code> å¹¶éå®Œå…¨æŒ‰ç…§è§„èŒƒå®ç°ï¼Œé’ˆå¯¹æ¨¡å—è§„èŒƒè¿›è¡Œäº†ä¸€å®šçš„å–èˆï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº†å°‘è®¸è‡ªèº«ç‰¹æ€§</li></ul><h3 id="CommonJS-è§„èŒƒç®€ä»‹"><a href="#CommonJS-è§„èŒƒç®€ä»‹" class="headerlink" title="CommonJS è§„èŒƒç®€ä»‹"></a>CommonJS è§„èŒƒç®€ä»‹</h3><blockquote><p>CommonJS å¯¹æ¨¡å—çš„å®šä¹‰éå¸¸ç®€å•ï¼Œä¸»è¦åˆ†ä¸º <code>æ¨¡å—å¼•ç”¨</code>ï¼Œ<code>æ¨¡å—å®šä¹‰</code> å’Œ <code>æ¨¡å—æ ‡è¯†</code> 3 éƒ¨åˆ†</p></blockquote><h4 id="æ¨¡å—å¼•ç”¨"><a href="#æ¨¡å—å¼•ç”¨" class="headerlink" title="æ¨¡å—å¼•ç”¨"></a>æ¨¡å—å¼•ç”¨</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> add = <span class="built_in">require</span>(<span class="string">&#x27;./add.js&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> config = <span class="built_in">require</span>(<span class="string">&#x27;config.js&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="æ¨¡å—å®šä¹‰"><a href="#æ¨¡å—å®šä¹‰" class="headerlink" title="æ¨¡å—å®šä¹‰"></a>æ¨¡å—å®šä¹‰</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports.add = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å¼•å…¥æ¨¡å—å¹¶å¯¼å‡ºå¦ä¸€ä¸ªæ¨¡å—</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> add = <span class="built_in">require</span>(<span class="string">&#x27;./add.js&#x27;</span>);</span><br><span class="line"><span class="built_in">module</span>.exports.increment = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> add(val, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤§å®¶å¯èƒ½ä¼šç–‘æƒ‘ï¼Œå¹¶æ²¡æœ‰å®šä¹‰ moduleï¼Œrequire è¿™ä¸¤ä¸ªå±æ€§æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿ å…¶å®ï¼Œä¸€ä¸ªæ–‡ä»¶ä»£è¡¨ä¸€ä¸ªæ¨¡å—ï¼Œä¸€ä¸ªæ¨¡å—é™¤äº†è‡ªå·±çš„å‡½æ•°ä½œç”¨åŸŸä¹‹å¤–ï¼Œæœ€å¤–å±‚è¿˜æœ‰ä¸€ä¸ªæ¨¡å—ä½œç”¨åŸŸï¼Œmodule å°±æ˜¯ä»£è¡¨è¿™ä¸ªæ¨¡å—ï¼Œexports æ˜¯ module çš„å±æ€§ã€‚require ä¹Ÿåœ¨è¿™ä¸ªæ¨¡å—çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œç”¨æ¥å¼•å…¥å¤–éƒ¨æ¨¡å—ã€‚</p><h4 id="æ¨¡å—æ ‡è¯†"><a href="#æ¨¡å—æ ‡è¯†" class="headerlink" title="æ¨¡å—æ ‡è¯†"></a>æ¨¡å—æ ‡è¯†</h4><p>æ¨¡å—æ ‡è¯†å°±æ˜¯ <code>require()</code> å‡½æ•°çš„å‚æ•°ï¼Œè§„èŒƒæ˜¯è¿™æ ·çš„ï¼š</p><ul><li>å¿…é¡»æ˜¯å­—ç¬¦ä¸²</li><li>å¯ä»¥æ˜¯ä»¥./ ../å¼€å¤´çš„ç›¸å¯¹è·¯å¾„</li><li>å¯ä»¥æ˜¯ç»å¯¹è·¯å¾„</li><li>å¯ä»¥çœç•¥åç¼€å</li></ul><blockquote><p>CommonJS çš„æ¨¡å—è§„èŒƒå®šä¹‰æ¯”è¾ƒç®€å•ï¼Œæ„ä¹‰åœ¨äºå°†ç±»èšçš„æ–¹æ³•å’Œå˜é‡ç­‰é™å®šåœ¨ç§æœ‰çš„ä½œç”¨åŸŸä¸­ï¼ŒåŒæ—¶æ”¯æŒå¼•å…¥å’Œå¯¼å‡ºå°†ä¸Šä¸‹æ¸¸æ¨¡å—æ— ç¼è¡”æ¥ï¼Œæ¯ä¸ªæ¨¡å—å…·æœ‰ç‹¬ç«‹çš„ç©ºé—´ï¼Œå®ƒä»¬äº’ä¸å¹²æ‰°ã€‚</p></blockquote><h3 id="Nodejs-çš„æ¨¡å—åŒ–å®ç°"><a href="#Nodejs-çš„æ¨¡å—åŒ–å®ç°" class="headerlink" title="Nodejs çš„æ¨¡å—åŒ–å®ç°"></a>Nodejs çš„æ¨¡å—åŒ–å®ç°</h3><blockquote><p>Node ä¸­ä¸€ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ª æ¨¡å—ï¼ˆModuleï¼‰çš„å®ä¾‹</p></blockquote><p><strong>Node ä¸­ Module æ„é€ å‡½æ•°ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Module</span>ï¼ˆ<span class="title">id</span>, <span class="title">parent</span>ï¼‰</span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.id = id;</span><br><span class="line">  <span class="built_in">this</span>.exports = &#123;&#125;;</span><br><span class="line">  <span class="built_in">this</span>.parent = parent;</span><br><span class="line">  <span class="keyword">if</span>(parent &amp;&amp; parent.children) &#123;</span><br><span class="line">    parent.children.push(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">this</span>.filename = <span class="literal">null</span>;</span><br><span class="line">  <span class="built_in">this</span>.loaded = <span class="literal">false</span>;</span><br><span class="line">  <span class="built_in">this</span>.children = [];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®ä¾‹åŒ–ä¸€ä¸ªæ¨¡å—</span></span><br><span class="line"> <span class="keyword">var</span> <span class="built_in">module</span> = <span class="keyword">new</span> Module(filename, parent);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ id æ˜¯æ¨¡å— idï¼Œexports æ˜¯è¿™ä¸ªæ¨¡å—è¦æš´éœ²å‡ºæ¥çš„ apiï¼Œparent æ˜¯çˆ¶çº§æ¨¡å—ï¼Œloaded è¡¨ç¤ºè¿™ä¸ªæ¨¡å—æ˜¯å¦åŠ è½½å®Œæˆï¼Œå› ä¸º CommonJS æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼Œloaded è¡¨ç¤ºæ–‡ä»¶æ˜¯å¦å·²ç»æ‰§è¡Œå®Œæ¯•è¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚</p><h3 id="Node-æ¨¡å—åˆ†ç±»"><a href="#Node-æ¨¡å—åˆ†ç±»" class="headerlink" title="Node æ¨¡å—åˆ†ç±»"></a>Node æ¨¡å—åˆ†ç±»</h3><p>å¦‚å›¾æ‰€ç¤º Node æ¨¡å—ä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ï¼Œ<code>æ ¸å¿ƒæ¨¡å—</code> å’Œ <code>æ–‡ä»¶æ¨¡å—</code>ã€‚<br><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210325173053.png"></p><ul><li><p>æ ¸å¿ƒæ¨¡å—ï¼Œå°±æ˜¯ <code>Node</code> å†…ç½®çš„æ¨¡å—ï¼Œæ¯”å¦‚ <code>http</code>ã€<code>path</code> ç­‰ã€‚åœ¨ <code>Node</code> çš„æºç çš„ç¼–è¯‘æ—¶ï¼Œæ ¸å¿ƒæ¨¡å—å°±ä¸€èµ·è¢«ç¼–è¯‘è¿›äº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ï¼Œéƒ¨åˆ†æ ¸å¿ƒæ¨¡å—(å†…å»ºæ¨¡å—) è¢«ç›´æ¥åŠ è½½è¿›å†…å­˜ä¸­ã€‚</p></li><li><p>æ–‡ä»¶æ¨¡å—ï¼Œå°±æ˜¯å¤–éƒ¨å¼•å…¥çš„æ¨¡å—å¦‚ <code>node_modules</code> é‡Œé€šè¿‡ <code>npm</code> å®‰è£…çš„æ¨¡å—ï¼Œæˆ–è€…æˆ‘ä»¬é¡¹ç›®å·¥ç¨‹é‡Œè‡ªå·±å†™çš„ä¸€ä¸ª <code>js</code> æ–‡ä»¶æˆ–è€… <code>json</code> æ–‡ä»¶ã€‚</p></li></ul><p>åœ¨Nodeæ¨¡å—çš„å¼•å…¥è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬è¦ç»è¿‡ä¸€ä¸‹ä¸‰ä¸ªæ­¥éª¤</p><ul><li>è·¯å¾„åˆ†æ</li><li>æ–‡ä»¶å®šä½</li><li>ç¼–è¯‘æ‰§è¡Œ</li></ul><p><strong>æ ¸å¿ƒæ¨¡å—ä¼šçœç•¥æ–‡ä»¶å®šä½å’Œç¼–è¯‘æ‰§è¡Œè¿™ä¸¤æ­¥ï¼Œå¹¶ä¸”åœ¨è·¯å¾„åˆ†æä¸­ä¼šä¼˜å…ˆåˆ¤æ–­ï¼ŒåŠ è½½é€Ÿåº¦æ¯”ä¸€èˆ¬æ¨¡å—æ›´å¿«ã€‚</strong></p><h3 id="require-æ˜¯å¦‚ä½•åˆ†æè·¯å¾„ï¼Œæ–‡ä»¶å®šä½å¹¶ä¸”ç¼–è¯‘æ‰§è¡Œçš„ï¼Ÿ"><a href="#require-æ˜¯å¦‚ä½•åˆ†æè·¯å¾„ï¼Œæ–‡ä»¶å®šä½å¹¶ä¸”ç¼–è¯‘æ‰§è¡Œçš„ï¼Ÿ" class="headerlink" title="require æ˜¯å¦‚ä½•åˆ†æè·¯å¾„ï¼Œæ–‡ä»¶å®šä½å¹¶ä¸”ç¼–è¯‘æ‰§è¡Œçš„ï¼Ÿ"></a>require æ˜¯å¦‚ä½•åˆ†æè·¯å¾„ï¼Œæ–‡ä»¶å®šä½å¹¶ä¸”ç¼–è¯‘æ‰§è¡Œçš„ï¼Ÿ</h3><h4 id="è·¯å¾„åˆ†æ"><a href="#è·¯å¾„åˆ†æ" class="headerlink" title="è·¯å¾„åˆ†æ"></a>è·¯å¾„åˆ†æ</h4><p>å‰é¢å·²ç»è¯´è¿‡ï¼Œä¸è®ºæ ¸å¿ƒæ¨¡å—è¿˜æ˜¯æ–‡ä»¶æ¨¡å—éƒ½éœ€è¦ç»å†è·¯å¾„åˆ†æè¿™ä¸€æ­¥ï¼Œå½“æˆ‘ä»¬ <code>require</code> ä¸€ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œ<code>Node</code> æ˜¯æ€ä¹ˆåŒºåˆ†æ˜¯ <code>æ ¸å¿ƒæ¨¡å—</code> è¿˜æ˜¯ <code>æ–‡ä»¶æ¨¡å—</code>ï¼Œå¹¶ä¸”è¿›è¡ŒæŸ¥æ‰¾å®šä½å‘¢ï¼Ÿ</p><p>Nodeæ”¯æŒå¦‚ä¸‹å‡ ç§å½¢å¼çš„æ¨¡å—æ ‡è¯†ç¬¦ï¼Œæ¥å¼•å…¥æ¨¡å—ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¸å¿ƒæ¨¡å—</span></span><br><span class="line">----------------------------</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–‡ä»¶æ¨¡å—</span></span><br><span class="line">----------------------------</span><br><span class="line"><span class="comment">// ä»¥.å¼€å¤´çš„ç›¸å¯¹è·¯å¾„ï¼Œï¼ˆå¯ä»¥ä¸å¸¦æ‰©å±•åï¼‰</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;./a.js&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"><span class="comment">// ä»¥..å¼€å¤´çš„ç›¸å¯¹è·¯å¾„ï¼Œï¼ˆå¯ä»¥ä¸å¸¦æ‰©å±•åï¼‰</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;../b.js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥/å¼€å§‹çš„ç»å¯¹è·¯å¾„ï¼Œï¼ˆå¯ä»¥ä¸å¸¦æ‰©å±•åï¼‰</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;/c.js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤–éƒ¨æ¨¡å—åç§°</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤–éƒ¨æ¨¡å—æŸä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;codemirror/addon/merge/merge.js&#x27;</span>);</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆå¯¹äºè¿™ä¸ªéƒ½æ˜¯å­—ç¬¦ä¸²çš„å¼•å…¥æ–¹å¼ï¼Œ <code>Node</code> ä¼šä¼˜å…ˆå»å†…å­˜ä¸­æŸ¥æ‰¾åŒ¹é… <code>æ ¸å¿ƒæ¨¡å—</code>ï¼Œå¦‚æœåŒ¹é…æˆåŠŸä¾¿ä¸ä¼šå†ç»§ç»­æŸ¥æ‰¾</p><ol><li>æ¯”å¦‚ <code>require</code>, <code>http</code> æ¨¡å—çš„æ—¶å€™ï¼Œä¼šä¼˜å…ˆä» <code>æ ¸å¿ƒæ¨¡å—</code> é‡Œå»æˆåŠŸåŒ¹é…, å¦‚æœ <code>æ ¸å¿ƒæ¨¡å—</code> æ²¡æœ‰åŒ¹é…æˆåŠŸï¼Œä¾¿å½’ç±»ä¸º <code>æ–‡ä»¶æ¨¡å—</code>;</li><li>ä»¥ <code>.</code>ã€<code>..</code> å’Œ <code>/</code> å¼€å¤´çš„æ ‡è¯†ç¬¦ï¼Œ<code>require</code> éƒ½ä¼šæ ¹æ®å½“å‰æ–‡ä»¶è·¯å¾„å°†è¿™ä¸ªç›¸å¯¹è·¯å¾„æˆ–è€…ç»å¯¹è·¯å¾„è½¬åŒ–ä¸ºçœŸå®è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¹³æ—¶æœ€å¸¸è§çš„ä¸€ç§è·¯å¾„è§£æ;</li><li>éè·¯å¾„å½¢å¼çš„æ–‡ä»¶æ¨¡å—, å¦‚ä¸Šé¢çš„ <code>express</code> å’Œ <code>codemirror/addon/merge/merge.js</code>ï¼Œè¿™ç§æ¨¡å—æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶æ¨¡å—ï¼Œä¸€èˆ¬ç§°ä¸º <code>è‡ªå®šä¹‰æ¨¡å—</code>ã€‚ <code>è‡ªå®šä¹‰æ¨¡å—</code> çš„æŸ¥æ‰¾æœ€è´¹æ—¶ï¼Œå› ä¸ºå¯¹äºè‡ªå®šä¹‰æ¨¡å—æœ‰ä¸€ä¸ªæ¨¡å—è·¯å¾„ï¼Œ<code>Node</code> ä¼šæ ¹æ®è¿™ä¸ªæ¨¡å—è·¯å¾„ä¾æ¬¡é€’å½’æŸ¥æ‰¾ã€‚</li></ol><p><strong>æ¨¡å—è·¯å¾„</strong><br><code>Node</code> çš„æ¨¡å—è·¯å¾„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¨¡å—è·¯å¾„å­˜æ”¾åœ¨ <code>module.paths</code> å±æ€§ä¸Šã€‚ æˆ‘ä»¬å¯ä»¥æ‰¾ä¸€ä¸ªåŸºäº <code>npm</code> æˆ–è€… <code>yarn</code> ç®¡ç†é¡¹ç›®ï¼Œåœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>test.js</code> æ–‡ä»¶ï¼Œå†…å®¹ä¸º <code>console.log(module.paths)</code>, å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//test.js</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">module</span>.paths);</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨æ ¹ç›®å½•ä¸‹ç”¨ <code>Node</code> æ‰§è¡Œ:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node test.js</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å·²ç»å°†æ¨¡å—è·¯å¾„æ‰“å°å‡ºæ¥<br><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210325174616.png"></p><p>æ¨¡å—è·¯å¾„çš„ç”Ÿæˆè§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li>å½“å‰è·¯æ–‡ä»¶ä¸‹çš„ node_modules ç›®å½•</li><li>çˆ¶ç›®å½•ä¸‹çš„ node_modules ç›®å½•</li><li>çˆ¶ç›®å½•çš„çˆ¶ç›®å½•ä¸‹çš„ node_modules ç›®å½•</li><li>æ²¿è·¯å¾„å‘ä¸Šé€çº§é€’å½’ï¼Œç›´åˆ°æ ¹ç›®å½•ä¸‹çš„ node_modules ç›®å½•</li></ul><p>å¯¹äºè‡ªå®šä¹‰æ–‡ä»¶æ¯”å¦‚ <code>express</code>ï¼Œå°±ä¼šæ ¹æ®æ¨¡å—è·¯å¾„ä¾æ¬¡é€’å½’æŸ¥æ‰¾ï¼Œåœ¨æŸ¥æ‰¾åŒæ—¶å¹¶è¿›è¡Œæ–‡ä»¶å®šä½ã€‚</p><h4 id="æ–‡ä»¶å®šä½"><a href="#æ–‡ä»¶å®šä½" class="headerlink" title="æ–‡ä»¶å®šä½"></a>æ–‡ä»¶å®šä½</h4><ul><li><p><strong>æ‰©å±•ååˆ†æ</strong>ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ require çš„æ—¶å€™æœ‰æ—¶å€™ä¼šçœç•¥æ‰©å±•åï¼Œé‚£ä¹ˆ Node æ€ä¹ˆå®šä½åˆ°å…·ä½“çš„æ–‡ä»¶å‘¢ï¼Ÿè¿™ç§æƒ…å†µä¸‹ï¼ŒNode ä¼šä¾æ¬¡æŒ‰ç…§.jsã€.jsonã€.node çš„æ¬¡åºä¸€æ¬¡åŒ¹é…ã€‚ï¼ˆ.nodeæ˜¯C++æ‰©å±•æ–‡ä»¶ç¼–è¯‘ä¹‹åç”Ÿæˆçš„æ–‡ä»¶ï¼‰ï¼Œè‹¥æ‰©å±•ååŒ¹é…å¤±è´¥ï¼Œåˆ™ä¼šå°†å…¶å½“æˆä¸€ä¸ªåŒ…æ¥å¤„ç†ï¼Œæˆ‘è¿™é‡Œç›´æ¥ç†è§£ä¸º npm åŒ…ã€‚</p></li><li><p><strong>åŒ…å¤„ç†</strong>ï¼Œå¯¹äºåŒ… Node ä¼šé¦–å…ˆåœ¨å½“å‰åŒ…ç›®å½•ä¸‹æŸ¥æ‰¾ <code>package.json</code>ï¼ˆCommonJSåŒ…è§„èŒƒï¼‰é€šè¿‡ <code>JSON.parse()</code> è§£æå‡ºåŒ…æè¿°å¯¹è±¡ï¼Œæ ¹æ® <code>main</code> å±æ€§æŒ‡å®šçš„å…¥å£æ–‡ä»¶åè¿›è¡Œä¸‹ä¸€æ­¥å®šä½ã€‚ å¦‚æœæ–‡ä»¶ç¼ºå°‘æ‰©å±•åï¼Œå°†æ ¹æ®æ‰©å±•ååˆ†æè§„åˆ™å®šä½ã€‚ è‹¥ <code>main</code> æŒ‡å®šæ–‡ä»¶åé”™è¯¯æˆ–è€…å‹æ ¹æ²¡æœ‰ <code>package.json</code>ï¼ŒNode ä¼šå°†åŒ…ç›®å½•ä¸‹çš„ index å½“åšé»˜è®¤æ–‡ä»¶åã€‚ å†ä¾æ¬¡åŒ¹é… index.jsã€index.jsonã€index.nodeã€‚ è‹¥ä»¥ä¸Šæ­¥éª¤éƒ½æ²¡æœ‰å®šä½æˆåŠŸå°†è¿›å…¥ä¸‹ä¸€ä¸ªæ¨¡å—è·¯å¾„ï¼Œçˆ¶ç›®å½•ä¸‹çš„ <code>node_modules</code> ç›®å½•ä¸‹æŸ¥æ‰¾ï¼Œç›´åˆ°æŸ¥æ‰¾åˆ°æ ¹ç›®å½•ä¸‹çš„ <code>node_modules</code>ï¼Œè‹¥éƒ½æ²¡æœ‰å®šä½åˆ°ï¼Œå°†æŠ›å‡ºæŸ¥æ‰¾å¤±è´¥çš„å¼‚å¸¸ã€‚</p></li></ul><h4 id="æ¨¡å—ç¼–è¯‘"><a href="#æ¨¡å—ç¼–è¯‘" class="headerlink" title="æ¨¡å—ç¼–è¯‘"></a>æ¨¡å—ç¼–è¯‘</h4><ul><li>.js æ–‡ä»¶, é€šè¿‡ <code>fs</code> æ¨¡å—åŒæ­¥è¯»å–æ–‡ä»¶åç¼–è¯‘æ‰§è¡Œ</li><li>.node æ–‡ä»¶, ç”¨ C/C++ ç¼–å†™çš„æ‰©å±•æ–‡ä»¶ï¼Œé€šè¿‡ <code>dlopen()</code> æ–¹æ³•åŠ è½½æœ€åç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ã€‚</li><li>.json, é€šè¿‡ <code>fs</code> æ¨¡å—åŒæ­¥è¯»å–æ–‡ä»¶åï¼Œç”¨ <code>JSON.parse()</code> è§£æè¿”å›ç»“æœã€‚</li><li>å…¶ä½™æ‰©å±•åæ–‡ä»¶ã€‚å®ƒä»¬éƒ½æ˜¯è¢«å½“åš <code>.js</code> æ–‡ä»¶è½½å…¥ã€‚</li></ul><blockquote><p>æ¯ä¸€ä¸ªç¼–è¯‘æˆåŠŸçš„æ–‡ä»¶éƒ½ä¼šå°†å…¶æ–‡ä»¶è·¯å¾„ä½œä¸ºç´¢å¼•ç¼“å­˜åœ¨ <code>Module._cache</code> å¯¹è±¡ä¸Šï¼Œä»¥æé«˜äºŒæ¬¡å¼•å…¥çš„æ€§èƒ½ã€‚</p></blockquote><p><strong>æˆ‘ä»¬è¿˜çŸ¥é“ Node çš„æ¯ä¸ªæ¨¡å—ä¸­éƒ½æœ‰ <code>__filename</code>ã€ <code>__dirname</code> è¿™ä¸¤ä¸ªå˜é‡ï¼Œæ˜¯æ€ä¹ˆæ¥çš„çš„å‘¢ï¼Ÿ</strong></p><ul><li>å…¶å®JavaScriptæ¨¡å—åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼ŒNode å¯¹è·å–çš„ JavaScript æ–‡ä»¶å†…å®¹è¿›è¡Œäº†å¤´éƒ¨å’Œå°¾éƒ¨çš„åŒ…è£…ã€‚åœ¨å¤´éƒ¨æ·»åŠ äº†<code>ï¼ˆfunction ï¼ˆexportsï¼Œ requireï¼Œ moduleï¼Œ__filename, __dirnameï¼‰&#123;</code>ï¼Œè€Œåœ¨å°¾éƒ¨æ·»åŠ äº† <code>&#125;)</code>; ã€‚</li></ul><p>å› æ­¤ä¸€ä¸ªJSæ¨¡å—ç»è¿‡ç¼–è¯‘ä¹‹åä¼šè¢«åŒ…è£…æˆä¸‹é¢çš„æ ·å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="built_in">exports</span>, <span class="built_in">require</span>, <span class="built_in">module</span>, __filename, __dirname</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>) ;</span><br><span class="line">  <span class="built_in">exports</span>.method = <span class="function"><span class="keyword">function</span> (<span class="params">params</span>)</span>&#123;</span><br><span class="line">   ...</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="ç¬¬ä¸‰ç« ï¼šå‰ç«¯æ¨¡å—åŒ–"><a href="#ç¬¬ä¸‰ç« ï¼šå‰ç«¯æ¨¡å—åŒ–" class="headerlink" title="ç¬¬ä¸‰ç« ï¼šå‰ç«¯æ¨¡å—åŒ–"></a>ç¬¬ä¸‰ç« ï¼šå‰ç«¯æ¨¡å—åŒ–</h2><p>å‰é¢æˆ‘ä»¬æ‰€è¯´çš„CommonJSè§„èŒƒï¼Œéƒ½æ˜¯åŸºäºnodeæ¥è¯´çš„ï¼Œæ‰€ä»¥å‰é¢è¯´çš„CommonJSéƒ½æ˜¯é’ˆå¯¹æœåŠ¡ç«¯çš„å®ç°ã€‚</p><h3 id="å‰ç«¯æ¨¡å—åŒ–å’ŒæœåŠ¡ç«¯æ¨¡å—åŒ–æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#å‰ç«¯æ¨¡å—åŒ–å’ŒæœåŠ¡ç«¯æ¨¡å—åŒ–æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="å‰ç«¯æ¨¡å—åŒ–å’ŒæœåŠ¡ç«¯æ¨¡å—åŒ–æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>å‰ç«¯æ¨¡å—åŒ–å’ŒæœåŠ¡ç«¯æ¨¡å—åŒ–æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><ul><li>æœåŠ¡ç«¯åŠ è½½ä¸€ä¸ªæ¨¡å—ï¼Œç›´æ¥å°±ä»ç¡¬ç›˜æˆ–è€…å†…å­˜ä¸­è¯»å–äº†ï¼Œæ¶ˆè€—æ—¶é—´å¯ä»¥å¿½ç•¥ä¸è®¡</li><li>æµè§ˆå™¨éœ€è¦ä»æœåŠ¡ç«¯ä¸‹è½½è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥è¯´å¦‚æœç”¨ <code>CommonJS</code> çš„ <code>require</code> æ–¹å¼åŠ è½½æ¨¡å—ï¼Œéœ€è¦ç­‰ä»£ç æ¨¡å—ä¸‹è½½å®Œæ¯•ï¼Œå¹¶è¿è¡Œä¹‹åæ‰èƒ½å¾—åˆ°æ‰€éœ€è¦çš„ <code>API</code>ã€‚</li></ul><h3 id="ä¸ºä»€ä¹ˆCommonJSä¸é€‚ç”¨äºå‰ç«¯æ¨¡å—ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆCommonJSä¸é€‚ç”¨äºå‰ç«¯æ¨¡å—ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆCommonJSä¸é€‚ç”¨äºå‰ç«¯æ¨¡å—ï¼Ÿ"></a>ä¸ºä»€ä¹ˆCommonJSä¸é€‚ç”¨äºå‰ç«¯æ¨¡å—ï¼Ÿ</h3><p>å¦‚æœæˆ‘ä»¬åœ¨æŸä¸ªä»£ç æ¨¡å—é‡Œä½¿ç”¨ <code>CommonJS</code> çš„æ–¹æ³• <code>require</code> äº†ä¸€ä¸ªæ¨¡å—ï¼Œè€Œè¿™ä¸ªæ¨¡å—éœ€è¦é€šè¿‡ <code>http</code> è¯·æ±‚ä»æœåŠ¡å™¨å»å–ï¼Œå¦‚æœç½‘é€Ÿå¾ˆæ…¢ï¼Œè€Œ <code>CommonJS</code> åˆæ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥å°†é˜»å¡åé¢ä»£ç çš„æ‰§è¡Œï¼Œä»è€Œé˜»å¡æµè§ˆå™¨æ¸²æŸ“é¡µé¢ï¼Œä½¿å¾—é¡µé¢å‡ºç°å‡æ­»çŠ¶æ€ã€‚</p><p>å› æ­¤åé¢ <code>AMDè§„èŒƒ</code> éšç€ <code>RequireJS</code> çš„æ¨å¹¿è¢«æå‡ºï¼Œå¼‚æ­¥æ¨¡å—åŠ è½½ï¼Œä¸é˜»å¡åé¢ä»£ç æ‰§è¡Œçš„æ¨¡å—å¼•å…¥æ–¹å¼ï¼Œå°±æ˜¯è§£å†³äº†å‰ç«¯æ¨¡å—å¼‚æ­¥æ¨¡å—åŠ è½½çš„é—®é¢˜ã€‚</p><h3 id="AMD-Asynchronous-Module-Definition-amp-RequireJS"><a href="#AMD-Asynchronous-Module-Definition-amp-RequireJS" class="headerlink" title="AMD(Asynchronous Module Definition) &amp; RequireJS"></a>AMD(Asynchronous Module Definition) &amp; RequireJS</h3><p><strong>AMD</strong> <code>å¼‚æ­¥æ¨¡å—åŠ è½½è§„èŒƒ</code> ä¸ <code>CommonJS</code> çš„ä¸»è¦åŒºåˆ«å°±æ˜¯å¼‚æ­¥æ¨¡å—åŠ è½½ï¼Œå°±æ˜¯æ¨¡å—åŠ è½½è¿‡ç¨‹ä¸­å³ä½¿ <code>require</code> çš„æ¨¡å—è¿˜æ²¡æœ‰è·å–åˆ°ï¼Œä¹Ÿä¸ä¼šå½±å“åé¢ä»£ç çš„æ‰§è¡Œã€‚</p><p><strong>RequireJS</strong> <code>AMD</code> è§„èŒƒçš„å®ç°ã€‚å…¶å®ä¹Ÿå¯ä»¥è¯´ <code>AMD</code> æ˜¯ <code>RequireJS</code> åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡ºã€‚</p><h4 id="æ¨¡å—å®šä¹‰-1"><a href="#æ¨¡å—å®šä¹‰-1" class="headerlink" title="æ¨¡å—å®šä¹‰"></a>æ¨¡å—å®šä¹‰</h4><ul><li>ç‹¬ç«‹æ¨¡å—çš„å®šä¹‰ï¼Œä¸ä¾èµ–å…¶å®ƒæ¨¡å—çš„æ¨¡å—å®šä¹‰</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç‹¬ç«‹æ¨¡å—å®šä¹‰</span></span><br><span class="line">define(&#123;</span><br><span class="line">  method1: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  method2: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;);  </span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ–è€…</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    method1: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">    method2: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);      </span><br></pre></td></tr></table></figure><ul><li>éç‹¬ç«‹æ¨¡å—ï¼Œä¾èµ–å…¶ä»–æ¨¡å—çš„æ¨¡å—å®šä¹‰</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">&#x27;math&#x27;</span>, <span class="string">&#x27;graph&#x27;</span>], <span class="function"><span class="keyword">function</span>(<span class="params">math, graph</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="æ¨¡å—å¼•ç”¨-1"><a href="#æ¨¡å—å¼•ç”¨-1" class="headerlink" title="æ¨¡å—å¼•ç”¨"></a>æ¨¡å—å¼•ç”¨</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>], <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">  a.method();</span><br><span class="line">  b.method();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="CommonJS-å’Œ-AMD-çš„å¯¹æ¯”"><a href="#CommonJS-å’Œ-AMD-çš„å¯¹æ¯”" class="headerlink" title="CommonJS å’Œ AMD çš„å¯¹æ¯”"></a>CommonJS å’Œ AMD çš„å¯¹æ¯”</h3><ul><li>CommonJS ä¸€èˆ¬ç”¨äºæœåŠ¡ç«¯ï¼ŒAMD ä¸€èˆ¬ç”¨äºæµè§ˆå™¨å®¢æˆ·ç«¯</li><li>CommonJS å’Œ AMD éƒ½æ˜¯è¿è¡Œæ—¶åŠ è½½</li></ul><h3 id="ä»€ä¹ˆæ˜¯è¿è¡Œæ—¶åŠ è½½ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯è¿è¡Œæ—¶åŠ è½½ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯è¿è¡Œæ—¶åŠ è½½ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯è¿è¡Œæ—¶åŠ è½½ï¼Ÿ</h3><p>æˆ‘è§‰å¾—è¦ä»ä¸¤ä¸ªç‚¹ä¸Šå»ç†è§£ï¼š</p><ul><li>CommonJS å’Œ AMD æ¨¡å—éƒ½åªèƒ½åœ¨è¿è¡Œæ—¶ç¡®å®šæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»</li><li>require ä¸€ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œæ¨¡å—ä¼šå…ˆè¢«æ‰§è¡Œï¼Œå¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”è¿™ä¸ªå¯¹è±¡æ˜¯æ•´ä½“åŠ è½½çš„</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//CommonJS æ¨¡å—</span></span><br><span class="line"><span class="keyword">let</span> &#123; basename, dirname, parse &#125; = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç­‰ä»·äº</span></span><br><span class="line"><span class="keyword">let</span> _path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> basename = _path.basename, dirname = _path.dirname, parse = _path.parse;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç å®è´¨æ˜¯æ•´ä½“åŠ è½½ path æ¨¡å—ï¼Œå³åŠ è½½äº† path æ‰€æœ‰æ–¹æ³•ï¼Œç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå†ä»è¿™ä¸ªå¯¹è±¡ä¸Šé¢è¯»å–3ä¸ªæ–¹æ³•ã€‚è¿™ç§åŠ è½½å°±ç§°ä¸º <code>è¿è¡Œæ—¶åŠ è½½</code>ã€‚</p><p>å†çœ‹ä¸‹é¢ä¸€ä¸ªAMDçš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a.js</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;a.jsæ‰§è¡Œ&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    hello: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;hello, a.js&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//b.js</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">&#x27;a&#x27;</span>], <span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;b.js æ‰§è¡Œ&#x27;</span>);</span><br><span class="line">  a.hello();</span><br><span class="line">  $(<span class="string">&#x27;#b&#x27;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    b.hello();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¿è¡Œ b.js æ—¶å¾—åˆ°ç»“æœï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a.jsæ‰§è¡Œ</span></span><br><span class="line"><span class="comment">//b.jsæ‰§è¡Œ</span></span><br><span class="line"><span class="comment">//hello, a.js</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å½“è¿è¡Œ <code>b.js</code> æ—¶ï¼Œå› ä¸º <code>b.js</code> require <code>a.js</code> æ¨¡å—çš„æ—¶å€™å <code>a.js</code> æ¨¡å—ä¼šå…ˆæ‰§è¡Œã€‚éªŒè¯äº†å‰é¢æ‰€è¯´çš„â€requireä¸€ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œæ¨¡å—ä¼šå…ˆè¢«æ‰§è¡Œâ€ã€‚</p><h3 id="CMD-Common-Module-Definition-amp-SeaJS"><a href="#CMD-Common-Module-Definition-amp-SeaJS" class="headerlink" title="CMD(Common Module Definition) &amp; SeaJS"></a>CMD(Common Module Definition) &amp; SeaJS</h3><p><strong>CMD</strong> é€šç”¨æ¨¡å—è§„èŒƒï¼Œç”±å›½å†…çš„ç‰ä¼¯æå‡ºã€‚</p><p><strong>SeaJS</strong> CMDçš„å®ç°ï¼Œå…¶å®ä¹Ÿå¯ä»¥è¯´ <code>CMD</code> æ˜¯ <code>SeaJS</code> åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡ºã€‚</p><p>ä¸ <code>AMDè§„èŒƒ</code> çš„ä¸»è¦åŒºåˆ«åœ¨äºå®šä¹‰æ¨¡å—å’Œä¾èµ–å¼•å…¥çš„éƒ¨åˆ†ã€‚<code>AMD</code> éœ€è¦åœ¨å£°æ˜æ¨¡å—çš„æ—¶å€™æŒ‡å®šæ‰€æœ‰çš„ä¾èµ–ï¼Œé€šè¿‡å½¢å‚ä¼ é€’ä¾èµ–åˆ°æ¨¡å—å†…å®¹ä¸­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">&#x27;dep1&#x27;</span>, <span class="string">&#x27;dep2&#x27;</span>], <span class="function"><span class="keyword">function</span>(<span class="params">dep1, dep2</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¸AMDæ¨¡å—è§„èŒƒç›¸æ¯”ï¼ŒCMDæ¨¡å—æ›´æ¥è¿‘äºNodeå¯¹CommonJSè§„èŒƒçš„å®šä¹‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">define(factory);</span><br></pre></td></tr></table></figure><p>åœ¨ä¾èµ–ç¤ºä¾‹éƒ¨åˆ†ï¼Œ<code>CMD</code> æ”¯æŒåŠ¨æ€å¼•å…¥ï¼Œ<code>require</code>ã€<code>exports</code> å’Œ <code>module</code> é€šè¿‡å½¢å‚ä¼ é€’ç»™æ¨¡å—ï¼Œåœ¨éœ€è¦ä¾èµ–æ¨¡å—æ—¶ï¼Œéšæ—¶è°ƒç”¨ <code>require( )</code> å¼•å…¥å³å¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="built_in">require</span>, <span class="built_in">exports</span>, <span class="built_in">module</span></span>)</span>&#123;</span><br><span class="line">  <span class="comment">//ä¾èµ–æ¨¡å—a</span></span><br><span class="line">  <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">&#x27;./a&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//è°ƒç”¨æ¨¡å—açš„æ–¹æ³•</span></span><br><span class="line">  a.method();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´ä¸ AMD ç›¸æ¯”ï¼ŒCMD æ¨å´‡ä¾èµ–å°±è¿‘ï¼Œ AMD æ¨å´‡ä¾èµ–å‰ç½®ã€‚</p><h3 id="ES6-æ¨¡å—"><a href="#ES6-æ¨¡å—" class="headerlink" title="ES6 æ¨¡å—"></a>ES6 æ¨¡å—</h3><blockquote><p>å¦‚å‰é¢æ‰€è¿°ï¼Œ<code>CommonJS</code> å’Œ <code>AMD</code> éƒ½æ˜¯è¿è¡Œæ—¶åŠ è½½ã€‚<code>ES6</code> åœ¨è¯­è¨€è§„æ ¼å±‚é¢ä¸Šå®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œæ˜¯ç¼–è¯‘æ—¶åŠ è½½ï¼Œå®Œå…¨å¯ä»¥å–ä»£ç°æœ‰çš„ <code>CommonJS</code> å’Œ <code>AMD</code> è§„èŒƒï¼Œå¯ä»¥æˆä¸ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨é€šç”¨çš„æ¨¡å—è§£å†³æ–¹æ¡ˆã€‚è¿™é‡Œå…³äº <code>ES6æ¨¡å—</code> æˆ‘ä»¬é¡¹ç›®é‡Œä½¿ç”¨éå¸¸å¤šï¼Œæ‰€ä»¥è¯¦ç»†è®²è§£ã€‚</p></blockquote><h4 id="export"><a href="#export" class="headerlink" title="export"></a>export</h4><ul><li>å¯¼å‡ºä¸€ä¸ªå˜é‡</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> name = <span class="string">&#x27;pengpeng&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>å¯¼å‡ºä¸€ä¸ªå‡½æ•°</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x, y</span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure><ul><li>å¸¸ç”¨å¯¼å‡ºæ–¹å¼ï¼ˆæ¨èï¼‰</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;dingman&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> age = <span class="string">&#x27;18&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> addr = <span class="string">&#x27;å¡å°”æ–¯ç‰¹æ£®æ—&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; name, age, addr &#125;;</span><br></pre></td></tr></table></figure><ul><li>Asç”¨æ³•</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">  s <span class="keyword">as</span> t,</span><br><span class="line">  s <span class="keyword">as</span> m, </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥åˆ©ç”¨aså°†æ¨¡å—è¾“å‡ºå¤šæ¬¡ã€‚</p><h4 id="import"><a href="#import" class="headerlink" title="import"></a>import</h4><ul><li>ä¸€èˆ¬ç”¨æ³•</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; name, age &#125; <span class="keyword">from</span> <span class="string">&#x27;./person.js&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>As ç”¨æ³•</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; name <span class="keyword">as</span> personName &#125; <span class="keyword">from</span> <span class="string">&#x27;./person.js&#x27;</span>;</span><br></pre></td></tr></table></figure><p>import å‘½ä»¤å…·æœ‰æå‡æ•ˆæœï¼Œä¼šæå‡åˆ°æ•´ä¸ªæ¨¡å—çš„å¤´éƒ¨ï¼Œé¦–å…ˆæ‰§è¡Œï¼Œå¦‚ä¸‹ä¹Ÿä¸ä¼šæŠ¥é”™ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">getName();</span><br><span class="line"><span class="keyword">import</span> &#123; getName &#125; <span class="keyword">from</span> <span class="string">&#x27;person_module&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>æ•´ä½“æ¨¡å—åŠ è½½ *</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€ä¸€åŠ è½½</span></span><br><span class="line"><span class="keyword">import</span> &#123; age, name &#125; <span class="keyword">from</span> <span class="string">&#x27;./person.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ•´ä½“åŠ è½½</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> person <span class="keyword">from</span> <span class="string">&#x27;./person.js&#x27;</span>;</span><br></pre></td></tr></table></figure><h4 id="export-default"><a href="#export-default" class="headerlink" title="export default"></a>export default</h4><p>å…¶å® <code>export default</code>ï¼Œåœ¨é¡¹ç›®é‡Œç”¨çš„éå¸¸å¤šï¼Œä¸€èˆ¬ä¸€ä¸ª <code>Vueç»„ä»¶</code> æˆ–è€… <code>Reactç»„ä»¶</code> æˆ‘ä»¬éƒ½æ˜¯ä½¿ç”¨ <code>export default</code> å‘½ä»¤ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ä½¿ç”¨ <code>export default</code> å‘½ä»¤æ—¶ï¼Œ<code>import</code> æ˜¯ä¸éœ€è¦åŠ  <code>&#123;&#125;</code> çš„ã€‚è€Œä¸ä½¿ç”¨ <code>export default</code> æ—¶ï¼Œ<code>import</code> æ˜¯å¿…é¡»åŠ  <code>&#123;&#125;</code>ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//person.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//my_module</span></span><br><span class="line"><span class="keyword">import</span> &#123;getName&#125; <span class="keyword">from</span> <span class="string">&#x27;./person.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line">-----------------å¯¹æ¯”---------------------</span><br><span class="line"></span><br><span class="line"><span class="comment">//person.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"> ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//my_module</span></span><br><span class="line"><span class="keyword">import</span> getName <span class="keyword">from</span> <span class="string">&#x27;./person.js&#x27;</span>;</span><br></pre></td></tr></table></figure><p><code>export default</code> å…¶å®æ˜¯å¯¼å‡ºä¸€ä¸ªå«åš <code>default</code> çš„å˜é‡ï¼Œæ‰€ä»¥å…¶åé¢ä¸èƒ½è·Ÿå˜é‡å£°æ˜è¯­å¥ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é”™è¯¯</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">var</span> a = <span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>å€¼å¾—æ³¨æ„çš„æ˜¯æˆ‘ä»¬å¯ä»¥åŒæ—¶ä½¿ç”¨ <code>export</code> å’Œ <code>export default</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//person.js</span></span><br><span class="line"><span class="keyword">export</span> name = <span class="string">&#x27;dingman&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//my_module</span></span><br><span class="line"><span class="keyword">import</span> getName, &#123; name &#125; <span class="keyword">from</span> <span class="string">&#x27;./person.js&#x27;</span>;</span><br></pre></td></tr></table></figure><blockquote><p>å‰é¢ä¸€ç›´æåˆ°ï¼ŒCommonJSæ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6æ—¶ç¼–è¯‘æ—¶åŠ è½½ï¼Œé‚£ä¹ˆä¸¤ä¸ªæœ‰ä»€ä¹ˆæœ¬è´¨çš„åŒºåˆ«å‘¢ï¼Ÿ</p></blockquote><h3 id="ES6-æ¨¡å—ä¸-CommonJS-æ¨¡å—åŠ è½½åŒºåˆ«"><a href="#ES6-æ¨¡å—ä¸-CommonJS-æ¨¡å—åŠ è½½åŒºåˆ«" class="headerlink" title="ES6 æ¨¡å—ä¸ CommonJS æ¨¡å—åŠ è½½åŒºåˆ«"></a>ES6 æ¨¡å—ä¸ CommonJS æ¨¡å—åŠ è½½åŒºåˆ«</h3><p>ES6æ¨¡å—çš„è®¾è®¡æ€æƒ³ï¼Œæ˜¯å°½é‡çš„é™æ€åŒ–ï¼Œä½¿å¾—ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºçš„å˜é‡ã€‚æ‰€ä»¥è¯´ES6æ˜¯ç¼–è¯‘æ—¶åŠ è½½ï¼Œä¸åŒäº <code>CommonJS</code> çš„è¿è¡Œæ—¶åŠ è½½(å®é™…åŠ è½½çš„æ˜¯ä¸€æ•´ä¸ªå¯¹è±¡)ï¼ŒES6æ¨¡å—ä¸æ˜¯å¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡ <code>exportå‘½ä»¤</code> æ˜¾å¼æŒ‡å®šè¾“å‡ºçš„ä»£ç ï¼Œè¾“å…¥æ—¶ä¹Ÿé‡‡ç”¨é™æ€å‘½ä»¤çš„å½¢å¼ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ES6æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> &#123; basename, dirname, parse &#125; <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//CommonJSæ¨¡å—</span></span><br><span class="line"><span class="keyword">let</span> &#123; basename, dirname, parse &#125; = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šè¿™ç§å†™æ³•ä¸CommonJSçš„æ¨¡å—åŠ è½½æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</p><ul><li><p>å½“ require path æ¨¡å—æ—¶ï¼Œå…¶å® CommonJS ä¼šå°† path æ¨¡å—è¿è¡Œä¸€éï¼Œå¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶å°†è¿™ä¸ªå¯¹è±¡ç¼“å­˜èµ·æ¥ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å« path è¿™ä¸ªæ¨¡å—çš„æ‰€æœ‰ APIã€‚ä»¥åæ— è®ºå¤šå°‘æ¬¡åŠ è½½è¿™ä¸ªæ¨¡å—éƒ½æ˜¯å–è¿™ä¸ªç¼“å­˜çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€æ¬¡è¿è¡Œçš„ç»“æœï¼Œé™¤éæ‰‹åŠ¨æ¸…é™¤ã€‚</p></li><li><p>ES6 ä¼šä» path æ¨¡å—åªåŠ è½½3ä¸ªæ–¹æ³•ï¼Œå…¶ä»–ä¸ä¼šåŠ è½½ï¼Œè¿™å°±æ˜¯ç¼–è¯‘æ—¶åŠ è½½ã€‚ES6 å¯ä»¥åœ¨ç¼–è¯‘æ—¶å°±å®Œæˆæ¨¡å—åŠ è½½ï¼Œå½“ ES6 é‡åˆ° import æ—¶ï¼Œä¸ä¼šåƒ CommonJS ä¸€æ ·å»æ‰§è¡Œæ¨¡å—ï¼Œè€Œæ˜¯ç”Ÿæˆä¸€ä¸ªåŠ¨æ€çš„åªè¯»å¼•ç”¨ï¼Œå½“çœŸæ­£éœ€è¦çš„æ—¶å€™å†åˆ°æ¨¡å—é‡Œå»å–å€¼ï¼Œæ‰€ä»¥ES6æ¨¡å—æ˜¯åŠ¨æ€å¼•ç”¨ï¼Œå¹¶ä¸”ä¸ä¼šç¼“å­˜å€¼ã€‚</p></li></ul><p>å› ä¸º CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„æ‹·è´ï¼Œæ‰€ä»¥å½“æ¨¡å—å†…å€¼å˜åŒ–æ—¶ï¼Œä¸ä¼šå½±å“åˆ°è¾“å‡ºçš„å€¼ã€‚åŸºäºNodeåšä»¥ä¸‹å°è¯•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//person.js</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="built_in">module</span>.exports =&#123;</span><br><span class="line">  age: age,</span><br><span class="line">  addAge: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    age++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">//my_module</span></span><br><span class="line"><span class="keyword">var</span> person = <span class="built_in">require</span>(<span class="string">&#x27;./person.js&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person.age);</span><br><span class="line">person.addAge();</span><br><span class="line"><span class="built_in">console</span>.log(person.age);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¾“å‡ºç»“æœ</span></span><br><span class="line"><span class="number">18</span></span><br><span class="line"><span class="number">18</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å†…éƒ¨ age çš„å˜åŒ–å¹¶ä¸ä¼šå½±å“ person.age çš„å€¼ï¼Œè¿™æ˜¯å› ä¸º person.age çš„å€¼å§‹ç»ˆæ˜¯ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶çš„ç»“æœçš„æ‹·è´ã€‚</p><p>å†çœ‹ES6</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//person.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addAge</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  age++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//my_module</span></span><br><span class="line"><span class="keyword">import</span> &#123; age, addAge &#125; <span class="keyword">from</span> <span class="string">&#x27;./person.js&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(age);</span><br><span class="line">addAge();</span><br><span class="line"><span class="built_in">console</span>.log(age);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¾“å‡ºç»“æœ</span></span><br><span class="line"><span class="number">18</span></span><br><span class="line"><span class="number">19</span></span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å‰ç«¯æ¨¡å—åŒ–è§„èŒƒåŒ…æ‹¬ <code>CommonJS</code> / <code>AMD</code> / <code>CMD</code> / <code>ES6</code> æ¨¡å—åŒ–ï¼Œå¹³æ—¶æˆ‘ä»¬å¯èƒ½åªçŸ¥å…¶ä¸­ä¸€ç§ä½†ä¸èƒ½å…¨é¢äº†è§£ä»–ä»¬çš„å‘å±•å†å²ã€ç”¨æ³•å’ŒåŒºåˆ«ï¼Œä»¥åŠå½“æˆ‘ä»¬ä½¿ç”¨<code>require</code> å’Œ <code>import</code> çš„æ—¶å€™åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Œè¿™ç¯‡æ–‡ç« ç»™å¤§å®¶ç®—æ˜¯æ¯”è¾ƒå…¨é¢çš„åšäº†ä¸€æ¬¡æ€»ç»“ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> nodejs </tag>
            
            <tag> æ¨¡å—åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS åº”å¯¹å°æ•°è¿ç®—ç²¾åº¦è¯¯å·®çš„è§£å†³æ–¹æ¡ˆ</title>
      <link href="2021/03/25/acc/"/>
      <url>2021/03/25/acc/</url>
      
        <content type="html"><![CDATA[<h2 id="ç±»åº“"><a href="#ç±»åº“" class="headerlink" title="ç±»åº“"></a>ç±»åº“</h2><blockquote><p>é€šå¸¸è¿™ç§å¯¹ç²¾åº¦è¦æ±‚é«˜çš„è®¡ç®—éƒ½åº”è¯¥äº¤ç»™åç«¯å»è®¡ç®—å’Œå­˜å‚¨ï¼Œå› ä¸ºåç«¯æœ‰æˆç†Ÿçš„åº“æ¥è§£å†³è¿™ç§è®¡ç®—é—®é¢˜ã€‚å‰ç«¯ä¹Ÿæœ‰å‡ ä¸ªä¸é”™çš„ç±»åº“</p></blockquote><h3 id="Math-js"><a href="#Math-js" class="headerlink" title="Math.js"></a>Math.js</h3><p>Math.js æ˜¯ä¸“é—¨ä¸º JavaScript å’Œ Node.js æä¾›çš„ä¸€ä¸ªå¹¿æ³›çš„æ•°å­¦åº“ã€‚å®ƒå…·æœ‰çµæ´»çš„è¡¨è¾¾å¼è§£æå™¨ï¼Œæ”¯æŒç¬¦å·è®¡ç®—ï¼Œé…æœ‰å¤§é‡å†…ç½®å‡½æ•°å’Œå¸¸é‡ï¼Œå¹¶æä¾›é›†æˆè§£å†³æ–¹æ¡ˆæ¥å¤„ç†ä¸åŒçš„æ•°æ®ç±»å‹, åƒæ•°å­—ï¼Œå¤§æ•°å­—(è¶…å‡ºå®‰å…¨æ•°çš„æ•°å­—)ï¼Œå¤æ•°ï¼Œåˆ†æ•°ï¼Œå•ä½å’ŒçŸ©é˜µã€‚ åŠŸèƒ½å¼ºå¤§ï¼Œæ˜“äºä½¿ç”¨ã€‚</p><p>å®˜ç½‘: <a href="http://mathjs.org/">http://mathjs.org/</a><br>GitHub: <a href="https://github.com/josdejong/mathjs">https://github.com/josdejong/mathjs</a></p><h3 id="decimal-js"><a href="#decimal-js" class="headerlink" title="decimal.js"></a>decimal.js</h3><p>ä¸º JavaScript æä¾›åè¿›åˆ¶ç±»å‹çš„ä»»æ„ç²¾åº¦æ•°å€¼ã€‚</p><p>å®˜ç½‘ï¼š<a href="http://mikemcl.github.io/decimal.js/">http://mikemcl.github.io/decimal.js/</a><br>GitHubï¼š<a href="https://github.com/MikeMcl/decimal.js">https://github.com/MikeMcl/decimal.js</a></p><h3 id="big-js"><a href="#big-js" class="headerlink" title="big.js"></a>big.js</h3><p>å®˜ç½‘ï¼š<a href="http://mikemcl.github.io/big.js">http://mikemcl.github.io/big.js</a></p><p>GitHubï¼š<a href="https://github.com/MikeMcl/big.js/">https://github.com/MikeMcl/big.js/</a></p><blockquote><p>è¿™å‡ ä¸ªç±»åº“å¸®æˆ‘ä»¬è§£å†³å¾ˆå¤šè¿™ç±»é—®é¢˜ï¼Œä¸è¿‡é€šå¸¸æˆ‘ä»¬å‰ç«¯åšè¿™ç±»è¿ç®—é€šå¸¸åªç”¨äºè¡¨ç°å±‚ï¼Œåº”ç”¨å¹¶ä¸æ˜¯å¾ˆå¤šã€‚æ‰€ä»¥å¾ˆå¤šæ—¶å€™ï¼Œä¸€ä¸ªå‡½æ•°èƒ½è§£å†³çš„é—®é¢˜ä¸éœ€è¦å¼•ç”¨ä¸€ä¸ªç±»åº“æ¥è§£å†³ã€‚</p></blockquote><h2 id="å‡½æ•°-ï¼ˆæ¨èï¼‰"><a href="#å‡½æ•°-ï¼ˆæ¨èï¼‰" class="headerlink" title="å‡½æ•° ï¼ˆæ¨èï¼‰"></a>å‡½æ•° ï¼ˆæ¨èï¼‰</h2><h3 id="åŠ æ³•å‡½æ•°"><a href="#åŠ æ³•å‡½æ•°" class="headerlink" title="åŠ æ³•å‡½æ•°"></a>åŠ æ³•å‡½æ•°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> ** åŠ æ³•å‡½æ•°ï¼Œç”¨æ¥å¾—åˆ°ç²¾ç¡®çš„åŠ æ³•ç»“æœ</span></span><br><span class="line"><span class="comment"> ** è¯´æ˜ï¼šjavascriptçš„åŠ æ³•ç»“æœä¼šæœ‰è¯¯å·®ï¼Œåœ¨ä¸¤ä¸ªæµ®ç‚¹æ•°ç›¸åŠ çš„æ—¶å€™ä¼šæ¯”è¾ƒæ˜æ˜¾ã€‚è¿™ä¸ªå‡½æ•°è¿”å›è¾ƒä¸ºç²¾ç¡®çš„åŠ æ³•ç»“æœã€‚</span></span><br><span class="line"><span class="comment"> ** è°ƒç”¨ï¼šaccAdd(arg1,arg2)</span></span><br><span class="line"><span class="comment"> ** è¿”å›å€¼ï¼šarg1åŠ ä¸Šarg2çš„ç²¾ç¡®ç»“æœ</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">accAdd</span>(<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> r1, r2, m, c;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        r1 = arg1.toString().split(<span class="string">&quot;.&quot;</span>)[<span class="number">1</span>].length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        r1 = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        r2 = arg2.toString().split(<span class="string">&quot;.&quot;</span>)[<span class="number">1</span>].length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        r2 = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    c = <span class="built_in">Math</span>.abs(r1 - r2);</span><br><span class="line">    m = <span class="built_in">Math</span>.pow(<span class="number">10</span>, <span class="built_in">Math</span>.max(r1, r2));</span><br><span class="line">    <span class="keyword">if</span> (c &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> cm = <span class="built_in">Math</span>.pow(<span class="number">10</span>, c);</span><br><span class="line">        <span class="keyword">if</span> (r1 &gt; r2) &#123;</span><br><span class="line">            arg1 = <span class="built_in">Number</span>(arg1.toString().replace(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;&quot;</span>));</span><br><span class="line">            arg2 = <span class="built_in">Number</span>(arg2.toString().replace(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;&quot;</span>)) * cm;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            arg1 = <span class="built_in">Number</span>(arg1.toString().replace(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;&quot;</span>)) * cm;</span><br><span class="line">            arg2 = <span class="built_in">Number</span>(arg2.toString().replace(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        arg1 = <span class="built_in">Number</span>(arg1.toString().replace(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;&quot;</span>));</span><br><span class="line">        arg2 = <span class="built_in">Number</span>(arg2.toString().replace(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (arg1 + arg2) / m;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//ç»™Numberç±»å‹å¢åŠ ä¸€ä¸ªaddæ–¹æ³•ï¼Œè°ƒç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿ã€‚</span></span><br><span class="line"><span class="built_in">Number</span>.prototype.add = <span class="function"><span class="keyword">function</span> (<span class="params">arg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> accAdd(arg, <span class="built_in">this</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å‡æ³•å‡½æ•°"><a href="#å‡æ³•å‡½æ•°" class="headerlink" title="å‡æ³•å‡½æ•°"></a>å‡æ³•å‡½æ•°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> ** å‡æ³•å‡½æ•°ï¼Œç”¨æ¥å¾—åˆ°ç²¾ç¡®çš„å‡æ³•ç»“æœ</span></span><br><span class="line"><span class="comment"> ** è¯´æ˜ï¼šjavascriptçš„å‡æ³•ç»“æœä¼šæœ‰è¯¯å·®ï¼Œåœ¨ä¸¤ä¸ªæµ®ç‚¹æ•°ç›¸å‡çš„æ—¶å€™ä¼šæ¯”è¾ƒæ˜æ˜¾ã€‚è¿™ä¸ªå‡½æ•°è¿”å›è¾ƒä¸ºç²¾ç¡®çš„å‡æ³•ç»“æœã€‚</span></span><br><span class="line"><span class="comment"> ** è°ƒç”¨ï¼šaccSub(arg1,arg2)</span></span><br><span class="line"><span class="comment"> ** è¿”å›å€¼ï¼šarg1åŠ ä¸Šarg2çš„ç²¾ç¡®ç»“æœ</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">accSub</span>(<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> r1, r2, m, n;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        r1 = arg1.toString().split(<span class="string">&quot;.&quot;</span>)[<span class="number">1</span>].length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        r1 = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        r2 = arg2.toString().split(<span class="string">&quot;.&quot;</span>)[<span class="number">1</span>].length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        r2 = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    m = <span class="built_in">Math</span>.pow(<span class="number">10</span>, <span class="built_in">Math</span>.max(r1, r2)); <span class="comment">//last modify by deeka //åŠ¨æ€æ§åˆ¶ç²¾åº¦é•¿åº¦</span></span><br><span class="line">    n = (r1 &gt;= r2) ? r1 : r2;</span><br><span class="line">    <span class="keyword">return</span> ((arg1 * m - arg2 * m) / m).toFixed(n);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// ç»™Numberç±»å‹å¢åŠ ä¸€ä¸ªmulæ–¹æ³•ï¼Œè°ƒç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿ã€‚</span></span><br><span class="line"><span class="built_in">Number</span>.prototype.sub = <span class="function"><span class="keyword">function</span> (<span class="params">arg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> accMul(arg, <span class="built_in">this</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ä¹˜æ³•å‡½æ•°"><a href="#ä¹˜æ³•å‡½æ•°" class="headerlink" title="ä¹˜æ³•å‡½æ•°"></a>ä¹˜æ³•å‡½æ•°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> ** ä¹˜æ³•å‡½æ•°ï¼Œç”¨æ¥å¾—åˆ°ç²¾ç¡®çš„ä¹˜æ³•ç»“æœ</span></span><br><span class="line"><span class="comment"> ** è¯´æ˜ï¼šjavascriptçš„ä¹˜æ³•ç»“æœä¼šæœ‰è¯¯å·®ï¼Œåœ¨ä¸¤ä¸ªæµ®ç‚¹æ•°ç›¸ä¹˜çš„æ—¶å€™ä¼šæ¯”è¾ƒæ˜æ˜¾ã€‚è¿™ä¸ªå‡½æ•°è¿”å›è¾ƒä¸ºç²¾ç¡®çš„ä¹˜æ³•ç»“æœã€‚</span></span><br><span class="line"><span class="comment"> ** è°ƒç”¨ï¼šaccMul(arg1,arg2)</span></span><br><span class="line"><span class="comment"> ** è¿”å›å€¼ï¼šarg1ä¹˜ä»¥ arg2çš„ç²¾ç¡®ç»“æœ</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">accMul</span>(<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> m = <span class="number">0</span>, s1 = arg1.toString(), s2 = arg2.toString();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        m += s1.split(<span class="string">&quot;.&quot;</span>)[<span class="number">1</span>].length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        m += s2.split(<span class="string">&quot;.&quot;</span>)[<span class="number">1</span>].length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Number</span>(s1.replace(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;&quot;</span>)) * <span class="built_in">Number</span>(s2.replace(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;&quot;</span>)) / <span class="built_in">Math</span>.pow(<span class="number">10</span>, m);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// ç»™Numberç±»å‹å¢åŠ ä¸€ä¸ªmulæ–¹æ³•ï¼Œè°ƒç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿ã€‚</span></span><br><span class="line"><span class="built_in">Number</span>.prototype.mul = <span class="function"><span class="keyword">function</span> (<span class="params">arg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> accMul(arg, <span class="built_in">this</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="é™¤æ³•å‡½æ•°"><a href="#é™¤æ³•å‡½æ•°" class="headerlink" title="é™¤æ³•å‡½æ•°"></a>é™¤æ³•å‡½æ•°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> ** é™¤æ³•å‡½æ•°ï¼Œç”¨æ¥å¾—åˆ°ç²¾ç¡®çš„é™¤æ³•ç»“æœ</span></span><br><span class="line"><span class="comment"> ** è¯´æ˜ï¼šjavascriptçš„é™¤æ³•ç»“æœä¼šæœ‰è¯¯å·®ï¼Œåœ¨ä¸¤ä¸ªæµ®ç‚¹æ•°ç›¸é™¤çš„æ—¶å€™ä¼šæ¯”è¾ƒæ˜æ˜¾ã€‚è¿™ä¸ªå‡½æ•°è¿”å›è¾ƒä¸ºç²¾ç¡®çš„é™¤æ³•ç»“æœã€‚</span></span><br><span class="line"><span class="comment"> ** è°ƒç”¨ï¼šaccDiv(arg1,arg2)</span></span><br><span class="line"><span class="comment"> ** è¿”å›å€¼ï¼šarg1é™¤ä»¥arg2çš„ç²¾ç¡®ç»“æœ</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">accDiv</span>(<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> t1 = <span class="number">0</span>, t2 = <span class="number">0</span>, r1, r2;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        t1 = arg1.toString().split(<span class="string">&quot;.&quot;</span>)[<span class="number">1</span>].length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        t2 = arg2.toString().split(<span class="string">&quot;.&quot;</span>)[<span class="number">1</span>].length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">with</span> (<span class="built_in">Math</span>) &#123;</span><br><span class="line">        r1 = <span class="built_in">Number</span>(arg1.toString().replace(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;&quot;</span>));</span><br><span class="line">        r2 = <span class="built_in">Number</span>(arg2.toString().replace(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> (r1 / r2) * pow(<span class="number">10</span>, t2 - t1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//ç»™Numberç±»å‹å¢åŠ ä¸€ä¸ªdivæ–¹æ³•ï¼Œè°ƒç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿ã€‚</span></span><br><span class="line"><span class="built_in">Number</span>.prototype.div = <span class="function"><span class="keyword">function</span> (<span class="params">arg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> accDiv(<span class="built_in">this</span>, arg);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äº‹ä»¶çš„èŠ‚æµï¼ˆthrottleï¼‰ä¸é˜²æŠ–ï¼ˆdebounceï¼‰</title>
      <link href="2021/03/23/throttle-debounce/"/>
      <url>2021/03/23/throttle-debounce/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ‰äº›æµè§ˆå™¨äº‹ä»¶å¯ä»¥åœ¨çŸ­æ—¶é—´å†…å¿«é€Ÿè§¦å‘å¤šæ¬¡ï¼Œæ¯”å¦‚è°ƒæ•´çª—å£å¤§å°æˆ–å‘ä¸‹æ»šåŠ¨é¡µé¢ã€‚ä¾‹å¦‚ï¼Œç›‘å¬é¡µé¢çª—å£æ»šåŠ¨äº‹ä»¶ï¼Œå¹¶ä¸”ç”¨æˆ·æŒç»­å¿«é€Ÿåœ°å‘ä¸‹æ»šåŠ¨é¡µé¢ï¼Œé‚£ä¹ˆæ»šåŠ¨äº‹ä»¶å¯èƒ½åœ¨ 3 ç§’å†…è§¦å‘æ•°åƒæ¬¡ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ã€‚</p></blockquote><p>æ„å»ºåº”ç”¨ç¨‹åºï¼Œå‡ºç°æ»šåŠ¨ã€çª—å£å¤§å°è°ƒæ•´æˆ–æŒ‰ä¸‹é”®ç­‰äº‹ä»¶è¯·åŠ¡å¿…è€ƒè™‘ é˜²æŠ–(Debouncing) å’Œ å‡½æ•°èŠ‚æµï¼ˆThrottlingï¼‰æ¥æå‡é¡µé¢é€Ÿåº¦å’Œæ€§èƒ½ã€‚è¿™ä¸¤å…„å¼Ÿçš„æœ¬è´¨éƒ½æ˜¯ä»¥é—­åŒ…çš„å½¢å¼å­˜åœ¨ã€‚é€šè¿‡å¯¹äº‹ä»¶å¯¹åº”çš„å›è°ƒå‡½æ•°è¿›è¡ŒåŒ…è£¹ã€ä»¥è‡ªç”±å˜é‡çš„å½¢å¼ç¼“å­˜æ—¶é—´ä¿¡æ¯ï¼Œæœ€åç”¨ setTimeout æ¥æ§åˆ¶äº‹ä»¶çš„è§¦å‘é¢‘ç‡ã€‚</p><h2 id="Throttleï¼š-ç¬¬ä¸€ä¸ªäººè¯´äº†ç®—"><a href="#Throttleï¼š-ç¬¬ä¸€ä¸ªäººè¯´äº†ç®—" class="headerlink" title="Throttleï¼š ç¬¬ä¸€ä¸ªäººè¯´äº†ç®—"></a>Throttleï¼š ç¬¬ä¸€ä¸ªäººè¯´äº†ç®—</h2><p><strong>throttle çš„ä¸»è¦æ€æƒ³åœ¨äºï¼šåœ¨æŸæ®µæ—¶é—´å†…ï¼Œä¸ç®¡ä½ è§¦å‘äº†å¤šå°‘æ¬¡å›è°ƒï¼Œéƒ½åªè®¤ç¬¬ä¸€æ¬¡ï¼Œå¹¶åœ¨è®¡æ—¶ç»“æŸæ—¶ç»™äºˆå“åº”ã€‚</strong></p><p>è¿™ä¸ªæ•…äº‹é‡Œï¼Œâ€è£åˆ¤â€ å°±æ˜¯æˆ‘ä»¬çš„ <code>èŠ‚æµé˜€</code>ï¼Œ ä»–æ§åˆ¶å‚èµ›è€…åƒä¸œè¥¿çš„æ—¶æœºï¼Œ â€œå‚èµ›è€…åƒä¸œè¥¿â€ å°±æ˜¯æˆ‘ä»¬é¢‘ç¹æ“ä½œäº‹ä»¶è€Œä¸æ–­æ¶Œå…¥çš„å›è°ƒä»»åŠ¡ï¼Œå®ƒå— â€œè£åˆ¤â€ çš„æ§åˆ¶, è€Œ<code>è®¡æ—¶å™¨</code> å°±æ˜¯ä¸Šæ–‡æåˆ°çš„ä»¥ <code>è‡ªç”±å˜é‡</code> å½¢å¼å­˜åœ¨çš„æ—¶é—´ä¿¡æ¯ï¼Œå®ƒæ˜¯ â€œè£åˆ¤â€ å†³å®šæ˜¯å¦åœæ­¢æ¯”èµ›çš„ä¾æ®ï¼Œæœ€åï¼Œç­‰å¾…æ¯”èµ›ç»“æœå°±å¯¹åº”åˆ°å›è°ƒå‡½æ•°çš„æ‰§è¡Œã€‚</p><p>æ€»ç»“ä¸‹æ¥ï¼Œæ‰€è°“çš„ <code>èŠ‚æµ</code>ï¼Œæ˜¯é€šè¿‡åœ¨ä¸€æ®µæ—¶é—´å†…æ— è§†åæ¥äº§ç”Ÿçš„å›è°ƒè¯·æ±‚æ¥å®ç°çš„ã€‚åªè¦ â€œè£åˆ¤â€ å®£å¸ƒæ¯”èµ›å¼€å§‹ï¼Œ â€œè£åˆ¤â€ å°±ä¼šå¼€å¯è®¡æ—¶å™¨ï¼Œåœ¨è¿™æ®µæ—¶é—´å†…ï¼Œå‚èµ›è€…å°±å°½ç®¡ä¸æ–­çš„åƒï¼Œè°ä¹Ÿæ— æ³•çŸ¥é“æœ€ç»ˆç»“æœã€‚</p><p>å¯¹åº”åˆ°å®é™…çš„äº¤äº’ä¸Šæ˜¯ä¸€æ ·çš„ï¼šæ¯å½“ç”¨æˆ·è§¦å‘äº†ä¸€æ¬¡ <code>scroll</code> äº‹ä»¶ï¼Œæˆ‘ä»¬å°±ä¸ºè¿™ä¸ªè§¦å‘æ“ä½œå¼€å¯è®¡æ—¶å™¨ã€‚ä¸€æ®µæ—¶é—´å†…ï¼Œåç»­æ‰€æœ‰çš„ <code>scroll</code> äº‹ä»¶éƒ½ä¼šè¢«å½“ä½œ â€œå‚èµ›è€…åƒä¸œè¥¿â€ å®ƒä»¬æ— æ³•è§¦å‘æ–°çš„ <code>scroll</code> å›è°ƒã€‚ç›´åˆ° â€œä¸€æ®µæ—¶é—´â€ åˆ°äº†ï¼Œç¬¬ä¸€æ¬¡è§¦å‘çš„ scroll äº‹ä»¶å¯¹åº”çš„å›è°ƒæ‰ä¼šæ‰§è¡Œï¼Œè€Œ â€œä¸€æ®µæ—¶é—´å†…â€ è§¦å‘çš„åç»­çš„ <code>scroll</code> å›è°ƒéƒ½ä¼šè¢« <code>èŠ‚æµé˜€</code> æ— è§†æ‰ã€‚</p><p>ç°åœ¨ä¸€èµ·å®ç°ä¸€ä¸ª throttleï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fn æ˜¯æˆ‘ä»¬éœ€è¦åŒ…è£…çš„äº‹ä»¶å›è°ƒ, interval æ˜¯æ—¶é—´é—´éš”çš„é˜ˆå€¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, interval</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// lastä¸ºä¸Šä¸€æ¬¡è§¦å‘å›è°ƒçš„æ—¶é—´</span></span><br><span class="line">  <span class="keyword">let</span> last = <span class="number">0</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å°†throttleå¤„ç†ç»“æœå½“ä½œå‡½æ•°è¿”å›</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// ä¿ç•™è°ƒç”¨æ—¶çš„thisä¸Šä¸‹æ–‡</span></span><br><span class="line">      <span class="keyword">let</span> context = <span class="built_in">this</span></span><br><span class="line">      <span class="comment">// ä¿ç•™è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°</span></span><br><span class="line">      <span class="keyword">let</span> args = <span class="built_in">arguments</span></span><br><span class="line">      <span class="comment">// è®°å½•æœ¬æ¬¡è§¦å‘å›è°ƒçš„æ—¶é—´</span></span><br><span class="line">      <span class="keyword">let</span> now = +<span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// åˆ¤æ–­ä¸Šæ¬¡è§¦å‘çš„æ—¶é—´å’Œæœ¬æ¬¡è§¦å‘çš„æ—¶é—´å·®æ˜¯å¦å°äºæ—¶é—´é—´éš”çš„é˜ˆå€¼</span></span><br><span class="line">      <span class="keyword">if</span> (now - last &gt;= interval) &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœæ—¶é—´é—´éš”å¤§äºæˆ‘ä»¬è®¾å®šçš„æ—¶é—´é—´éš”é˜ˆå€¼ï¼Œåˆ™æ‰§è¡Œå›è°ƒ</span></span><br><span class="line">          last = now;</span><br><span class="line">          fn.apply(context, args);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨throttleæ¥åŒ…è£…scrollçš„å›è°ƒ</span></span><br><span class="line"><span class="keyword">const</span> better_scroll = throttle(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;è§¦å‘äº†æ»šåŠ¨äº‹ä»¶&#x27;</span>), <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;scroll&#x27;</span>, better_scroll)</span><br></pre></td></tr></table></figure><h2 id="Debounceï¼š-æœ€åä¸€ä¸ªå‚èµ›è€…è¯´äº†ç®—"><a href="#Debounceï¼š-æœ€åä¸€ä¸ªå‚èµ›è€…è¯´äº†ç®—" class="headerlink" title="Debounceï¼š æœ€åä¸€ä¸ªå‚èµ›è€…è¯´äº†ç®—"></a>Debounceï¼š æœ€åä¸€ä¸ªå‚èµ›è€…è¯´äº†ç®—</h2><p>é˜²æŠ–çš„ä¸»è¦æ€æƒ³åœ¨äºï¼šæˆ‘ä¼šç­‰ä½ åˆ°åº•ã€‚åœ¨æŸæ®µæ—¶é—´å†…ï¼Œä¸ç®¡ä½ è§¦å‘äº†å¤šå°‘æ¬¡å›è°ƒï¼Œæˆ‘éƒ½åªè®¤æœ€åä¸€æ¬¡ã€‚</p><p>ç»§ç»­å¤§èƒƒç‹æ¯”èµ›æ•…äº‹ï¼Œè¿™æ¬¡æ¢äº†ä¸€ç§æ¯”èµ›æ–¹å¼ï¼Œæ—¶é—´ä¸é™ï¼Œå‚èµ›è€…åƒåˆ°ä¸èƒ½åƒä¸ºæ­¢ï¼Œå½“æ¯ä¸ªå‚èµ›éƒ½åƒä¸ä¸‹çš„æ—¶å€™ï¼Œåé¢10åˆ†é’Ÿå¦‚æœæ²¡æœ‰äººåœ¨åƒï¼Œæ¯”èµ›ç»“æŸï¼Œå¦‚æœæœ‰äººåœ¨10åˆ†é’Ÿå†…è¿˜èƒ½åƒï¼Œåˆ™æ¯”èµ›ç»§ç»­ï¼Œç›´åˆ°ä¸‹ä¸€æ¬¡10åˆ†é’Ÿå†…æ— äººåœ¨åƒæ—¶ä¸ºæ­¢ã€‚</p><p>å¯¹æ¯” <code>throttle</code> æ¥ç†è§£ <code>debounce</code>ï¼š åœ¨ <code>throttle</code> çš„é€»è¾‘é‡Œï¼Œ â€œè£åˆ¤â€ è¯´äº†ç®—ï¼Œå½“æ¯”èµ›æ—¶é—´åˆ°æ—¶ï¼Œå°±æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚è€Œ <code>debounce</code> è®¤ä¸ºæœ€åä¸€ä¸ªå‚èµ›è€…è¯´äº†ç®—ï¼Œåªè¦è¿˜èƒ½åƒçš„ï¼Œå°±é‡æ–°è®¾å®šæ–°çš„ <code>å®šæ—¶å™¨</code>ã€‚</p><p>ç°åœ¨ä¸€èµ·å®ç°ä¸€ä¸ª debounceï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fn æ˜¯æˆ‘ä»¬éœ€è¦åŒ…è£…çš„äº‹ä»¶å›è°ƒ, delay æ˜¯æ¯æ¬¡æ¨è¿Ÿæ‰§è¡Œçš„ç­‰å¾…æ—¶é—´</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, delay</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å®šæ—¶å™¨</span></span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å°†debounceå¤„ç†ç»“æœå½“ä½œå‡½æ•°è¿”å›</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä¿ç•™è°ƒç”¨æ—¶çš„thisä¸Šä¸‹æ–‡</span></span><br><span class="line">    <span class="keyword">let</span> context = <span class="built_in">this</span></span><br><span class="line">    <span class="comment">// ä¿ç•™è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°</span></span><br><span class="line">    <span class="keyword">let</span> args = <span class="built_in">arguments</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¯æ¬¡äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œéƒ½å»æ¸…é™¤ä¹‹å‰çš„æ—§å®šæ—¶å™¨</span></span><br><span class="line">    <span class="keyword">if</span>(timer) &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è®¾ç«‹æ–°å®šæ—¶å™¨</span></span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      fn.apply(context, args)</span><br><span class="line">    &#125;, delay)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨debounceæ¥åŒ…è£…scrollçš„å›è°ƒ</span></span><br><span class="line"><span class="keyword">const</span> better_scroll = debounce(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;è§¦å‘äº†æ»šåŠ¨äº‹ä»¶&#x27;</span>), <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;scroll&#x27;</span>, better_scroll)</span><br></pre></td></tr></table></figure><h2 id="ç”¨-Throttle-æ¥ä¼˜åŒ–-Debounce"><a href="#ç”¨-Throttle-æ¥ä¼˜åŒ–-Debounce" class="headerlink" title="ç”¨ Throttle æ¥ä¼˜åŒ– Debounce"></a>ç”¨ Throttle æ¥ä¼˜åŒ– Debounce</h2><p><code>debounce</code> çš„é—®é¢˜åœ¨äºå®ƒ â€œå¤ªæœ‰è€å¿ƒäº†â€ã€‚ è¯•æƒ³ï¼Œå¦‚æœç”¨æˆ·çš„æ“ä½œååˆ†é¢‘ç¹ï¼Œä»–æ¯æ¬¡éƒ½ä¸ç­‰ <code>debounce</code> è®¾ç½®çš„ <code>delay</code> æ—¶é—´ç»“æŸå°±è¿›è¡Œä¸‹ä¸€æ¬¡æ“ä½œï¼Œäºæ˜¯æ¯æ¬¡ <code>debounce</code> éƒ½ä¸ºè¯¥ç”¨æˆ·é‡æ–°ç”Ÿæˆå®šæ—¶å™¨ï¼Œå›è°ƒå‡½æ•°è¢«å»¶è¿Ÿäº†ä¸è®¡å…¶æ•°æ¬¡ã€‚é¢‘ç¹çš„å»¶è¿Ÿä¼šå¯¼è‡´ç”¨æˆ·è¿Ÿè¿Ÿå¾—ä¸åˆ°å“åº”ï¼Œç”¨æˆ·åŒæ ·ä¼šäº§ç”Ÿ â€œè¿™ä¸ªé¡µé¢å¡æ­»äº†â€ çš„è§‚æ„Ÿã€‚</p><p>ä¸ºäº†é¿å…å¼„å·§æˆæ‹™ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ› <code>throttle</code> çš„æ€æƒ³ï¼Œæ‰“é€ ä¸€ä¸ª â€œæœ‰åº•çº¿â€ çš„ <code>debounce</code>ï¼Œ ç­‰ä½ å¯ä»¥ï¼Œä½†æˆ‘æœ‰æˆ‘çš„åŸåˆ™ï¼š<code>delay</code> æ—¶é—´å†…ï¼Œæˆ‘å¯ä»¥ä¸ºä½ é‡æ–°ç”Ÿæˆå®šæ—¶å™¨ï¼› ä½†åªè¦ <code>delay</code> çš„æ—¶é—´åˆ°äº†ï¼Œæˆ‘å¿…é¡»è¦ç»™ç”¨æˆ·ä¸€ä¸ªå“åº”ã€‚è¿™ä¸ª <code>throttle</code> ä¸ <code>debounce</code> â€œåˆä½“â€ æ€è·¯ï¼Œå·²ç»è¢«å¾ˆå¤šæˆç†Ÿçš„å‰ç«¯åº“åº”ç”¨åˆ°äº†å®ƒä»¬çš„åŠ å¼ºç‰ˆ <code>throttle</code> å‡½æ•°çš„å®ç°ä¸­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fn æ˜¯æˆ‘ä»¬éœ€è¦åŒ…è£…çš„äº‹ä»¶å›è°ƒ, delay æ˜¯æ—¶é—´é—´éš”çš„é˜ˆå€¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, delay</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// lastä¸ºä¸Šä¸€æ¬¡è§¦å‘å›è°ƒçš„æ—¶é—´, timeræ˜¯å®šæ—¶å™¨</span></span><br><span class="line">  <span class="keyword">let</span> last = <span class="number">0</span>, timer = <span class="literal">null</span></span><br><span class="line">  <span class="comment">// å°†throttleå¤„ç†ç»“æœå½“ä½œå‡½æ•°è¿”å›</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="comment">// ä¿ç•™è°ƒç”¨æ—¶çš„thisä¸Šä¸‹æ–‡</span></span><br><span class="line">    <span class="keyword">let</span> context = <span class="built_in">this</span></span><br><span class="line">    <span class="comment">// ä¿ç•™è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°</span></span><br><span class="line">    <span class="keyword">let</span> args = <span class="built_in">arguments</span></span><br><span class="line">    <span class="comment">// è®°å½•æœ¬æ¬¡è§¦å‘å›è°ƒçš„æ—¶é—´</span></span><br><span class="line">    <span class="keyword">let</span> now = +<span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ¤æ–­ä¸Šæ¬¡è§¦å‘çš„æ—¶é—´å’Œæœ¬æ¬¡è§¦å‘çš„æ—¶é—´å·®æ˜¯å¦å°äºæ—¶é—´é—´éš”çš„é˜ˆå€¼</span></span><br><span class="line">    <span class="keyword">if</span> (now - last &lt; delay) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ—¶é—´é—´éš”å°äºæˆ‘ä»¬è®¾å®šçš„æ—¶é—´é—´éš”é˜ˆå€¼ï¼Œåˆ™ä¸ºæœ¬æ¬¡è§¦å‘æ“ä½œè®¾ç«‹ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨</span></span><br><span class="line">       <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">       timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          last = now</span><br><span class="line">          fn.apply(context, args)</span><br><span class="line">        &#125;, delay)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæ—¶é—´é—´éš”è¶…å‡ºäº†æˆ‘ä»¬è®¾å®šçš„æ—¶é—´é—´éš”é˜ˆå€¼ï¼Œé‚£å°±ä¸ç­‰äº†ï¼Œæ— è®ºå¦‚ä½•è¦åé¦ˆç»™ç”¨æˆ·ä¸€æ¬¡å“åº”</span></span><br><span class="line">        last = now</span><br><span class="line">        fn.apply(context, args)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æ–°çš„throttleåŒ…è£…scrollçš„å›è°ƒ</span></span><br><span class="line"><span class="keyword">const</span> better_scroll = throttle(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;è§¦å‘äº†æ»šåŠ¨äº‹ä»¶&#x27;</span>), <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;scroll&#x27;</span>, better_scroll)</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://css-tricks.com/the-difference-between-throttling-and-debouncing/">https://css-tricks.com/the-difference-between-throttling-and-debouncing/</a><br><a href="https://css-tricks.com/debouncing-throttling-explained-examples/">https://css-tricks.com/debouncing-throttling-explained-examples/</a><br><a href="https://codeburst.io/throttling-and-debouncing-in-javascript-b01cad5c8edf#.ly8uqz8v4">https://codeburst.io/throttling-and-debouncing-in-javascript-b01cad5c8edf#.ly8uqz8v4</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ES6 ä¹‹ Promise æ·±åº¦å‰–æ</title>
      <link href="2021/02/13/Promise/"/>
      <url>2021/02/13/Promise/</url>
      
        <content type="html"><![CDATA[<blockquote><p>PromiseåŸºæœ¬ä¸Šç°åœ¨ä¸ç®¡æ˜¯å¤§å‚è¿˜æ˜¯å°å‚ï¼Œpromise å·²ç»æˆä¸ºäº†é¢è¯•å¿…è€ƒçŸ¥è¯†ç‚¹ï¼›å…³äº Promiseï¼Œæƒ³å¿…å¤§å®¶éƒ½åˆæ‰€äº†è§£ï¼Œå¯æ˜¯åˆæŒæ¡äº†å¤šå°‘ï¼ŒçœŸæ­£é¢è¯•çš„æ—¶å€™ï¼Œåˆèƒ½æœ‰å¤šå°‘æŠŠæ¡å‘¢ï¼Ÿ </p></blockquote><h2 id="å¸¸è§é¢è¯•é¢˜"><a href="#å¸¸è§é¢è¯•é¢˜" class="headerlink" title="å¸¸è§é¢è¯•é¢˜"></a>å¸¸è§é¢è¯•é¢˜</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬ä»¥å¸¸è§çš„ <code>Promise</code> é¢è¯•é¢˜ä¸ºåˆ‡å…¥ç‚¹ï¼Œæˆ‘ä»¬çœ‹çœ‹é¢è¯•å®˜ä»¬éƒ½çˆ±è€ƒä»€ä¹ˆï¼š</p><ul><li><p><code>Promise</code> çš„å‡ºç° è§£å†³äº†ä»€ä¹ˆé—®é¢˜ ï¼Ÿ</p></li><li><p><code>Promise</code> çš„åŸºç¡€ç‰¹å¾ ï¼Ÿ</p></li><li><p><code>Promise</code> å¸¸ç”¨çš„ API æœ‰å“ªäº› ï¼Ÿ</p></li><li><p>èƒ½ä¸èƒ½æ‰‹å†™ä¸€ä¸ªç¬¦åˆ <code>Promise/A+</code> è§„èŒƒçš„ <code>Promise</code>?</p></li><li><p><code>then</code> çš„é“¾å¼è°ƒç”¨ &amp; å€¼ç©¿é€ç‰¹æ€§åŸç†</p></li><li><p><code>Promise</code> æœ‰ä»€ä¹ˆç¼ºé™·ï¼Œå¯ä»¥å¦‚ä½•è§£å†³ï¼Ÿ</p></li></ul><p>è¿™å‡ ä¸ªé—®é¢˜ç”±æµ…å…¥æ·±ï¼Œæˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªæ¥çœ‹ï¼š</p><h2 id="Promise-å‡ºç°çš„åŸå› "><a href="#Promise-å‡ºç°çš„åŸå› " class="headerlink" title="Promise å‡ºç°çš„åŸå› "></a>Promise å‡ºç°çš„åŸå› </h2><p>åœ¨ <code>Promise</code> å‡ºç°ä»¥å‰ï¼Œåœ¨æˆ‘ä»¬å¤„ç†å¤šä¸ªå¼‚æ­¥è¯·æ±‚åµŒå¥—æ—¶ï¼Œä»£ç å¾€å¾€æ˜¯è¿™æ ·çš„ã€‚ã€‚ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">&#x27;./name.txt&#x27;</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">  fs.readFile(data, <span class="string">&#x27;utf8&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">    fs.readFile(data,<span class="string">&#x27;utf8&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¸ºäº†æ‹¿åˆ°å›è°ƒçš„ç»“æœï¼Œæˆ‘ä»¬å¿…é¡»ä¸€å±‚ä¸€å±‚çš„åµŒå¥—ï¼Œå¯ä»¥è¯´æ˜¯ç›¸å½“æ¶å¿ƒäº†ã€‚è€Œä¸”åŸºæœ¬ä¸Šæˆ‘ä»¬è¿˜è¦å¯¹æ¯æ¬¡è¯·æ±‚çš„ç»“æœè¿›è¡Œä¸€ç³»åˆ—çš„å¤„ç†ï¼Œä½¿å¾—ä»£ç å˜çš„æ›´åŠ éš¾ä»¥é˜…è¯»å’Œéš¾ä»¥ç»´æŠ¤ï¼Œè¿™å°±æ˜¯ä¼ è¯´ä¸­è‡­åæ˜­è‘—çš„ <code>å›è°ƒåœ°ç‹±</code>, äº§ç”Ÿ <code>å›è°ƒåœ°ç‹±</code> çš„åŸå› å½’ç»“èµ·æ¥æœ‰ä¸¤ç‚¹ï¼š</p><ol><li><p><code>åµŒå¥—è°ƒç”¨</code>ï¼Œç¬¬ä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºå¾€å¾€æ˜¯ç¬¬äºŒä¸ªå‡½æ•°çš„è¾“å…¥ï¼›</p></li><li><p><code>å¤„ç†å¤šä¸ªå¼‚æ­¥è¯·æ±‚å¹¶å‘</code>ï¼Œå¼€å‘æ—¶å¾€å¾€éœ€è¦åŒæ­¥è¯·æ±‚æœ€ç»ˆçš„ç»“æœã€‚</p></li></ol><p>åŸå› åˆ†æå‡ºæ¥åï¼Œé‚£ä¹ˆé—®é¢˜çš„è§£å†³æ€è·¯å°±å¾ˆæ¸…æ™°äº†ï¼š</p><ol><li><p><code>æ¶ˆç­åµŒå¥—è°ƒç”¨</code>ï¼šé€šè¿‡ <code>Promise</code> çš„é“¾å¼è°ƒç”¨å¯ä»¥è§£å†³ <code>.then()</code>ï¼›</p></li><li><p><code>åˆå¹¶å¤šä¸ªä»»åŠ¡çš„è¯·æ±‚ç»“æœ</code>ï¼šä½¿ç”¨ <code>Promise.all</code> è·å–åˆå¹¶å¤šä¸ªä»»åŠ¡çš„é”™è¯¯å¤„ç†ã€‚</p></li></ol><p><strong>Promise æ­£æ˜¯ç”¨ä¸€ç§æ›´åŠ å‹å¥½çš„ä»£ç ç»„ç»‡æ–¹å¼ï¼Œè§£å†³äº†å¼‚æ­¥åµŒå¥—çš„é—®é¢˜ã€‚</strong></p><p>æˆ‘ä»¬æ¥çœ‹çœ‹ä¸Šé¢çš„ä¾‹å­ç”¨ Promise å®ç°æ˜¯ä»€ä¹ˆæ ·çš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">read</span>(<span class="params">filename</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.readFile(filename, <span class="string">&#x27;utf8&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) reject(err);</span><br><span class="line">      resolve(data);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">read(<span class="string">&#x27;./name.txt&#x27;</span>).then(<span class="function">(<span class="params">data</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> read(data) </span><br><span class="line">&#125;).then(<span class="function">(<span class="params">data</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> read(data)  </span><br><span class="line">&#125;).then(<span class="function">(<span class="params">data</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;,<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è‡ƒè‚¿çš„åµŒå¥—å˜å¾—çº¿æ€§å¤šäº†æœ‰æœ¨æœ‰ï¼Ÿæ²¡é”™ï¼Œä»–å°±æ˜¯æˆ‘ä»¬çš„å¼‚æ­¥ç¥å™¨ <code>Promise</code>ï¼</p><blockquote><p>è®©æˆ‘ä»¬å†æ¬¡å›å½’åˆšæ‰çš„é—®é¢˜ï¼Œ<code>Promise</code> ä¸ºæˆ‘ä»¬è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿåœ¨ä¼ ç»Ÿçš„å¼‚æ­¥ç¼–ç¨‹ä¸­ï¼Œå¦‚æœå¼‚æ­¥ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œå°±éœ€è¦é€šè¿‡å±‚å±‚åµŒå¥—å›è°ƒçš„æ–¹å¼æ»¡è¶³è¿™ç§ä¾èµ–ï¼Œå¦‚æœåµŒå¥—å±‚æ•°è¿‡å¤šï¼Œå¯è¯»æ€§å’Œå¯ä»¥ç»´æŠ¤æ€§éƒ½ä¼šå˜å¾—å¾ˆå·®ï¼Œäº§ç”Ÿæ‰€è°“çš„ â€œå›è°ƒåœ°ç‹±â€ï¼Œè€Œ <code>Promise</code> å°†åµŒå¥—è°ƒç”¨æ”¹ä¸ºé“¾å¼è°ƒç”¨ï¼Œå¢åŠ äº†å¯é˜…è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>Promise</code> è§£å†³çš„æ˜¯å¼‚æ­¥ç¼–ç é£æ ¼çš„é—®é¢˜ã€‚</p></blockquote><h2 id="Promise-åŸºæœ¬ç‰¹å¾"><a href="#Promise-åŸºæœ¬ç‰¹å¾" class="headerlink" title="Promise åŸºæœ¬ç‰¹å¾"></a>Promise åŸºæœ¬ç‰¹å¾</h2><p><strong><code>promise</code> æœ‰ä¸‰ä¸ªçŠ¶æ€ï¼š<code>pending</code>ï¼Œ<code>fulfilled</code>ï¼Œor <code>rejected</code>ï¼›</strong></p><ol><li><p><code>new promise</code> æ—¶ï¼Œ éœ€è¦ä¼ é€’ä¸€ä¸ª <code>executor()</code> æ‰§è¡Œå™¨ï¼Œæ‰§è¡Œå™¨ç«‹å³æ‰§è¡Œï¼›</p></li><li><p><code>executor</code> æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ <code>resolve</code> å’Œ <code>reject</code>ï¼›</p></li><li><p><code>promise</code> çš„é»˜è®¤çŠ¶æ€æ˜¯ <code>pending</code>ï¼›</p></li><li><p><code>promise</code> åªèƒ½ä» <code>pending</code> åˆ° <code>rejected</code>, æˆ–è€…ä» <code>pending</code> åˆ° <code>fulfilled</code>ï¼ŒçŠ¶æ€ä¸€æ—¦ç¡®è®¤ï¼Œå°±ä¸ä¼šå†æ”¹å˜ï¼›</p></li><li><p><code>promise</code> å¿…é¡»æœ‰ä¸€ä¸ª <code>then</code> æ–¹æ³•ï¼Œ<code>then</code> æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ <code>promise</code> æˆåŠŸçš„å›è°ƒ <code>onFulfilled</code>, å’Œ <code>promise</code> å¤±è´¥çš„å›è°ƒ <code>onRejected</code>ï¼›</p></li><li><p><code>then</code> æ–¹æ³•çš„æ‰§è¡Œç»“æœä¹Ÿä¼šè¿”å›ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥è¿›è¡Œ <code>then</code> çš„é“¾å¼æ‰§è¡Œï¼Œè¿™ä¹Ÿæ˜¯è§£å†³å›è°ƒåœ°ç‹±çš„ä¸»è¦æ–¹å¼ã€‚</p></li><li><p>å¦‚æœè°ƒç”¨ <code>then</code> æ—¶ï¼Œ<code>promise</code> å·²ç»æˆåŠŸï¼Œåˆ™æ‰§è¡Œ <code>onFulfilled</code>ï¼Œå‚æ•°æ˜¯ <code>promise</code> çš„ <code>value</code></p></li><li><p>å¦‚æœè°ƒç”¨ <code>then</code> æ—¶ï¼Œ<code>promise</code> å·²ç»å¤±è´¥ï¼Œé‚£ä¹ˆæ‰§è¡Œ <code>onRejected</code>, å‚æ•°æ˜¯ <code>promise</code> çš„ <code>reason</code></p></li><li><p>å¦‚æœ <code>then</code> ä¸­æŠ›å‡ºäº†å¼‚å¸¸ï¼Œé‚£ä¹ˆå°±ä¼šæŠŠè¿™ä¸ªå¼‚å¸¸ä½œä¸ºå‚æ•°ï¼Œä¼ é€’ç»™ä¸‹ä¸€ä¸ª <code>then</code> çš„å¤±è´¥çš„å›è°ƒ <code>onRejected</code></p></li></ol><p>ä¸‹é¢å°±é€šè¿‡ä¾‹å­è¿›ä¸€æ­¥è®²è§£ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„å»º Promise</span></span><br><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="comment">/* å¼‚æ­¥æ“ä½œæˆåŠŸ */</span>) &#123;</span><br><span class="line">        resolve(data);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">/* å¼‚æ­¥æ“ä½œå¤±è´¥ */</span></span><br><span class="line">        reject(error);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><p><code>resolve</code> å‡½æ•°çš„ä½œç”¨ï¼šåœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ï¼›</p></li><li><p><code>reject</code> å‡½æ•°çš„ä½œç”¨ï¼šåœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚</p></li></ul><p><code>Promise</code> å®ä¾‹ç”Ÿæˆä»¥åï¼Œå¯ä»¥ç”¨ <code>then</code> æ–¹æ³•æŒ‡å®š <code>resolved</code> çŠ¶æ€å’Œ <code>reject</code> çŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">promise.then(onFulfilled, onRejected);</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// do something when success</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// do something when failure</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è€Œ <code>then</code> æ–¹æ³•ä¸­æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå°†åœ¨å½“å‰è„šæœ¬æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ‰ä¼šæ‰§è¡Œã€‚å¦‚ä¸‹ä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ„é€ å‡½æ•°å†…éƒ¨ åŒæ­¥æ‰§è¡Œ</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;before resolved&#x27;</span>);</span><br><span class="line">  resolve();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;after resolved&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¼‚æ­¥æ‰§è¡Œ</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;resolved&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;outer&#x27;</span>);</span><br><span class="line"></span><br><span class="line">-------output-------</span><br><span class="line">before resolved</span><br><span class="line">after resolved</span><br><span class="line">outer</span><br><span class="line">resolved</span><br></pre></td></tr></table></figure><h2 id="Promise-å¸¸ç”¨-API"><a href="#Promise-å¸¸ç”¨-API" class="headerlink" title="Promise å¸¸ç”¨ API"></a>Promise å¸¸ç”¨ API</h2><ul><li><p><code>Promise.resolve()</code>  é»˜è®¤äº§ç”Ÿä¸€ä¸ªæˆåŠŸçš„ <code>promise</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="function"><span class="title">resolve</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    resolve(data);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>Promise.reject()</code> é»˜è®¤äº§ç”Ÿä¸€ä¸ªå¤±è´¥çš„ <code>promise</code>ï¼Œ<code>Promise.reject</code> æ˜¯ç›´æ¥å°†å€¼å˜æˆé”™è¯¯ç»“æœã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="function"><span class="title">reject</span>(<span class="params">reason</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    reject(reason);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>Promise.prototype.catch()</code> ç”¨æ¥æ•è· <code>promise</code> çš„å¼‚å¸¸ï¼Œå°±ç›¸å½“äºä¸€ä¸ªæ²¡æœ‰æˆåŠŸçš„ <code>then</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.prototype.catch = <span class="function"><span class="keyword">function</span>(<span class="params">errCallback</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.then(<span class="literal">null</span>,errCallback)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>Promise.prototype.finally()</code> <code>finally</code> è¡¨ç¤ºä¸æ˜¯æœ€ç»ˆçš„æ„æ€ï¼Œè€Œæ˜¯æ— è®ºå¦‚ä½•éƒ½ä¼šæ‰§è¡Œçš„æ„æ€ã€‚ å¦‚æœè¿”å›ä¸€ä¸ª <code>promise</code> ä¼šç­‰å¾…è¿™ä¸ª <code>promise</code> ä¹Ÿæ‰§è¡Œå®Œæ¯•ã€‚å¦‚æœè¿”å›çš„æ˜¯æˆåŠŸçš„ <code>promise</code>ï¼Œä¼šé‡‡ç”¨ä¸Šä¸€æ¬¡çš„ç»“æœï¼›å¦‚æœè¿”å›çš„æ˜¯å¤±è´¥çš„ <code>promise</code>ï¼Œä¼šç”¨è¿™ä¸ªå¤±è´¥çš„ç»“æœï¼Œä¼ åˆ° <code>catch</code> ä¸­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.prototype.finally = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(callback()).then(<span class="function">() =&gt;</span> value)</span><br><span class="line">  &#125;,<span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(callback()).then(<span class="function">() =&gt;</span> &#123;<span class="keyword">throw</span> reason&#125;)</span><br><span class="line">  &#125;)  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>Promise.all()</code> æ˜¯è§£å†³å¹¶å‘é—®é¢˜çš„ï¼Œå¤šä¸ªå¼‚æ­¥å¹¶å‘è·å–æœ€ç»ˆçš„ç»“æœï¼ˆå¦‚æœæœ‰ä¸€ä¸ªå¤±è´¥åˆ™å¤±è´¥ï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.all = <span class="function"><span class="keyword">function</span>(<span class="params">values</span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(values)) &#123;</span><br><span class="line">    <span class="keyword">const</span> type = <span class="keyword">typeof</span> values;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">`TypeError: <span class="subst">$&#123;type&#125;</span> <span class="subst">$&#123;values&#125;</span> is not iterable`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> resultArr = [];</span><br><span class="line">    <span class="keyword">let</span> orderIndex = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> processResultByKey = <span class="function">(<span class="params">value, index</span>) =&gt;</span> &#123;</span><br><span class="line">      resultArr[index] = value;</span><br><span class="line">      <span class="keyword">if</span> (++orderIndex === values.length) &#123;</span><br><span class="line">          resolve(resultArr)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; values.length; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> value = values[i];</span><br><span class="line">      <span class="keyword">if</span> (value &amp;&amp; <span class="keyword">typeof</span> value.then === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">        value.then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">          processResultByKey(value, i);</span><br><span class="line">        &#125;, reject);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        processResultByKey(value, i);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        resolve(<span class="string">&#x27;ok1&#x27;</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        reject(<span class="string">&#x27;ok2&#x27;</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.all([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,p1,p2]).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;resolve&#x27;</span>, data);</span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;reject&#x27;</span>, err);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p><code>Promise.race(ï¼‰</code> ç”¨æ¥å¤„ç†å¤šä¸ªè¯·æ±‚ï¼Œé‡‡ç”¨æœ€å¿«çš„ï¼ˆè°å…ˆå®Œæˆç”¨è°çš„ï¼‰ã€‚</p></li></ul><h2 id="æ‰‹å†™ä¸€ä¸ªç¬¦åˆ-Promise-A-è§„èŒƒçš„-Promise"><a href="#æ‰‹å†™ä¸€ä¸ªç¬¦åˆ-Promise-A-è§„èŒƒçš„-Promise" class="headerlink" title="æ‰‹å†™ä¸€ä¸ªç¬¦åˆ Promise/A+ è§„èŒƒçš„ Promise"></a>æ‰‹å†™ä¸€ä¸ªç¬¦åˆ Promise/A+ è§„èŒƒçš„ Promise</h2><p>ä¾æ® <code>promise</code> çš„åŸºæœ¬ç‰¹å¾ï¼Œæˆ‘ä»¬è¯•ç€å‹¾å‹’ä¸‹ <code>Promise</code> çš„å½¢çŠ¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸‰ä¸ªçŠ¶æ€ï¼šPENDINGã€FULFILLEDã€REJECTED</span></span><br><span class="line"><span class="keyword">const</span> PENDING = <span class="string">&#x27;PENDING&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> FULFILLED = <span class="string">&#x27;FULFILLED&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> REJECTED = <span class="string">&#x27;REJECTED&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Promise</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">executor</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// é»˜è®¤çŠ¶æ€ä¸º PENDING</span></span><br><span class="line">    <span class="built_in">this</span>.status = PENDING;</span><br><span class="line">    <span class="comment">// å­˜æ”¾æˆåŠŸçŠ¶æ€çš„å€¼ï¼Œé»˜è®¤ä¸º undefined</span></span><br><span class="line">    <span class="built_in">this</span>.value = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="comment">// å­˜æ”¾å¤±è´¥çŠ¶æ€çš„å€¼ï¼Œé»˜è®¤ä¸º undefined</span></span><br><span class="line">    <span class="built_in">this</span>.reason = <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨æ­¤æ–¹æ³•å°±æ˜¯æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">let</span> resolve = <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// çŠ¶æ€ä¸º PENDING æ—¶æ‰å¯ä»¥æ›´æ–°çŠ¶æ€ï¼Œé˜²æ­¢ executor ä¸­è°ƒç”¨äº†ä¸¤æ¬¡ resovle/reject æ–¹æ³•</span></span><br><span class="line">      <span class="keyword">if</span>(<span class="built_in">this</span>.status ===  PENDING) &#123;</span><br><span class="line">        <span class="built_in">this</span>.status = FULFILLED;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨æ­¤æ–¹æ³•å°±æ˜¯å¤±è´¥</span></span><br><span class="line">    <span class="keyword">let</span> reject = <span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// çŠ¶æ€ä¸º PENDING æ—¶æ‰å¯ä»¥æ›´æ–°çŠ¶æ€ï¼Œé˜²æ­¢ executor ä¸­è°ƒç”¨äº†ä¸¤æ¬¡ resovle/reject æ–¹æ³•</span></span><br><span class="line">      <span class="keyword">if</span>(<span class="built_in">this</span>.status ===  PENDING) &#123;</span><br><span class="line">        <span class="built_in">this</span>.status = REJECTED;</span><br><span class="line">        <span class="built_in">this</span>.reason = reason;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// ç«‹å³æ‰§è¡Œï¼Œå°† resolve å’Œ reject å‡½æ•°ä¼ ç»™ä½¿ç”¨è€…  </span></span><br><span class="line">      executor(resolve,reject)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="comment">// å‘ç”Ÿå¼‚å¸¸æ—¶æ‰§è¡Œå¤±è´¥é€»è¾‘</span></span><br><span class="line">      reject(error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åŒ…å«ä¸€ä¸ª then æ–¹æ³•ï¼Œå¹¶æ¥æ”¶ä¸¤ä¸ªå‚æ•° onFulfilledã€onRejected</span></span><br><span class="line">  <span class="function"><span class="title">then</span>(<span class="params">onFulfilled, onRejected</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.status === FULFILLED) &#123;</span><br><span class="line">      onFulfilled(<span class="built_in">this</span>.value)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.status === REJECTED) &#123;</span><br><span class="line">      onRejected(<span class="built_in">this</span>.reason)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†™å®Œæˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;æˆåŠŸ&#x27;</span>);</span><br><span class="line">&#125;).then(</span><br><span class="line">  (data) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;success&#x27;</span>, data)</span><br><span class="line">  &#125;,</span><br><span class="line">  (err) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;faild&#x27;</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>æ§åˆ¶å°è¾“å‡ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;success æˆåŠŸ&quot;</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å·²ç»å®ç°äº†ä¸€ä¸ªåŸºç¡€ç‰ˆçš„ <code>Promise</code>ï¼Œä½†æ˜¯è¿˜ä¸è¦é«˜å…´çš„å¤ªæ—©å™¢ï¼Œè¿™é‡Œæˆ‘ä»¬åªå¤„ç†äº†åŒæ­¥æ“ä½œçš„ <code>promise</code>ã€‚å¦‚æœåœ¨ <code>executor()</code>ä¸­ä¼ å…¥ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„è¯å‘¢ï¼Œæˆ‘ä»¬è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ä¼ å…¥ä¸€ä¸ªå¼‚æ­¥æ“ä½œ</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="string">&#x27;æˆåŠŸ&#x27;</span>);</span><br><span class="line">  &#125;,<span class="number">1000</span>);</span><br><span class="line">&#125;).then(</span><br><span class="line">  (data) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;success&#x27;</span>, data)</span><br><span class="line">  &#125;,</span><br><span class="line">  (err) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;faild&#x27;</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œæµ‹è¯•è„šæœ¬åå‘ç°ï¼Œ<code>promise</code> æ²¡æœ‰ä»»ä½•è¿”å›ã€‚</p><blockquote><p>å› ä¸º promise è°ƒç”¨ then æ–¹æ³•æ—¶ï¼Œå½“å‰çš„ promise å¹¶æ²¡æœ‰æˆåŠŸï¼Œä¸€ç›´å¤„äº pending çŠ¶æ€ã€‚æ‰€ä»¥å¦‚æœå½“è°ƒç”¨ then æ–¹æ³•æ—¶ï¼Œå½“å‰çŠ¶æ€æ˜¯ pendingï¼Œæˆ‘ä»¬éœ€è¦å…ˆå°†æˆåŠŸå’Œå¤±è´¥çš„å›è°ƒåˆ†åˆ«å­˜æ”¾èµ·æ¥ï¼Œåœ¨executor()çš„å¼‚æ­¥ä»»åŠ¡è¢«æ‰§è¡Œæ—¶ï¼Œè§¦å‘ resolve æˆ– rejectï¼Œä¾æ¬¡è°ƒç”¨æˆåŠŸæˆ–å¤±è´¥çš„å›è°ƒã€‚</p></blockquote><p>ç»“åˆè¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬ä¼˜åŒ–ä¸€ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PENDING = <span class="string">&#x27;PENDING&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> FULFILLED = <span class="string">&#x27;FULFILLED&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> REJECTED = <span class="string">&#x27;REJECTED&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Promise</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">executor</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.status = PENDING;</span><br><span class="line">    <span class="built_in">this</span>.value = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="built_in">this</span>.reason = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="comment">// å­˜æ”¾æˆåŠŸçš„å›è°ƒ</span></span><br><span class="line">    <span class="built_in">this</span>.onResolvedCallbacks = [];</span><br><span class="line">    <span class="comment">// å­˜æ”¾å¤±è´¥çš„å›è°ƒ</span></span><br><span class="line">    <span class="built_in">this</span>.onRejectedCallbacks= [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> resolve = <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="built_in">this</span>.status ===  PENDING) &#123;</span><br><span class="line">        <span class="built_in">this</span>.status = FULFILLED;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">        <span class="comment">// ä¾æ¬¡å°†å¯¹åº”çš„å‡½æ•°æ‰§è¡Œ</span></span><br><span class="line">        <span class="built_in">this</span>.onResolvedCallbacks.forEach(<span class="function"><span class="params">fn</span>=&gt;</span>fn());</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> reject = <span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="built_in">this</span>.status ===  PENDING) &#123;</span><br><span class="line">        <span class="built_in">this</span>.status = REJECTED;</span><br><span class="line">        <span class="built_in">this</span>.reason = reason;</span><br><span class="line">        <span class="comment">// ä¾æ¬¡å°†å¯¹åº”çš„å‡½æ•°æ‰§è¡Œ</span></span><br><span class="line">        <span class="built_in">this</span>.onRejectedCallbacks.forEach(<span class="function"><span class="params">fn</span>=&gt;</span>fn());</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      executor(resolve,reject)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      reject(error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">then</span>(<span class="params">onFulfilled, onRejected</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.status === FULFILLED) &#123;</span><br><span class="line">      onFulfilled(<span class="built_in">this</span>.value)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.status === REJECTED) &#123;</span><br><span class="line">      onRejected(<span class="built_in">this</span>.reason)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.status === PENDING) &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœpromiseçš„çŠ¶æ€æ˜¯ pendingï¼Œéœ€è¦å°† onFulfilled å’Œ onRejected å‡½æ•°å­˜æ”¾èµ·æ¥ï¼Œç­‰å¾…çŠ¶æ€ç¡®å®šåï¼Œå†ä¾æ¬¡å°†å¯¹åº”çš„å‡½æ•°æ‰§è¡Œ</span></span><br><span class="line">      <span class="built_in">this</span>.onResolvedCallbacks.push(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        onFulfilled(<span class="built_in">this</span>.value)</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœpromiseçš„çŠ¶æ€æ˜¯ pendingï¼Œéœ€è¦å°† onFulfilled å’Œ onRejected å‡½æ•°å­˜æ”¾èµ·æ¥ï¼Œç­‰å¾…çŠ¶æ€ç¡®å®šåï¼Œå†ä¾æ¬¡å°†å¯¹åº”çš„å‡½æ•°æ‰§è¡Œ</span></span><br><span class="line">      <span class="built_in">this</span>.onRejectedCallbacks.push(<span class="function">()=&gt;</span> &#123;</span><br><span class="line">        onRejected(<span class="built_in">this</span>.reason);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="string">&#x27;æˆåŠŸ&#x27;</span>);</span><br><span class="line">  &#125;,<span class="number">1000</span>);</span><br><span class="line">&#125;).then(</span><br><span class="line">  (data) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;success&#x27;</span>, data)</span><br><span class="line">  &#125;,</span><br><span class="line">  (err) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;faild&#x27;</span>, err)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>æ§åˆ¶å°ç­‰å¾… 1s åè¾“å‡ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;success æˆåŠŸ&quot;</span></span><br></pre></td></tr></table></figure><p>okï¼å¤§åŠŸå‘Šæˆï¼Œå¼‚æ­¥é—®é¢˜å·²ç»è§£å†³äº†ï¼</p><p>ç†Ÿæ‚‰è®¾è®¡æ¨¡å¼çš„åŒå­¦ï¼Œåº”è¯¥æ„è¯†åˆ°äº†è¿™å…¶å®æ˜¯ä¸€ä¸ª <code>å‘å¸ƒè®¢é˜…æ¨¡å¼</code>ï¼Œè¿™ç§æ”¶é›†ä¾èµ– -&gt; è§¦å‘é€šçŸ¥ -&gt; å–å‡ºä¾èµ–æ‰§è¡Œçš„æ–¹å¼ï¼Œè¢«å¹¿æ³›è¿ç”¨äºå‘å¸ƒè®¢é˜…æ¨¡å¼çš„å®ç°ã€‚</p><h2 id="then-çš„é“¾å¼è°ƒç”¨-amp-å€¼ç©¿é€ç‰¹æ€§"><a href="#then-çš„é“¾å¼è°ƒç”¨-amp-å€¼ç©¿é€ç‰¹æ€§" class="headerlink" title="then çš„é“¾å¼è°ƒç”¨&amp;å€¼ç©¿é€ç‰¹æ€§"></a>then çš„é“¾å¼è°ƒç”¨&amp;å€¼ç©¿é€ç‰¹æ€§</h2><blockquote><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œpromise çš„ä¼˜åŠ¿åœ¨äºå¯ä»¥é“¾å¼è°ƒç”¨ã€‚åœ¨æˆ‘ä»¬ä½¿ç”¨ Promise çš„æ—¶å€™ï¼Œå½“ then å‡½æ•°ä¸­ return äº†ä¸€ä¸ªå€¼ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆå€¼ï¼Œæˆ‘ä»¬éƒ½èƒ½åœ¨ä¸‹ä¸€ä¸ª then ä¸­è·å–åˆ°ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„then çš„é“¾å¼è°ƒç”¨ã€‚è€Œä¸”ï¼Œå½“æˆ‘ä»¬ä¸åœ¨ then ä¸­æ”¾å…¥å‚æ•°ï¼Œä¾‹ï¼špromise.then().then()ï¼Œé‚£ä¹ˆå…¶åé¢çš„ then ä¾æ—§å¯ä»¥å¾—åˆ°ä¹‹å‰ then è¿”å›çš„å€¼ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„å€¼çš„ç©¿é€ã€‚é‚£å…·ä½“å¦‚ä½•å®ç°å‘¢ï¼Ÿç®€å•æ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœæ¯æ¬¡è°ƒç”¨ then çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½é‡æ–°åˆ›å»ºä¸€ä¸ª promise å¯¹è±¡ï¼Œå¹¶æŠŠä¸Šä¸€ä¸ª then çš„è¿”å›ç»“æœä¼ ç»™è¿™ä¸ªæ–°çš„ promise çš„ then æ–¹æ³•ï¼Œä¸å°±å¯ä»¥ä¸€ç›´ then ä¸‹å»äº†ä¹ˆï¼Ÿé‚£æˆ‘ä»¬æ¥è¯•ç€å®ç°ä¸€ä¸‹ã€‚è¿™ä¹Ÿæ˜¯æ‰‹å†™ Promise æºç çš„é‡ä¸­ä¹‹é‡ï¼Œæ‰€ä»¥ï¼Œæ‰“èµ·ç²¾ç¥æ¥ï¼Œé‡å¤´æˆæ¥å’¯ï¼</p></blockquote><p>æœ‰äº†ä¸Šé¢çš„æƒ³æ³•ï¼Œæˆ‘ä»¬å†ç»“åˆ <code>Promise/A+</code> è§„èŒƒæ¢³ç†ä¸€ä¸‹æ€è·¯ï¼š</p><ol><li><p><code>then</code> çš„å‚æ•° <code>onFulfilled</code> å’Œ <code>onRejected</code> å¯ä»¥ç¼ºçœï¼Œå¦‚æœ <code>onFulfilled</code> æˆ–è€… <code>onRejected</code> ä¸æ˜¯å‡½æ•°ï¼Œå°†å…¶å¿½ç•¥ï¼Œä¸”ä¾æ—§å¯ä»¥åœ¨ä¸‹é¢çš„ <code>then</code> ä¸­è·å–åˆ°ä¹‹å‰è¿”å›çš„å€¼ï¼›</p></li><li><p><code>promise</code> å¯ä»¥ <code>then</code> å¤šæ¬¡ï¼Œæ¯æ¬¡æ‰§è¡Œå®Œ <code>promise.then</code> æ–¹æ³•åè¿”å›çš„éƒ½æ˜¯ä¸€ä¸ª â€œæ–°çš„promiseâ€ï¼›</p></li><li><p>å¦‚æœ <code>then</code> çš„è¿”å›å€¼ x æ˜¯ä¸€ä¸ªæ™®é€šå€¼ï¼Œé‚£ä¹ˆå°±ä¼šæŠŠè¿™ä¸ªç»“æœä½œä¸ºå‚æ•°ï¼Œä¼ é€’ç»™ä¸‹ä¸€ä¸ª <code>then</code> çš„æˆåŠŸçš„å›è°ƒä¸­ï¼›</p></li><li><p>å¦‚æœ <code>then</code> ä¸­æŠ›å‡ºäº†å¼‚å¸¸ï¼Œé‚£ä¹ˆå°±ä¼šæŠŠè¿™ä¸ªå¼‚å¸¸ä½œä¸ºå‚æ•°ï¼Œä¼ é€’ç»™ä¸‹ä¸€ä¸ª <code>then</code> çš„å¤±è´¥çš„å›è°ƒä¸­ï¼›</p></li><li><p>å¦‚æœ <code>then</code> çš„è¿”å›å€¼ x æ˜¯ä¸€ä¸ª <code>promise</code>ï¼Œé‚£ä¹ˆä¼šç­‰è¿™ä¸ª <code>promise</code> æ‰§è¡Œå®Œï¼Œ<code>promise</code> å¦‚æœæˆåŠŸï¼Œå°±èµ°ä¸‹ä¸€ä¸ª <code>then</code> çš„æˆåŠŸï¼›å¦‚æœå¤±è´¥ï¼Œå°±èµ°ä¸‹ä¸€ä¸ª <code>then</code> çš„å¤±è´¥ï¼›å¦‚æœæŠ›å‡ºå¼‚å¸¸ï¼Œå°±èµ°ä¸‹ä¸€ä¸ª <code>then</code> çš„å¤±è´¥ï¼›</p></li><li><p>å¦‚æœ <code>then</code> çš„è¿”å›å€¼ x å’Œ <code>promise</code> æ˜¯åŒä¸€ä¸ªå¼•ç”¨å¯¹è±¡ï¼Œé€ æˆå¾ªç¯å¼•ç”¨ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼ŒæŠŠå¼‚å¸¸ä¼ é€’ç»™ä¸‹ä¸€ä¸ª <code>then</code> çš„å¤±è´¥çš„å›è°ƒä¸­ï¼›</p></li><li><p>å¦‚æœ <code>then</code> çš„è¿”å›å€¼ x æ˜¯ä¸€ä¸ª <code>promise</code>ï¼Œä¸” x åŒæ—¶è°ƒç”¨ <code>resolve</code> å‡½æ•°å’Œ <code>reject</code> å‡½æ•°ï¼Œåˆ™ç¬¬ä¸€æ¬¡è°ƒç”¨ä¼˜å…ˆï¼Œå…¶ä»–æ‰€æœ‰è°ƒç”¨è¢«å¿½ç•¥ï¼›</p></li></ol><p>æˆ‘ä»¬å°†ä»£ç è¡¥å……å®Œæ•´ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PENDING = <span class="string">&#x27;PENDING&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> FULFILLED = <span class="string">&#x27;FULFILLED&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> REJECTED = <span class="string">&#x27;REJECTED&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> resolvePromise = <span class="function">(<span class="params">promise2, x, resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è‡ªå·±ç­‰å¾…è‡ªå·±å®Œæˆæ˜¯é”™è¯¯çš„å®ç°ï¼Œç”¨ä¸€ä¸ªç±»å‹é”™è¯¯ï¼Œç»“æŸæ‰ promise  Promise/A+ 2.3.1</span></span><br><span class="line">  <span class="keyword">if</span> (promise2 === x) &#123; </span><br><span class="line">    <span class="keyword">return</span> reject(<span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&#x27;Chaining cycle detected for promise #&lt;Promise&gt;&#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// Promise/A+ 2.3.3.3.3 åªèƒ½è°ƒç”¨ä¸€æ¬¡</span></span><br><span class="line">  <span class="keyword">let</span> called;</span><br><span class="line">  <span class="comment">// åç»­çš„æ¡ä»¶è¦ä¸¥æ ¼åˆ¤æ–­ ä¿è¯ä»£ç èƒ½å’Œåˆ«çš„åº“ä¸€èµ·ä½¿ç”¨</span></span><br><span class="line">  <span class="keyword">if</span> ((<span class="keyword">typeof</span> x === <span class="string">&#x27;object&#x27;</span> &amp;&amp; x != <span class="literal">null</span>) || <span class="keyword">typeof</span> x === <span class="string">&#x27;function&#x27;</span>) &#123; </span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// ä¸ºäº†åˆ¤æ–­ resolve è¿‡çš„å°±ä¸ç”¨å† reject äº†ï¼ˆæ¯”å¦‚ reject å’Œ resolve åŒæ—¶è°ƒç”¨çš„æ—¶å€™ï¼‰  Promise/A+ 2.3.3.1</span></span><br><span class="line">      <span class="keyword">let</span> then = x.then;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> then === <span class="string">&#x27;function&#x27;</span>) &#123; </span><br><span class="line">        <span class="comment">// ä¸è¦å†™æˆ x.thenï¼Œç›´æ¥ then.call å°±å¯ä»¥äº† å› ä¸º x.then ä¼šå†æ¬¡å–å€¼ï¼ŒObject.defineProperty  Promise/A+ 2.3.3.3</span></span><br><span class="line">        then.call(x, <span class="function"><span class="params">y</span> =&gt;</span> &#123; <span class="comment">// æ ¹æ® promise çš„çŠ¶æ€å†³å®šæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥</span></span><br><span class="line">          <span class="keyword">if</span> (called) <span class="keyword">return</span>;</span><br><span class="line">          called = <span class="literal">true</span>;</span><br><span class="line">          <span class="comment">// é€’å½’è§£æçš„è¿‡ç¨‹ï¼ˆå› ä¸ºå¯èƒ½ promise ä¸­è¿˜æœ‰ promiseï¼‰ Promise/A+ 2.3.3.3.1</span></span><br><span class="line">          resolvePromise(promise2, y, resolve, reject); </span><br><span class="line">        &#125;, <span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// åªè¦å¤±è´¥å°±å¤±è´¥ Promise/A+ 2.3.3.3.2</span></span><br><span class="line">          <span class="keyword">if</span> (called) <span class="keyword">return</span>;</span><br><span class="line">          called = <span class="literal">true</span>;</span><br><span class="line">          reject(r);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœ x.then æ˜¯ä¸ªæ™®é€šå€¼å°±ç›´æ¥è¿”å› resolve ä½œä¸ºç»“æœ  Promise/A+ 2.3.3.4</span></span><br><span class="line">        resolve(x);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="comment">// Promise/A+ 2.3.3.2</span></span><br><span class="line">      <span class="keyword">if</span> (called) <span class="keyword">return</span>;</span><br><span class="line">      called = <span class="literal">true</span>;</span><br><span class="line">      reject(e)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœ x æ˜¯ä¸ªæ™®é€šå€¼å°±ç›´æ¥è¿”å› resolve ä½œä¸ºç»“æœ  Promise/A+ 2.3.4  </span></span><br><span class="line">    resolve(x)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Promise</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">executor</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.status = PENDING;</span><br><span class="line">    <span class="built_in">this</span>.value = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="built_in">this</span>.reason = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="built_in">this</span>.onResolvedCallbacks = [];</span><br><span class="line">    <span class="built_in">this</span>.onRejectedCallbacks= [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> resolve = <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="built_in">this</span>.status ===  PENDING) &#123;</span><br><span class="line">        <span class="built_in">this</span>.status = FULFILLED;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">        <span class="built_in">this</span>.onResolvedCallbacks.forEach(<span class="function"><span class="params">fn</span>=&gt;</span>fn());</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> reject = <span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="built_in">this</span>.status ===  PENDING) &#123;</span><br><span class="line">        <span class="built_in">this</span>.status = REJECTED;</span><br><span class="line">        <span class="built_in">this</span>.reason = reason;</span><br><span class="line">        <span class="built_in">this</span>.onRejectedCallbacks.forEach(<span class="function"><span class="params">fn</span>=&gt;</span>fn());</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      executor(resolve,reject)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      reject(error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">then</span>(<span class="params">onFulfilled, onRejected</span>)</span> &#123;</span><br><span class="line">    <span class="comment">//è§£å†³ onFufilledï¼ŒonRejected æ²¡æœ‰ä¼ å€¼çš„é—®é¢˜</span></span><br><span class="line">    <span class="comment">//Promise/A+ 2.2.1 / Promise/A+ 2.2.5 / Promise/A+ 2.2.7.3 / Promise/A+ 2.2.7.4</span></span><br><span class="line">    onFulfilled = <span class="keyword">typeof</span> onFulfilled === <span class="string">&#x27;function&#x27;</span> ? onFulfilled : <span class="function"><span class="params">v</span> =&gt;</span> v;</span><br><span class="line">    <span class="comment">//å› ä¸ºé”™è¯¯çš„å€¼è¦è®©åé¢è®¿é—®åˆ°ï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿè¦è·‘å‡ºä¸ªé”™è¯¯ï¼Œä¸ç„¶ä¼šåœ¨ä¹‹å then çš„ resolve ä¸­æ•è·</span></span><br><span class="line">    onRejected = <span class="keyword">typeof</span> onRejected === <span class="string">&#x27;function&#x27;</span> ? onRejected : <span class="function"><span class="params">err</span> =&gt;</span> &#123; <span class="keyword">throw</span> err &#125;;</span><br><span class="line">    <span class="comment">// æ¯æ¬¡è°ƒç”¨ then éƒ½è¿”å›ä¸€ä¸ªæ–°çš„ promise  Promise/A+ 2.2.7</span></span><br><span class="line">    <span class="keyword">let</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.status === FULFILLED) &#123;</span><br><span class="line">        <span class="comment">//Promise/A+ 2.2.2</span></span><br><span class="line">        <span class="comment">//Promise/A+ 2.2.4 --- setTimeout</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//Promise/A+ 2.2.7.1</span></span><br><span class="line">            <span class="keyword">let</span> x = onFulfilled(<span class="built_in">this</span>.value);</span><br><span class="line">            <span class="comment">// xå¯èƒ½æ˜¯ä¸€ä¸ªproimise</span></span><br><span class="line">            resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            <span class="comment">//Promise/A+ 2.2.7.2</span></span><br><span class="line">            reject(e)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;, <span class="number">0</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.status === REJECTED) &#123;</span><br><span class="line">        <span class="comment">//Promise/A+ 2.2.3</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> x = onRejected(<span class="built_in">this</span>.reason);</span><br><span class="line">            resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            reject(e)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;, <span class="number">0</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.status === PENDING) &#123;</span><br><span class="line">        <span class="built_in">this</span>.onResolvedCallbacks.push(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">              <span class="keyword">let</span> x = onFulfilled(<span class="built_in">this</span>.value);</span><br><span class="line">              resolvePromise(promise2, x, resolve, reject);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">              reject(e)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, <span class="number">0</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.onRejectedCallbacks.push(<span class="function">()=&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">              <span class="keyword">let</span> x = onRejected(<span class="built_in">this</span>.reason);</span><br><span class="line">              resolvePromise(promise2, x, resolve, reject)</span><br><span class="line">            &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">              reject(e)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, <span class="number">0</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> promise2;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="string">&#x27;å¤±è´¥&#x27;</span>);</span><br><span class="line">&#125;).then().then().then(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;,<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;err&#x27;</span>,err);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ§åˆ¶å°è¾“å‡ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;å¤±è´¥ err&quot;</span></span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº† <code>promise</code> æœ€å…³é”®çš„éƒ¨åˆ†ï¼š<code>then</code> çš„é“¾å¼è°ƒç”¨å’Œå€¼çš„ç©¿é€ã€‚ææ¸…æ¥šäº† <code>then</code> çš„é“¾å¼è°ƒç”¨å’Œå€¼çš„ç©¿é€ï¼Œä½ ä¹Ÿå°±ææ¸…æ¥šäº† <code>Promise</code>ã€‚</p><h2 id="Promise-æœ‰ä»€ä¹ˆç¼ºé™·ï¼Œå¯ä»¥å¦‚ä½•è§£å†³ï¼Ÿ"><a href="#Promise-æœ‰ä»€ä¹ˆç¼ºé™·ï¼Œå¯ä»¥å¦‚ä½•è§£å†³ï¼Ÿ" class="headerlink" title="Promise æœ‰ä»€ä¹ˆç¼ºé™·ï¼Œå¯ä»¥å¦‚ä½•è§£å†³ï¼Ÿ"></a>Promise æœ‰ä»€ä¹ˆç¼ºé™·ï¼Œå¯ä»¥å¦‚ä½•è§£å†³ï¼Ÿ</h2><blockquote><p>Promise è™½ç„¶è·³å‡ºäº†å¼‚æ­¥åµŒå¥—çš„æ€ªåœˆï¼Œç”¨é“¾å¼è¡¨è¾¾æ›´åŠ æ¸…æ™°ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå‘ç°å¦‚æœæœ‰å¤§é‡çš„å¼‚æ­¥è¯·æ±‚çš„æ—¶å€™ï¼Œæµç¨‹å¤æ‚çš„æƒ…å†µä¸‹ï¼Œä¼šå‘ç°å……æ»¡äº†å±å¹•çš„ thenï¼Œçœ‹èµ·æ¥éå¸¸åƒåŠ›ï¼Œè€Œ Async/Await çš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³è¿™ç§å¤æ‚çš„æƒ…å†µã€‚</p></blockquote><p><strong>ä¼˜ç¼ºç‚¹ï¼š</strong></p><ol><li><p>ä»£ç ç®€æ´,ä¸ç”¨ <code>then</code>ï¼Œé¿å…äº†åµŒå¥—ä»£ç </p></li><li><p>é”™è¯¯å¤„ç†ï¼Œ<code>Async/Await</code> è®© <code>try/catch</code> å¯ä»¥åŒæ—¶å¤„ç†åŒæ­¥å’Œå¼‚æ­¥é”™è¯¯ï¼Œåœ¨ä¸‹é¢çš„ <code>promise</code> ç¤ºä¾‹ä¸­ï¼Œ<code>try/catch</code> ä¸èƒ½å¤„ç† <code>JSON.parse</code> çš„é”™è¯¯ï¼Œå› ä¸ºå®ƒåœ¨ <code>Promise</code> ä¸­ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>.catch</code>ï¼Œè¿™æ ·é”™è¯¯å¤„ç†ä»£ç éå¸¸å†—ä½™ã€‚å¹¶ä¸”ï¼Œåœ¨æˆ‘ä»¬çš„å®é™…ç”Ÿäº§ä»£ç ä¼šæ›´åŠ å¤æ‚ã€‚</p></li><li><p>ä¸­é—´å€¼ä¸å¥½æ“ä½œ</p></li><li><p>è°ƒè¯•å›°éš¾</p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> makeRequest = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            getJSON().then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// JSON.parseå¯èƒ½ä¼šå‡ºé”™</span></span><br><span class="line">                <span class="keyword">const</span> data = <span class="built_in">JSON</span>.parse(result)</span><br><span class="line">                <span class="built_in">console</span>.log(data)</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="comment">// å–æ¶ˆæ³¨é‡Šï¼Œå¤„ç†å¼‚æ­¥ä»£ç çš„é”™è¯¯</span></span><br><span class="line">            <span class="comment">// .catch((err) =&gt; &#123;</span></span><br><span class="line">            <span class="comment">//   console.log(err)</span></span><br><span class="line">            <span class="comment">// &#125;)</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(err)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">const</span> makeRequest = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// this parse may fail</span></span><br><span class="line">            <span class="keyword">const</span> data = <span class="built_in">JSON</span>.parse(<span class="keyword">await</span> getJSON())</span><br><span class="line">            <span class="built_in">console</span>.log(data)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(err)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><code>Async/Await</code> çš„å¢åŠ ï¼Œå¯ä»¥è®©æ¥å£æŒ‰é¡ºåºå¼‚æ­¥è·å–æ•°æ®ï¼Œç”¨æ›´å¯è¯»ï¼Œå¯ç»´æŠ¤çš„æ–¹å¼å¤„ç†å›è°ƒã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">demo01</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">123</span>;</span><br><span class="line">&#125;</span><br><span class="line">demo01().then(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(val);<span class="comment">// 123</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// asyncç›¸å½“äºpromise, awiteç›¸å½“äºç­‰åˆ°Promise.resolve()çš„å›è°ƒ,é‚£resolveï¼ˆï¼‰è§£å†³äº†ï¼Œrejectï¼ˆï¼‰å‘¢</span></span><br><span class="line"><span class="comment">// Promise.reject çš„æƒ…å†µæˆ‘ä»¬å¯ä»¥ç”¨ try catch åŒ…è£¹ä¸€ä¸‹</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">errorDemoSuper</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> result = <span class="keyword">await</span> sleep(<span class="number">1000</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(result);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å–ä¸ªåº”ç”¨çš„æ¡ˆåˆ—</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸»é¡µé¢ æ ¡éªŒ code</span></span><br><span class="line"><span class="function"><span class="title">handleInputInviteCode</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;walletStore/verifyInviteCode&#x27;</span>, &#123;</span><br><span class="line">        inviteCode: <span class="built_in">this</span>.inviteCode</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.$emit(<span class="string">&#x27;confirm&#x27;</span>)</span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.$emit(<span class="string">&#x27;failure&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// store ä¸­çš„ action é¡µé¢</span></span><br><span class="line"><span class="function"><span class="title">verifyInviteCode</span>(<span class="params">&#123;commit,state,dispatch&#125;, &#123;inviteCode, header, id&#125;</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="keyword">async</span> (resolve, reject) =&gt; &#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="keyword">await</span> handleRequest.post(<span class="string">`/api/core/invite/activation/<span class="subst">$&#123;inviteCode&#125;</span>`</span>, &#123;&#125;, header)</span><br><span class="line">            <span class="keyword">if</span> (res.status === <span class="number">200</span> &amp;&amp; res.data === <span class="literal">true</span>)&#123;</span><br><span class="line">                <span class="keyword">let</span> form = <span class="keyword">await</span> handleGetUserInfo(currentWallet)</span><br><span class="line">                <span class="keyword">await</span> commit(<span class="string">&#x27;changeWallet&#x27;</span>, form)</span><br><span class="line">                resolve(form)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line">            reject(LANG_DATA[res.code] || res.code)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e)&#123;</span><br><span class="line">            reject(e.message || e.code || <span class="string">&#x27;æ¿€æ´»å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ¿€æ´»ç &#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> ES6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NPM åŒ…å¼€å‘æŒ‡å—</title>
      <link href="2021/02/07/npmPackages/"/>
      <url>2021/02/07/npmPackages/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ¬æ–‡ä¸»è¦æ˜¯è®²å¦‚ä½•å¼€å‘ä¸€ä¸ª vue ç»„ä»¶ï¼Œåšæˆ npm åŒ…å¹¶å‘å¸ƒä»¥åŠä½¿ç”¨ã€ç»´æŠ¤ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-npmï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-npmï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ npmï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ npmï¼Ÿ</h2><p><strong>åœ¨ GitHub è¿˜æ²¡æœ‰å…´èµ·çš„å¹´ä»£ï¼Œå‰ç«¯æ˜¯é€šè¿‡ç½‘å€æ¥å…±äº«ä»£ç </strong></p><p>æ¯”å¦‚ä½ æƒ³ä½¿ç”¨ jQueryï¼Œé‚£ä¹ˆä½ ç‚¹å‡» jQuery ç½‘ç«™ä¸Šæä¾›çš„é“¾æ¥å°±å¯ä»¥ä¸‹è½½ jQueryï¼Œæ”¾åˆ°è‡ªå·±çš„ç½‘ç«™ä¸Šä½¿ç”¨ã€‚</p><p>å½“ä¸€ä¸ªç½‘ç«™ä¾èµ–çš„ä»£ç è¶Šæ¥è¶Šå¤šï¼Œç¨‹åºå‘˜å‘ç°è¿™æ˜¯ä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹æƒ…ï¼š</p><ol><li>å» jQuery å®˜ç½‘ä¸‹è½½ jQuery</li><li>å» BootStrap å®˜ç½‘ä¸‹è½½ BootStrap</li><li>å» Underscore å®˜ç½‘ä¸‹è½½ Underscore</li><li>â€¦â€¦</li></ol><p>æœ‰äº›ç¨‹åºå‘˜å°±å—ä¸äº†äº†ï¼Œä¸€ä¸ªå«åš Isaac Z. Schlueter çš„ç¨‹åºå‘˜ ï¼ˆä»¥ä¸‹ç®€ç§° Isaazï¼‰ç»™å‡ºä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼šç”¨ä¸€ä¸ªå·¥å…·æŠŠè¿™äº›ä»£ç é›†ä¸­åˆ°ä¸€èµ·æ¥ç®¡ç†å§ï¼</p><p>è¿™ä¸ªå·¥å…·å°±æ˜¯ä»–ç”¨ JavaScript ï¼ˆè¿è¡Œåœ¨ Node.js ä¸Šï¼‰å†™çš„ npmï¼Œå…¨ç§°æ˜¯ Node Package Managerã€‚æ‰€ä»¥ç°åœ¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ npm install jquery æ¥ä¸‹è½½ jQuery ä»£ç ã€‚ç°åœ¨ç”¨ npm æ¥åˆ†äº«ä»£ç å·²ç»æˆäº†å‰ç«¯çš„æ ‡é…ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¯´è¯´ï¼Œå¦‚ä½•åˆ¶ä½œä¸€ä¸ª npm åŒ…ã€‚</p><h2 id="ç¬¬ä¸€æ­¥ï¼Œå‡†å¤‡å·¥ä½œ"><a href="#ç¬¬ä¸€æ­¥ï¼Œå‡†å¤‡å·¥ä½œ" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼Œå‡†å¤‡å·¥ä½œ"></a>ç¬¬ä¸€æ­¥ï¼Œå‡†å¤‡å·¥ä½œ</h2><h3 id="1-æ³¨å†Œ-npm-è´¦å·"><a href="#1-æ³¨å†Œ-npm-è´¦å·" class="headerlink" title="1. æ³¨å†Œ npm è´¦å·"></a>1. æ³¨å†Œ npm è´¦å·</h3><p>å‰å¾€ <a href="https://www.npmjs.com/">npm å®˜ç½‘</a>  æ³¨å†Œä¸€ä¸ªè´¦å·ã€‚</p><h3 id="2-ç¡®è®¤åŒ…åç§°"><a href="#2-ç¡®è®¤åŒ…åç§°" class="headerlink" title="2. ç¡®è®¤åŒ…åç§°"></a>2. ç¡®è®¤åŒ…åç§°</h3><p>é€šè¿‡å‘½ä»¤ç¡®è®¤åç§°æ˜¯å¦è¢«å ç”¨ï¼Œæ“ä½œå¦‚ä¸‹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm view yqy-packages</span><br></pre></td></tr></table></figure><p><code>yqy-packages</code> æ˜¯æˆ‘æœŸæœ›çš„åŒ…åç§°ï¼Œæ‰§è¡Œè¯¥å‘½ä»¤ä¹‹åï¼Œå¦‚æœå‡ºç°äº†åŒ…çš„ä¿¡æ¯ï¼Œåˆ™è¡¨ç¤ºè¯¥åç§°å·²ç»è¢«å ç”¨ï¼Œåˆ™éœ€è¦æ¢ä¸ªåç§°ï¼Œå¦‚æœå‡ºç°æŠ¥é”™ <code>404</code> åˆ™è¡¨ç¤ºæ”¹åç§°æ²¡æœ‰è¢«å ç”¨ï¼Œç„¶åæˆ‘ä»¬ä½¿ç”¨æ²¡æœ‰è¢«å ç”¨çš„åç§°ï¼Œåˆ›å»ºé¡¹ç›®ã€‚</p><h3 id="3-ç¡®è®¤-vue-cli-ç‰ˆæœ¬"><a href="#3-ç¡®è®¤-vue-cli-ç‰ˆæœ¬" class="headerlink" title="3. ç¡®è®¤ vue-cli ç‰ˆæœ¬"></a>3. ç¡®è®¤ vue-cli ç‰ˆæœ¬</h3><blockquote><p>vue è„šæ‰‹æ¶ç‰ˆæœ¬åŒºåˆ«ï¼Œå¤§äº 3.0 åŒ…åæ˜¯ @vue/cli, å°äº 3.0 åˆ™åŒ…åä¸º vue-cliã€‚</p></blockquote><p>æˆ‘ä»¬æ¨èä½¿ç”¨ <code>3.0</code> ä¹‹å‰çš„ <code>vue-cli</code> ç‰ˆæœ¬ï¼Œé¦–å…ˆæŸ¥çœ‹æœ¬åœ°æ˜¯å¦å…¨å±€å®‰è£…äº† <code>vue-cli</code>, å¦‚æœå¤§äº <code>3.0</code> æˆ–è€…æ²¡æœ‰å®‰è£…ï¼Œåˆ™å¸è½½ <code>@vue/cli</code>, é‡æ–°å®‰è£… <code>vue-cli</code>, ç›¸å…³å‘½ä»¤å¦‚ä¸‹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vue -V</span><br><span class="line">@vue/cli 4.5.13</span><br><span class="line"></span><br><span class="line">npm uninstall -g @vue/cli</span><br><span class="line">npm install vue-cli -g</span><br><span class="line"></span><br><span class="line">vue -V</span><br><span class="line">2.9.6</span><br></pre></td></tr></table></figure><h3 id="4-åˆå§‹åŒ–é¡¹ç›®"><a href="#4-åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="4. åˆå§‹åŒ–é¡¹ç›®"></a>4. åˆå§‹åŒ–é¡¹ç›®</h3><blockquote><p>npm åŒ…å¼€å‘æ—¶æ¨èä½¿ç”¨ webpack-simple æ¨¡æ¿æ„å»ºé¡¹ç›®ï¼Œåªä¿ç•™åŸºæœ¬åŠŸèƒ½å³å¯ã€‚</p></blockquote><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåç§°å°±æ˜¯ä¸Šä¸€æ­¥éª¤ç¡®è®¤è¿‡æ²¡æœ‰è¢«å ç”¨çš„åŒ…åç§°ã€‚ç„¶åè¿›å…¥è¯¥æ–‡ä»¶å¤¹å†…ï¼Œä½¿ç”¨å‘½ä»¤åˆå§‹åŒ–ä¸º vue é¡¹ç›®ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue init webpack-simple</span><br></pre></td></tr></table></figure><p>ä¸€è·¯å›è½¦å³å¯ï¼Œåˆå§‹åŒ–å®Œæˆä¹‹åï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª vue é¡¹ç›®åº•å±‚æ–‡ä»¶ï¼Œç„¶åå®‰è£…ä¾èµ–ï¼Œå¹¶é¢„è§ˆã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><h2 id="ç¬¬äºŒæ­¥ï¼Œç»„ä»¶çš„ç¼–å†™å’Œé¢„è§ˆ"><a href="#ç¬¬äºŒæ­¥ï¼Œç»„ä»¶çš„ç¼–å†™å’Œé¢„è§ˆ" class="headerlink" title="ç¬¬äºŒæ­¥ï¼Œç»„ä»¶çš„ç¼–å†™å’Œé¢„è§ˆ"></a>ç¬¬äºŒæ­¥ï¼Œç»„ä»¶çš„ç¼–å†™å’Œé¢„è§ˆ</h2><h3 id="1-å¼€å‘ç»„ä»¶ï¼Œåœ¨-src-ç›®å½•ä¸‹åˆ›å»º-components-æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨-components-ä¸‹åˆ›å»º-yqyPackages-vue-ç”¨äºå¼€å‘ç»„ä»¶ï¼Œå‡è®¾æˆ‘ä»¬çš„ç»„ä»¶å†…å®¹å¦‚ä¸‹ï¼ˆè¿™åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå‡è®¾ç»„ä»¶éœ€æ±‚å°±æ˜¯å±•ç¤ºä¼ å…¥çš„å†…å®¹ï¼Œå®é™…å¼€å‘ä¸­åº”è¯¥æ ¹æ®å®é™…éœ€æ±‚ç¼–å†™ç»„ä»¶ï¼‰"><a href="#1-å¼€å‘ç»„ä»¶ï¼Œåœ¨-src-ç›®å½•ä¸‹åˆ›å»º-components-æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨-components-ä¸‹åˆ›å»º-yqyPackages-vue-ç”¨äºå¼€å‘ç»„ä»¶ï¼Œå‡è®¾æˆ‘ä»¬çš„ç»„ä»¶å†…å®¹å¦‚ä¸‹ï¼ˆè¿™åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå‡è®¾ç»„ä»¶éœ€æ±‚å°±æ˜¯å±•ç¤ºä¼ å…¥çš„å†…å®¹ï¼Œå®é™…å¼€å‘ä¸­åº”è¯¥æ ¹æ®å®é™…éœ€æ±‚ç¼–å†™ç»„ä»¶ï¼‰" class="headerlink" title="1. å¼€å‘ç»„ä»¶ï¼Œåœ¨ src ç›®å½•ä¸‹åˆ›å»º components æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨ components ä¸‹åˆ›å»º yqyPackages.vue, ç”¨äºå¼€å‘ç»„ä»¶ï¼Œå‡è®¾æˆ‘ä»¬çš„ç»„ä»¶å†…å®¹å¦‚ä¸‹ï¼ˆè¿™åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå‡è®¾ç»„ä»¶éœ€æ±‚å°±æ˜¯å±•ç¤ºä¼ å…¥çš„å†…å®¹ï¼Œå®é™…å¼€å‘ä¸­åº”è¯¥æ ¹æ®å®é™…éœ€æ±‚ç¼–å†™ç»„ä»¶ï¼‰:"></a>1. å¼€å‘ç»„ä»¶ï¼Œåœ¨ <code>src</code> ç›®å½•ä¸‹åˆ›å»º <code>components</code> æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨ <code>components</code> ä¸‹åˆ›å»º <code>yqyPackages.vue</code>, ç”¨äºå¼€å‘ç»„ä»¶ï¼Œå‡è®¾æˆ‘ä»¬çš„ç»„ä»¶å†…å®¹å¦‚ä¸‹ï¼ˆè¿™åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå‡è®¾ç»„ä»¶éœ€æ±‚å°±æ˜¯å±•ç¤ºä¼ å…¥çš„å†…å®¹ï¼Œå®é™…å¼€å‘ä¸­åº”è¯¥æ ¹æ®å®é™…éœ€æ±‚ç¼–å†™ç»„ä»¶ï¼‰:</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;propData&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">&#x27;yqy-packages&#x27;</span>,</span></span><br><span class="line">  data () &#123;</span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;&#125;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  props: &#123;</span><br><span class="line">      propData: &#123;</span><br><span class="line"><span class="javascript">          type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">          <span class="keyword">default</span>: <span class="string">&#x27;æˆ‘æ˜¯é»˜è®¤å€¼&#x27;</span></span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-æœ¬åœ°é¢„è§ˆï¼Œåœ¨-app-vue-ä¸­å¼•å…¥ç»„ä»¶ï¼Œè¿è¡Œé¡¹ç›®çœ‹æ•ˆæœï¼Œä¿®æ”¹-app-vue-å†…å®¹å¦‚ä¸‹"><a href="#2-æœ¬åœ°é¢„è§ˆï¼Œåœ¨-app-vue-ä¸­å¼•å…¥ç»„ä»¶ï¼Œè¿è¡Œé¡¹ç›®çœ‹æ•ˆæœï¼Œä¿®æ”¹-app-vue-å†…å®¹å¦‚ä¸‹" class="headerlink" title="2. æœ¬åœ°é¢„è§ˆï¼Œåœ¨ app.vue ä¸­å¼•å…¥ç»„ä»¶ï¼Œè¿è¡Œé¡¹ç›®çœ‹æ•ˆæœï¼Œä¿®æ”¹ app.vue å†…å®¹å¦‚ä¸‹:"></a>2. æœ¬åœ°é¢„è§ˆï¼Œåœ¨ <code>app.vue</code> ä¸­å¼•å…¥ç»„ä»¶ï¼Œè¿è¡Œé¡¹ç›®çœ‹æ•ˆæœï¼Œä¿®æ”¹ app.vue å†…å®¹å¦‚ä¸‹:</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">yqy-packages</span> <span class="attr">:propData</span>=<span class="string">&#x27;initData&#x27;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> yqyPackages <span class="keyword">from</span> <span class="string">&#x27;./components/yqyPackages&#x27;</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        initData: <span class="string">&#x27;hello world&#x27;</span></span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    components:&#123;</span><br><span class="line">        yqyPackages</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ç¬¬ä¸‰æ­¥ï¼Œç¬¬ä¸‰æ–¹å…¥å£æ–‡ä»¶å’Œé…ç½®"><a href="#ç¬¬ä¸‰æ­¥ï¼Œç¬¬ä¸‰æ–¹å…¥å£æ–‡ä»¶å’Œé…ç½®" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼Œç¬¬ä¸‰æ–¹å…¥å£æ–‡ä»¶å’Œé…ç½®"></a>ç¬¬ä¸‰æ­¥ï¼Œç¬¬ä¸‰æ–¹å…¥å£æ–‡ä»¶å’Œé…ç½®</h2><blockquote><p>å¦‚æœä¸Šé¢æ­¥éª¤éƒ½é¡ºåˆ©çš„è¯ï¼Œè¿è¡Œé¡¹ç›®åº”è¯¥æ˜¯å¯ä»¥çœ‹åˆ°é¡µé¢å‘ˆç°çš„ <code>hello world</code>, å¯ä»¥ç†è§£ä¸ºç»„ä»¶å·²ç»å¼€å‘å®Œæˆï¼Œä½†æ˜¯ç›®å‰åªæ˜¯åœ¨ <code>app.vue</code> ä¸­ä½¿ç”¨ï¼Œæˆ‘ä»¬éœ€è¦è®©ä»–å¯ä»¥æä¾›ç»™ç¬¬ä¸‰æ–¹ä½¿ç”¨ï¼Œçœ‹çœ‹å¦‚ä½•æ“ä½œï¼</p></blockquote><h3 id="1-å‡†å¤‡å…¥å£æ–‡ä»¶"><a href="#1-å‡†å¤‡å…¥å£æ–‡ä»¶" class="headerlink" title="1. å‡†å¤‡å…¥å£æ–‡ä»¶"></a>1. å‡†å¤‡å…¥å£æ–‡ä»¶</h3><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»º index.js, ç¼–å†™å¦‚ä¸‹ä»£ç :</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> yqyPackages <span class="keyword">from</span> <span class="string">&#x27;./src/components/yqyPackages&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// è¿™ä¸€æ­¥åˆ¤æ–­ window.Vue æ˜¯å¦å­˜åœ¨ï¼Œå› ä¸ºç›´æ¥å¼•ç”¨ vue.min.jsï¼Œ å®ƒä¼šæŠŠ Vue ç»‘åˆ° Window ä¸Šï¼Œæˆ‘ä»¬ç›´æ¥å¼•ç”¨æ‰“åŒ…å¥½çš„ js æ‰èƒ½æ­£å¸¸è·‘èµ·æ¥ã€‚</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">&#x27;undefined&#x27;</span> &amp;&amp; <span class="built_in">window</span>.Vue) &#123;</span><br><span class="line">  <span class="built_in">window</span>.Vue.component(<span class="string">&#x27;yqy-packages&#x27;</span>, yqyPackages)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿™æ ·å°±å¯ä»¥ä½¿ç”¨Vue.useè¿›è¡Œå…¨å±€å®‰è£…äº†ã€‚</span></span><br><span class="line">yqyPackages.install = <span class="function"><span class="keyword">function</span>(<span class="params">Vue</span>) </span>&#123;</span><br><span class="line">  Vue.component(yqyPackages.name, yqyPackages)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> yqyPackages</span><br></pre></td></tr></table></figure><h3 id="2-ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•é…ç½®æ–‡ä»¶-webpack-config-js"><a href="#2-ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•é…ç½®æ–‡ä»¶-webpack-config-js" class="headerlink" title="2. ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•é…ç½®æ–‡ä»¶ webpack.config.js"></a>2. ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•é…ç½®æ–‡ä»¶ <code>webpack.config.js</code></h3><blockquote><p>é»˜è®¤ä½¿ç”¨ <code>main.js</code> ä½œä¸ºå…¥å£ï¼Œæ‰€ä»¥å¯ä»¥è·‘èµ·æ¥å‘ˆç° <code>app.vue</code> çš„å†…å®¹æ¥é¢„è§ˆè°ƒè¯•ï¼Œä½†æ˜¯ç»„ä»¶å¼€å‘å®Œæˆåæä¾›ç»™ç¬¬ä¸‰æ–¹ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦ç»„ä»¶çš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯ <code>yqyPackages.vue</code> å†…ç¼–å†™çš„ä»£ç ï¼Œè€Œæˆ‘ä»¬ä¸Šä¸€æ­¥å‡†å¤‡çš„å…¥å£æ–‡ä»¶ <code>index.js</code> å°±æ˜¯å°†è¿™ä¸ª <code>yqyPackages.vue</code> å†…çš„ä»£ç æš´éœ²å‡ºå»çš„å…¥å£ï¼Œæ‰€ä»¥ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œè®©å…¥å£å¯ä»¥æ ¹æ®å¼€å‘ç¯å¢ƒå’Œç”Ÿæˆç¯å¢ƒçš„åˆ‡æ¢è€Œæ”¹å˜ã€‚</p></blockquote><ul><li><code>main.js</code>, æ˜¯å‘½ä»¤ <code>npm run dev</code> çš„å…¥å£ï¼Œä¹Ÿå°±æ˜¯ <code>app.vue</code>ï¼Œç”¨äºè°ƒè¯•ã€æµ‹è¯•æˆ‘ä»¬å¼€å‘çš„ç»„ä»¶ï¼›</li><li><code>index.js</code>, æ˜¯æˆ‘ä»¬æ‰“åŒ…åˆ°ç”Ÿäº§ç¯å¢ƒçš„å…¥å£ï¼Œç¬¬ä¸‰æ–¹å¼•ç”¨çš„å…¥å£ï¼Œå¯¹åº”çš„å°±æ˜¯å•çº¯çš„ <code>yqyPackages.vue</code> ç»„ä»¶å†…å®¹ï¼›</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°å¢ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="keyword">const</span> NODE_ENV = process.env.NODE_ENV</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// entry: &#x27;./src/main.js&#x27;,  // ä¿®æ”¹å…¥å£æ–‡ä»¶</span></span><br><span class="line">    entry: NODE_ENV === <span class="string">&#x27;development&#x27;</span> ? <span class="string">&#x27;./src/main.js&#x27;</span> : <span class="string">&#x27;./index.js&#x27;</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">&#x27;./dist&#x27;</span>),</span><br><span class="line">        publicPath: <span class="string">&#x27;/dist/&#x27;</span>,</span><br><span class="line">        filename: <span class="string">&#x27;build.js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    <span class="string">&#x27;vue-style-loader&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">                ],</span><br><span class="line">            &#125;,      &#123;</span><br><span class="line">                test: <span class="regexp">/\.vue$/</span>,</span><br><span class="line">                loader: <span class="string">&#x27;vue-loader&#x27;</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    loaders: &#123;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// other vue-loader options go here</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">                loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">                exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.(png|jpg|gif|svg)$/</span>,</span><br><span class="line">                loader: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                    name: <span class="string">&#x27;[name].[ext]?[hash]&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        alias: &#123;</span><br><span class="line">            <span class="string">&#x27;vue$&#x27;</span>: <span class="string">&#x27;vue/dist/vue.esm.js&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        extensions: [<span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.vue&#x27;</span>, <span class="string">&#x27;.json&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        historyApiFallback: <span class="literal">true</span>,</span><br><span class="line">        noInfo: <span class="literal">true</span>,</span><br><span class="line">        overlay: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    performance: &#123;</span><br><span class="line">        hints: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    devtool: <span class="string">&#x27;#eval-source-map&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line">    <span class="built_in">module</span>.exports.devtool = <span class="string">&#x27;#source-map&#x27;</span></span><br><span class="line">    <span class="comment">// http://vue-loader.vuejs.org/en/workflow/production.html</span></span><br><span class="line">    <span class="built_in">module</span>.exports.plugins = (<span class="built_in">module</span>.exports.plugins || []).concat([</span><br><span class="line">        <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">            <span class="string">&#x27;process.env&#x27;</span>: &#123;</span><br><span class="line">                NODE_ENV: <span class="string">&#x27;&quot;production&quot;&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(&#123;</span><br><span class="line">            sourceMap: <span class="literal">true</span>,</span><br><span class="line">            compress: &#123;</span><br><span class="line">                warnings: <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> webpack.LoaderOptionsPlugin(&#123;</span><br><span class="line">            minimize: <span class="literal">true</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç¬¬å››æ­¥ï¼Œnpm-å¹³å°å‘å¸ƒ"><a href="#ç¬¬å››æ­¥ï¼Œnpm-å¹³å°å‘å¸ƒ" class="headerlink" title="ç¬¬å››æ­¥ï¼Œnpm å¹³å°å‘å¸ƒ"></a>ç¬¬å››æ­¥ï¼Œnpm å¹³å°å‘å¸ƒ</h2><h3 id="1-ä¿®æ”¹-package-json-çš„-private-å­—æ®µï¼Œprivate-æ˜¯-true-çš„æ—¶å€™ä¸èƒ½å‘å¸ƒåˆ°-npm-éœ€è®¾ç½®æˆ-falseï¼Œé»˜è®¤æ˜¯-trueã€‚"><a href="#1-ä¿®æ”¹-package-json-çš„-private-å­—æ®µï¼Œprivate-æ˜¯-true-çš„æ—¶å€™ä¸èƒ½å‘å¸ƒåˆ°-npm-éœ€è®¾ç½®æˆ-falseï¼Œé»˜è®¤æ˜¯-trueã€‚" class="headerlink" title="1. ä¿®æ”¹ package.json çš„ private å­—æ®µï¼Œprivate æ˜¯ true çš„æ—¶å€™ä¸èƒ½å‘å¸ƒåˆ° npm, éœ€è®¾ç½®æˆ falseï¼Œé»˜è®¤æ˜¯ trueã€‚"></a>1. ä¿®æ”¹ <code>package.json</code> çš„ <code>private</code> å­—æ®µï¼Œ<code>private</code> æ˜¯ <code>true</code> çš„æ—¶å€™ä¸èƒ½å‘å¸ƒåˆ° <code>npm</code>, éœ€è®¾ç½®æˆ falseï¼Œé»˜è®¤æ˜¯ <code>true</code>ã€‚</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;yqy-packages&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;A Vue.js project&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;LiuKun &lt;308880147@qq.com&gt;&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;license&quot;</span>: <span class="string">&quot;MIT&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;private&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;dev&quot;</span>: <span class="string">&quot;cross-env NODE_ENV=development webpack-dev-server --open --hot&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;build&quot;</span>: <span class="string">&quot;cross-env NODE_ENV=production webpack --progress --hide-modules&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;vue&quot;</span>: <span class="string">&quot;^2.5.11&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;browserslist&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;&gt; 1%&quot;</span>,</span><br><span class="line">    <span class="string">&quot;last 2 versions&quot;</span>,</span><br><span class="line">    <span class="string">&quot;not ie &lt;= 8&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;babel-core&quot;</span>: <span class="string">&quot;^6.26.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;babel-loader&quot;</span>: <span class="string">&quot;^7.1.2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;babel-preset-env&quot;</span>: <span class="string">&quot;^1.6.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;babel-preset-stage-3&quot;</span>: <span class="string">&quot;^6.24.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;cross-env&quot;</span>: <span class="string">&quot;^5.0.5&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;css-loader&quot;</span>: <span class="string">&quot;^0.28.7&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;file-loader&quot;</span>: <span class="string">&quot;^1.1.4&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;vue-loader&quot;</span>: <span class="string">&quot;^13.0.5&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;vue-template-compiler&quot;</span>: <span class="string">&quot;^2.4.4&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;webpack&quot;</span>: <span class="string">&quot;^3.6.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;webpack-dev-server&quot;</span>: <span class="string">&quot;^2.9.1&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-å‘½ä»¤è¡Œç™»å½•-npm-è´¦å·"><a href="#2-å‘½ä»¤è¡Œç™»å½•-npm-è´¦å·" class="headerlink" title="2. å‘½ä»¤è¡Œç™»å½• npm è´¦å·"></a>2. å‘½ä»¤è¡Œç™»å½• npm è´¦å·</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">npm login</span><br><span class="line">Username: å¡«å†™ npm ç”¨æˆ·å</span><br><span class="line">Password: å¡«å†™ npm ç™»é™†å¯†ç </span><br><span class="line">Email: (this IS public) : å¡«å†™ npm è´¦æˆ·è”ç³»é‚®ç®±</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡ºç°ä¸‹é¢è¿™å¥è¡¨ç¤ºç™»å½•æˆåŠŸ</span></span><br><span class="line">Logged <span class="keyword">in</span> as **** on https://registry.npmjs.org/. </span><br></pre></td></tr></table></figure><h3 id="3-å‘å¸ƒ-npm-åŒ…ï¼Œæ¯æ¬¡å‘å¸ƒçš„æ—¶å€™-packa-json-é‡Œé¢çš„-version-ä¸èƒ½ä¸€æ ·ï¼Œä¸ç„¶ä¸èƒ½å‘å¸ƒå‡ºå»ï¼Œæ‰‹åŠ¨æ”¹ä¸‹ç‰ˆæœ¬å°±è¡Œ"><a href="#3-å‘å¸ƒ-npm-åŒ…ï¼Œæ¯æ¬¡å‘å¸ƒçš„æ—¶å€™-packa-json-é‡Œé¢çš„-version-ä¸èƒ½ä¸€æ ·ï¼Œä¸ç„¶ä¸èƒ½å‘å¸ƒå‡ºå»ï¼Œæ‰‹åŠ¨æ”¹ä¸‹ç‰ˆæœ¬å°±è¡Œ" class="headerlink" title="3. å‘å¸ƒ npm åŒ…ï¼Œæ¯æ¬¡å‘å¸ƒçš„æ—¶å€™ packa.json é‡Œé¢çš„ version ä¸èƒ½ä¸€æ ·ï¼Œä¸ç„¶ä¸èƒ½å‘å¸ƒå‡ºå»ï¼Œæ‰‹åŠ¨æ”¹ä¸‹ç‰ˆæœ¬å°±è¡Œ"></a>3. å‘å¸ƒ npm åŒ…ï¼Œæ¯æ¬¡å‘å¸ƒçš„æ—¶å€™ packa.json é‡Œé¢çš„ version ä¸èƒ½ä¸€æ ·ï¼Œä¸ç„¶ä¸èƒ½å‘å¸ƒå‡ºå»ï¼Œæ‰‹åŠ¨æ”¹ä¸‹ç‰ˆæœ¬å°±è¡Œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">npm publish</span><br><span class="line"></span><br><span class="line">npm notice </span><br><span class="line">npm notice ğŸ“¦  yqy-packages@1.0.0</span><br><span class="line">npm notice === Tarball Contents === </span><br><span class="line">npm notice 72B   .babelrc                      </span><br><span class="line">npm notice 147B  .editorconfig                 </span><br><span class="line">npm notice 206B  index.html                    </span><br><span class="line">npm notice 544B  index.js                      </span><br><span class="line">npm notice 100B  src/main.js                   </span><br><span class="line">npm notice 1.8kB webpack.config.js             </span><br><span class="line">npm notice 842B  package.json                  </span><br><span class="line">npm notice 327B  README.md                     </span><br><span class="line">npm notice 6.8kB src/assets/logo.png           </span><br><span class="line">npm notice 270B  src/App.vue                   </span><br><span class="line">npm notice 338B  src/components/yqyPackages.vue</span><br><span class="line">npm notice === Tarball Details === </span><br><span class="line">npm notice name:          yqy-packages                            </span><br><span class="line">npm notice version:       1.0.0                                   </span><br><span class="line">npm notice package size:  9.4 kB                                  </span><br><span class="line">npm notice unpacked size: 11.5 kB                                 </span><br><span class="line">npm notice shasum:        7f52f85068b37e81eb9b05eaf832d427b0a7b810</span><br><span class="line">npm notice integrity:     sha512-wiws7/01Gk2WI[...]H/y2CHE/f/8Pw==</span><br><span class="line">npm notice total files:   11                                      </span><br><span class="line">npm notice </span><br><span class="line">+ yqy-packages@1.0.0</span><br></pre></td></tr></table></figure><h3 id="4-åœ¨-vue-é¡¹ç›®ä¸­ä½¿ç”¨-npm-åŒ…"><a href="#4-åœ¨-vue-é¡¹ç›®ä¸­ä½¿ç”¨-npm-åŒ…" class="headerlink" title="4. åœ¨ vue é¡¹ç›®ä¸­ä½¿ç”¨ npm åŒ…"></a>4. åœ¨ vue é¡¹ç›®ä¸­ä½¿ç”¨ npm åŒ…</h3><p><strong>å®‰è£…ä¾èµ–</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install yqy-packages</span><br></pre></td></tr></table></figure><p><strong>åœ¨ main.js å…¨å±€å¼•å…¥</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> yqyPackages <span class="keyword">from</span> <span class="string">&#x27;yqy-packages&#x27;</span></span><br><span class="line">Vue.use(yqyPackages)</span><br></pre></td></tr></table></figure><p><strong>åœ¨é¡µé¢ä¸­ä½¿ç”¨</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">yqy-packages</span> <span class="attr">propData</span>=<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡æœ¬&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">yqy-packages</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5-æ›´æ–°åŒ…"><a href="#5-æ›´æ–°åŒ…" class="headerlink" title="5. æ›´æ–°åŒ…"></a>5. æ›´æ–°åŒ…</h3><p>npm åŒ…é¡¹ç›®æºä»£ç æ›´æ–°ä¹‹åï¼Œä¿®æ”¹ç‰ˆæœ¬å·ï¼Œé‡æ–°æ‰“åŒ…å‘å¸ƒå³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥å…· </tag>
            
            <tag> packages </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>4ç§ä½¿ç”¨Axiosæ‹¦æˆªå™¨çš„æ–¹æ³•</title>
      <link href="2021/02/07/axios/"/>
      <url>2021/02/07/axios/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯Axiosï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯Axiosï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯Axiosï¼Ÿ"></a>ä»€ä¹ˆæ˜¯Axiosï¼Ÿ</h2><p>Axiosæ˜¯ç”¨äºæµè§ˆå™¨å’Œnode.jsçš„åŸºäºPromiseçš„HTTPå®¢æˆ·ç«¯ã€‚å®ƒå…·æœ‰è®¸å¤šæœ‰ç”¨çš„é»˜è®¤å€¼ï¼Œä¾‹å¦‚è‡ªåŠ¨æ£€æµ‹JSONå“åº”å¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡è€Œä¸æ˜¯çº¯æ–‡æœ¬ï¼Œå¦‚æœå“åº”çŠ¶æ€ä»£ç å¤§äº400ï¼Œåˆ™ä¼šå¼•å‘é”™è¯¯ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯axiosæ‹¦æˆªå™¨ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯axiosæ‹¦æˆªå™¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯axiosæ‹¦æˆªå™¨ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯axiosæ‹¦æˆªå™¨ï¼Ÿ</h2><p>Axios æ‹¦æˆªå™¨ æ˜¯åº“æ¯æ¬¡å‘é€æˆ–æ¥æ”¶è¯·æ±‚æ—¶éƒ½ä¼šè°ƒç”¨çš„å‡½æ•°ã€‚æ‚¨å¯ä»¥å…ˆæ‹¦æˆªè¯·æ±‚æˆ–å“åº”ï¼Œç„¶åå†é€šè¿‡â€œç„¶åâ€æˆ–â€œæ•è·â€å¤„ç†å®ƒä»¬ã€‚</p><p>ä¾‹:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">axios.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšç‚¹ä»€ä¹ˆ</span></span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// åœ¨è¯·æ±‚å¤±è´¥æ—¶åšä¸€äº›ä»€ä¹ˆ</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">axios.interceptors.response.use(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä»»ä½•ä½äº2xxèŒƒå›´å†…çš„çŠ¶æ€ç éƒ½ä¼šè§¦å‘æ­¤åŠŸèƒ½</span></span><br><span class="line">    <span class="comment">// å¯¹å“åº”æ•°æ®è¿›è¡Œå¤„ç†</span></span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä»»ä½•è¶…å‡º2xxèŒƒå›´çš„çŠ¶æ€ç éƒ½ä¼šè§¦å‘æ­¤åŠŸèƒ½</span></span><br><span class="line">    <span class="comment">// å¯¹å“åº”é”™è¯¯è¿›è¡Œå¤„ç†</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤æ‹¦æˆªå™¨ã€‚"><a href="#åˆ é™¤æ‹¦æˆªå™¨ã€‚" class="headerlink" title="åˆ é™¤æ‹¦æˆªå™¨ã€‚"></a>åˆ é™¤æ‹¦æˆªå™¨ã€‚</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> interceptor = axios.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;<span class="comment">/*...*/</span>&#125;);</span><br><span class="line">axios.interceptors.request.eject(interceptor);</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨æ‹¦æˆªå™¨åœ¨æ¯ä¸ªè¯·æ±‚ä¸­æ³¨å…¥èº«ä»½éªŒè¯ä»¤ç‰Œå¤´ã€‚"><a href="#ä½¿ç”¨æ‹¦æˆªå™¨åœ¨æ¯ä¸ªè¯·æ±‚ä¸­æ³¨å…¥èº«ä»½éªŒè¯ä»¤ç‰Œå¤´ã€‚" class="headerlink" title="ä½¿ç”¨æ‹¦æˆªå™¨åœ¨æ¯ä¸ªè¯·æ±‚ä¸­æ³¨å…¥èº«ä»½éªŒè¯ä»¤ç‰Œå¤´ã€‚"></a>ä½¿ç”¨æ‹¦æˆªå™¨åœ¨æ¯ä¸ªè¯·æ±‚ä¸­æ³¨å…¥èº«ä»½éªŒè¯ä»¤ç‰Œå¤´ã€‚</h2><p>åœ¨æ„å»ºåº”ç”¨ç¨‹åºæ—¶ï¼Œæ‚¨å¾ˆæœ‰å¯èƒ½ä¼šä½¿ç”¨éœ€è¦æŸäº›å‡­æ®ï¼ˆä¾‹å¦‚api_tokenæˆ–ç”¨æˆ·Authä»¤ç‰Œï¼‰çš„APIã€‚é€šå¸¸ï¼Œæ‚¨å°†å¿…é¡»åœ¨æ¯ä¸ªHTTPè¯·æ±‚åé™„åŠ æ‰€éœ€çš„æ ‡å¤´ã€‚ä½¿ç”¨Axiosæ‹¦æˆªå™¨ï¼Œæ‚¨å¯ä»¥è®¾ç½®ä¸€æ¬¡ï¼Œåœ¨ä»»ä½•è°ƒç”¨Axioså®ä¾‹çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥ç¡®ä¿ä»¤ç‰Œå­˜åœ¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">axios.interceptors.request.use(<span class="function"><span class="params">req</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// &#x27;req&#x27; æ˜¯Axiosè¯·æ±‚é…ç½®ï¼Œå› æ­¤æ‚¨å¯ä»¥ä¿®æ”¹ &#x27;headers&#x27;</span></span><br><span class="line">  req.headers.authorization = <span class="string">&#x27;Bearer mytoken&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> req;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”±äºè¯·æ±‚æ‹¦æˆªå™¨è€Œè‡ªåŠ¨è®¾ç½®æˆæƒæ ‡å¤´</span></span><br><span class="line"><span class="keyword">const</span> res = <span class="keyword">await</span> axios.get(<span class="string">&#x27;https://api.example.com&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨æ‹¦æˆªå™¨è®°å½•æ¯ä¸ªè¯·æ±‚å’Œå“åº”ã€‚"><a href="#ä½¿ç”¨æ‹¦æˆªå™¨è®°å½•æ¯ä¸ªè¯·æ±‚å’Œå“åº”ã€‚" class="headerlink" title="ä½¿ç”¨æ‹¦æˆªå™¨è®°å½•æ¯ä¸ªè¯·æ±‚å’Œå“åº”ã€‚"></a>ä½¿ç”¨æ‹¦æˆªå™¨è®°å½•æ¯ä¸ªè¯·æ±‚å’Œå“åº”ã€‚</h2><p>è®°å½•è¯·æ±‚å¯èƒ½æ˜¯æœ‰ç›Šçš„ï¼Œç‰¹åˆ«æ˜¯å½“æ‚¨æ‹¥æœ‰å¤§å‹åº”ç”¨ç¨‹åºå¹¶ä¸”ä¸çŸ¥é“æ‰€æœ‰è¯·æ±‚åœ¨ä½•å¤„è§¦å‘æ—¶ã€‚ä½¿ç”¨Axiosæ‹¦æˆªå™¨ï¼Œæ‚¨å¯ä»¥å¿«é€Ÿè®°å½•æ¯ä¸ªè¯·æ±‚å’Œå“åº”ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">&#x27;axios&#x27;</span>);</span><br><span class="line"></span><br><span class="line">axios.interceptors.request.use(<span class="function"><span class="params">req</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(req, <span class="literal">null</span>, <span class="number">2</span>)&#125;</span>`</span>);</span><br><span class="line">  <span class="comment">// å®Œæˆåå¿…é¡»è¿”å›è¯·æ±‚å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">return</span> req;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">axios.interceptors.response.use(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res.data.json);</span><br><span class="line">  <span class="comment">// å®Œæˆåå¿…é¡»è¿”å›è¯·æ±‚å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">await</span> axios.post(<span class="string">&#x27;https://example.com&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨Axiosæ‹¦æˆªå™¨è¿›è¡Œé”™è¯¯å¤„ç†ã€‚"><a href="#ä½¿ç”¨Axiosæ‹¦æˆªå™¨è¿›è¡Œé”™è¯¯å¤„ç†ã€‚" class="headerlink" title="ä½¿ç”¨Axiosæ‹¦æˆªå™¨è¿›è¡Œé”™è¯¯å¤„ç†ã€‚"></a>ä½¿ç”¨Axiosæ‹¦æˆªå™¨è¿›è¡Œé”™è¯¯å¤„ç†ã€‚</h2><p>æ‚¨å¯ä»¥ä½¿ç”¨Axiosæ‹¦æˆªå™¨æ¥æ•è·æ‰€æœ‰é”™è¯¯ï¼Œå¹¶åœ¨åˆ°è¾¾æœ€ç»ˆç”¨æˆ·ä¹‹å‰å¯¹å…¶è¿›è¡Œå¢å¼ºã€‚å¦‚æœæ‚¨ä½¿ç”¨å…·æœ‰ä¸åŒé”™è¯¯å¯¹è±¡å½¢çŠ¶çš„å¤šä¸ªAPIï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ‹¦æˆªå™¨å°†å®ƒä»¬è½¬æ¢ä¸ºæ ‡å‡†ç»“æ„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">&#x27;axios&#x27;</span>);</span><br><span class="line">axios.interceptors.response.use(</span><br><span class="line">  res =&gt; res,</span><br><span class="line">  err =&gt; &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(err.response.data.message);</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">const</span> err = <span class="keyword">await</span> axios.get(<span class="string">&#x27;http://example.com/notfound&#x27;</span>).</span><br><span class="line">  <span class="keyword">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> err);</span><br><span class="line"><span class="comment">// å¤„ç†é”™è¯¯</span></span><br><span class="line">err.message;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨æ‹¦æˆªå™¨ä¸ºè¯·æ±‚æ·»åŠ é€Ÿç‡é™åˆ¶ã€‚"><a href="#ä½¿ç”¨æ‹¦æˆªå™¨ä¸ºè¯·æ±‚æ·»åŠ é€Ÿç‡é™åˆ¶ã€‚" class="headerlink" title="ä½¿ç”¨æ‹¦æˆªå™¨ä¸ºè¯·æ±‚æ·»åŠ é€Ÿç‡é™åˆ¶ã€‚"></a>ä½¿ç”¨æ‹¦æˆªå™¨ä¸ºè¯·æ±‚æ·»åŠ é€Ÿç‡é™åˆ¶ã€‚</h2><p>åç«¯èµ„æºæœ‰é™ï¼Œå¯èƒ½è€—è´¹å¤§é‡æ€§èƒ½ã€‚ä½œä¸ºå®¢æˆ·ç«¯ï¼Œæ‚¨å¯ä»¥é€šè¿‡é™åˆ¶HTTPè°ƒç”¨çš„é€Ÿç‡æ¥å¸®åŠ©å‡è½»æœåŠ¡å™¨çš„è´Ÿè½½ã€‚ä½¿ç”¨Axiosæ‹¦æˆªå™¨çš„æ–¹æ³•å¦‚ä¸‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> axios = <span class="built_in">require</span>(â€˜axiosâ€™);</span><br><span class="line"><span class="keyword">const</span> debounce = <span class="built_in">require</span>(<span class="string">&#x27;lodash.debounce&#x27;</span>);</span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">  res =&gt; &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="comment">// æ¯2ç§’ä»…è§¦å‘ä¸€æ¬¡è¯·æ±‚</span></span><br><span class="line">       debounce(</span><br><span class="line">          () =&gt; resolve(config),<span class="number">2000</span>);</span><br><span class="line">       &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥å…· </tag>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµè§ˆå™¨çš„å›æµä¸é‡ç»˜ (Reflow &amp; Repaint)</title>
      <link href="2021/01/23/Reflow-Repaint/"/>
      <url>2021/01/23/Reflow-Repaint/</url>
      
        <content type="html"><![CDATA[<p>åœ¨è®¨è®ºå›æµä¸é‡ç»˜ä¹‹å‰ï¼Œæˆ‘ä»¬è¦çŸ¥é“ï¼š</p><ol><li><p>æµè§ˆå™¨ä½¿ç”¨æµå¼å¸ƒå±€æ¨¡å‹ (Flow Based Layout)ã€‚</p></li><li><p>æµè§ˆå™¨ä¼šæŠŠ <code>HTML</code> è§£ææˆ <code>DOM</code>ï¼ŒæŠŠ <code>CSS</code> è§£ææˆ <code>CSSOM</code>ï¼Œ<code>DOM</code> å’Œ <code>CSSOM</code> åˆå¹¶å°±äº§ç”Ÿäº† <code>Render Tree</code>ã€‚ </p></li><li><p>æœ‰äº† <code>Render Tree</code>ï¼Œæˆ‘ä»¬å°±çŸ¥é“äº†æ‰€æœ‰èŠ‚ç‚¹çš„æ ·å¼ï¼Œç„¶åè®¡ç®—ä»–ä»¬åœ¨é¡µé¢ä¸Šçš„å¤§å°å’Œä½ç½®ï¼Œæœ€åæŠŠèŠ‚ç‚¹ç»˜åˆ¶åˆ°é¡µé¢ä¸Šã€‚</p></li><li><p>ç”±äºæµè§ˆå™¨ä½¿ç”¨æµå¼å¸ƒå±€ï¼Œå¯¹ <code>Render Tree</code> çš„è®¡ç®—é€šå¸¸åªéœ€è¦éå†ä¸€æ¬¡å°±å¯ä»¥å®Œæˆï¼Œä½† <code>table</code> åŠå…¶å†…éƒ¨å…ƒç´ é™¤å¤–ï¼Œä»–ä»¬å¯èƒ½éœ€è¦å¤šæ¬¡è®¡ç®—ï¼Œé€šå¸¸è¦èŠ±3å€äºåŒç­‰å…ƒç´ çš„æ—¶é—´ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¦é¿å…ä½¿ç”¨ <code>table</code> å¸ƒå±€çš„åŸå› ä¹‹ä¸€ã€‚</p></li></ol><blockquote><p>ä¸€å¥è¯: å›æµå¿…å°†å¼•èµ·é‡ç»˜ï¼Œé‡ç»˜ä¸ä¸€å®šä¼šå¼•èµ·å›æµã€‚</p></blockquote><h2 id="å›æµ-Reflow"><a href="#å›æµ-Reflow" class="headerlink" title="å›æµ (Reflow)"></a>å›æµ (Reflow)</h2><p>å½“ Render Tree ä¸­éƒ¨åˆ†æˆ–å…¨éƒ¨å…ƒç´ çš„å°ºå¯¸ã€ç»“æ„ã€æˆ–æŸäº›å±æ€§å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæµè§ˆå™¨é‡æ–°æ¸²æŸ“éƒ¨åˆ†æˆ–å…¨éƒ¨æ–‡æ¡£çš„è¿‡ç¨‹ç§°ä¸ºå›æµã€‚</p><p><strong>ä¼šå¯¼è‡´å›æµçš„æ“ä½œ:</strong></p><ul><li><p>é¡µé¢é¦–æ¬¡æ¸²æŸ“</p></li><li><p>æµè§ˆå™¨çª—å£å¤§å°å‘ç”Ÿæ”¹å˜</p></li><li><p>å…ƒç´ å°ºå¯¸æˆ–ä½ç½®å‘ç”Ÿæ”¹å˜</p></li><li><p>å…ƒç´ å†…å®¹å˜åŒ–ï¼ˆæ–‡å­—æ•°é‡æˆ–å›¾ç‰‡å¤§å°ç­‰ç­‰ï¼‰</p></li><li><p>å…ƒç´ å­—ä½“å¤§å°å˜åŒ–</p></li><li><p>æ·»åŠ æˆ–è€…åˆ é™¤å¯è§çš„ DOM å…ƒç´ </p></li><li><p>æ¿€æ´» CSS ä¼ªç±»ï¼ˆä¾‹å¦‚: <code>:hover</code>ï¼‰</p></li><li><p>æŸ¥è¯¢æŸäº›å±æ€§æˆ–è°ƒç”¨æŸäº›æ–¹æ³•</p></li></ul><p><strong>ä¸€äº›å¸¸ç”¨ä¸”ä¼šå¯¼è‡´å›æµçš„å±æ€§å’Œæ–¹æ³•:</strong></p><ul><li><p><code>clientWidth</code>ã€<code>clientHeight</code>ã€<code>clientTop</code>ã€<code>clientLeft</code></p></li><li><p><code>offsetWidth</code>ã€<code>offsetHeight</code>ã€<code>offsetTop</code>ã€<code>offsetLeft</code></p></li><li><p><code>scrollWidth</code>ã€<code>scrollHeight</code>ã€<code>scrollTop</code>ã€<code>scrollLeft</code></p></li><li><p><code>scrollIntoView()</code>ã€<code>scrollIntoViewIfNeeded()</code></p></li><li><p><code>getComputedStyle()</code></p></li><li><p><code>getBoundingClientRect()</code></p></li><li><p><code>scrollTo()</code></p></li></ul><h2 id="é‡ç»˜-Repaint"><a href="#é‡ç»˜-Repaint" class="headerlink" title="é‡ç»˜ (Repaint)"></a>é‡ç»˜ (Repaint)</h2><p>å½“é¡µé¢ä¸­å…ƒç´ æ ·å¼çš„æ”¹å˜å¹¶ä¸å½±å“å®ƒåœ¨æ–‡æ¡£æµä¸­çš„ä½ç½®æ—¶ï¼ˆä¾‹å¦‚ï¼š<code>color</code>ã€<code>background-color</code>ã€<code>visibility</code> ç­‰ï¼‰ï¼Œæµè§ˆå™¨ä¼šå°†æ–°æ ·å¼èµ‹äºˆç»™å…ƒç´ å¹¶é‡æ–°ç»˜åˆ¶å®ƒï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºé‡ç»˜ã€‚</p><h2 id="æ€§èƒ½å½±å“"><a href="#æ€§èƒ½å½±å“" class="headerlink" title="æ€§èƒ½å½±å“"></a>æ€§èƒ½å½±å“</h2><p><strong>å›æµæ¯”é‡ç»˜çš„ä»£ä»·è¦æ›´é«˜ã€‚</strong></p><p>æœ‰æ—¶å³ä½¿ä»…ä»…å›æµä¸€ä¸ªå•ä¸€çš„å…ƒç´ ï¼Œå®ƒçš„çˆ¶å…ƒç´ ä»¥åŠä»»ä½•è·Ÿéšå®ƒçš„å…ƒç´ ä¹Ÿä¼šäº§ç”Ÿå›æµã€‚</p><blockquote><p>ç°ä»£æµè§ˆå™¨ä¼šå¯¹é¢‘ç¹çš„å›æµæˆ–é‡ç»˜æ“ä½œè¿›è¡Œä¼˜åŒ–, æµè§ˆå™¨ä¼šç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—ï¼ŒæŠŠæ‰€æœ‰å¼•èµ·å›æµå’Œé‡ç»˜çš„æ“ä½œæ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ•°é‡æˆ–è€…æ—¶é—´é—´éš”è¾¾åˆ°ä¸€ä¸ªé˜ˆå€¼çš„ï¼Œæµè§ˆå™¨å°±ä¼šå°†é˜Ÿåˆ—æ¸…ç©ºï¼Œè¿›è¡Œä¸€æ¬¡æ‰¹å¤„ç†ï¼Œè¿™æ ·å¯ä»¥æŠŠå¤šæ¬¡å›æµå’Œé‡ç»˜å˜æˆä¸€æ¬¡ã€‚</p></blockquote><p>å½“ä½ è®¿é—®ä»¥ä¸‹å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œæµè§ˆå™¨ä¼šç«‹åˆ»æ¸…ç©ºé˜Ÿåˆ—:</p><ul><li><code>clientWidth</code>ã€<code>clientHeight</code>ã€<code>clientTop</code>ã€<code>clientLeft</code></li></ul><ul><li><code>offsetWidth</code>ã€<code>offsetHeight</code>ã€<code>offsetTop</code>ã€<code>offsetLeft</code></li></ul><ul><li><code>scrollWidth</code>ã€<code>scrollHeight</code>ã€<code>scrollTop</code>ã€<code>scrollLeft</code></li></ul><ul><li><code>width</code>ã€<code>height</code></li></ul><ul><li><code>getComputedStyle()</code></li></ul><ul><li><code>getBoundingClientRect()</code></li></ul><p>å› ä¸ºé˜Ÿåˆ—ä¸­å¯èƒ½ä¼šæœ‰å½±å“åˆ°è¿™äº›å±æ€§æˆ–æ–¹æ³•è¿”å›å€¼çš„æ“ä½œï¼Œå³ä½¿ä½ å¸Œæœ›è·å–çš„ä¿¡æ¯ä¸é˜Ÿåˆ—ä¸­æ“ä½œå¼•å‘çš„æ”¹å˜æ— å…³ï¼Œæµè§ˆå™¨ä¹Ÿä¼šå¼ºè¡Œæ¸…ç©ºé˜Ÿåˆ—ï¼Œç¡®ä¿ä½ æ‹¿åˆ°çš„å€¼æ˜¯æœ€ç²¾ç¡®çš„ã€‚</p><h2 id="å¦‚ä½•é¿å…"><a href="#å¦‚ä½•é¿å…" class="headerlink" title="å¦‚ä½•é¿å…"></a>å¦‚ä½•é¿å…</h2><h3 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h3><ul><li><p>é¿å…ä½¿ç”¨ <code>table</code> å¸ƒå±€ã€‚</p></li><li><p>å°½å¯èƒ½åœ¨ <code>DOM</code> æ ‘çš„æœ€æœ«ç«¯æ”¹å˜ <code>class</code>ã€‚</p></li><li><p>é¿å…è®¾ç½®å¤šå±‚å†…è”æ ·å¼ã€‚</p></li><li><p>å°†åŠ¨ç”»æ•ˆæœåº”ç”¨åˆ° <code>position</code> å±æ€§ä¸º <code>absolute</code> æˆ– <code>fixed</code> çš„å…ƒç´ ä¸Šã€‚</p></li><li><p>é¿å…ä½¿ç”¨ <code>CSS</code> è¡¨è¾¾å¼ï¼ˆä¾‹å¦‚ï¼š<code>calc()</code>ï¼‰ã€‚</p></li></ul><h3 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h3><ul><li><p>é¿å…é¢‘ç¹æ“ä½œæ ·å¼ï¼Œæœ€å¥½ä¸€æ¬¡æ€§é‡å†™ <code>style</code> å±æ€§ï¼Œæˆ–è€…å°†æ ·å¼åˆ—è¡¨å®šä¹‰ä¸º <code>class</code> å¹¶ä¸€æ¬¡æ€§æ›´æ”¹ <code>class</code> å±æ€§ã€‚</p></li><li><p>é¿å…é¢‘ç¹æ“ä½œ <code>DOM</code>ï¼Œåˆ›å»ºä¸€ä¸ª <code>documentFragment</code>ï¼Œåœ¨å®ƒä¸Šé¢åº”ç”¨æ‰€æœ‰ <code>DOM</code> æ“ä½œï¼Œæœ€åå†æŠŠå®ƒæ·»åŠ åˆ°æ–‡æ¡£ä¸­ã€‚</p></li><li><p>ä¹Ÿå¯ä»¥å…ˆä¸ºå…ƒç´ è®¾ç½® <code>display: none</code>ï¼Œæ“ä½œç»“æŸåå†æŠŠå®ƒæ˜¾ç¤ºå‡ºæ¥ã€‚å› ä¸ºåœ¨ <code>display</code> å±æ€§ä¸º <code>none</code> çš„å…ƒç´ ä¸Šè¿›è¡Œçš„ <code>DOM</code> æ“ä½œä¸ä¼šå¼•å‘å›æµå’Œé‡ç»˜ã€‚</p></li><li><p>é¿å…é¢‘ç¹è¯»å–ä¼šå¼•å‘ <code>å›æµ/é‡ç»˜</code> çš„å±æ€§ï¼Œå¦‚æœç¡®å®éœ€è¦å¤šæ¬¡ä½¿ç”¨ï¼Œå°±ç”¨ä¸€ä¸ªå˜é‡ç¼“å­˜èµ·æ¥ã€‚</p></li><li><p>å¯¹å…·æœ‰å¤æ‚åŠ¨ç”»çš„å…ƒç´ ä½¿ç”¨ç»å¯¹å®šä½ï¼Œä½¿å®ƒè„±ç¦»æ–‡æ¡£æµï¼Œå¦åˆ™ä¼šå¼•èµ·çˆ¶å…ƒç´ åŠåç»­å…ƒç´ é¢‘ç¹å›æµã€‚</p></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>åƒé«˜çº§å‰ç«¯å¼€å‘äººå‘˜ä¸€æ ·ä½¿ç”¨ Chrome DevTools</title>
      <link href="2021/01/12/ChromeDevTools/"/>
      <url>2021/01/12/ChromeDevTools/</url>
      
        <content type="html"><![CDATA[<h2 id="å¤åˆ¶å˜é‡"><a href="#å¤åˆ¶å˜é‡" class="headerlink" title="å¤åˆ¶å˜é‡"></a>å¤åˆ¶å˜é‡</h2><blockquote><p>å¦‚ä½•å°† <code>JavaScript</code> å˜é‡çš„å€¼å¤åˆ¶åˆ°å…¶ä»–åœ°æ–¹ï¼Ÿ</p></blockquote><p>åœ¨ <code>Chrome</code> ä¸­ï¼Œæœ‰ä¸€ä¸ªåä¸º <code>copy</code> çš„å‡½æ•°å¯ä»¥å¸®åŠ©ä½ å¤åˆ¶å˜é‡ã€‚è¯¥ <code>copy</code> åŠŸèƒ½ä¸æ˜¯ç”± <code>ECMAScript</code> å®šä¹‰çš„ï¼Œè€Œæ˜¯ç”± <code>Chrome</code> æä¾›çš„ã€‚ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œæ‚¨å¯ä»¥å°† <code>JavaScript</code> å˜é‡çš„å€¼å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210112153757.gif"></p><h2 id="è¡¨å¯¹è±¡æ•°ç»„"><a href="#è¡¨å¯¹è±¡æ•°ç»„" class="headerlink" title="è¡¨å¯¹è±¡æ•°ç»„"></a>è¡¨å¯¹è±¡æ•°ç»„</h2><pre><code>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè¿™æ ·çš„å¯¹è±¡æ•°ç»„, åœ¨æ§åˆ¶å°ä¸­ä¸å®¹æ˜“æŸ¥çœ‹ã€‚å¦‚æœæ•°ç»„æ›´é•¿ä¸”å…ƒç´ æ›´å¤æ‚ï¼Œé‚£ä¹ˆå®ƒå°†å˜å¾—æ›´åŠ éš¾ä»¥ç†è§£ã€‚</code></pre><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210112160211.jpg"></p><blockquote><p><code>Chrome</code> æä¾›äº† <code>table</code> å‡½æ•°ï¼Œå¯ä»¥å°†ä¸€ç³»åˆ—å¯¹è±¡åˆ—è¡¨åŒ–ã€‚å¯ä»¥è®©å¯¹è±¡æ•°ç»„ä»¥è¡¨æ ¼çš„å½¢å¼å±•ç¤ºå‡ºæ¥!</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210112154508.png"></p><h2 id="éšè—å…ƒç´ çš„å¿«æ·æ–¹å¼"><a href="#éšè—å…ƒç´ çš„å¿«æ·æ–¹å¼" class="headerlink" title="éšè—å…ƒç´ çš„å¿«æ·æ–¹å¼"></a>éšè—å…ƒç´ çš„å¿«æ·æ–¹å¼</h2><blockquote><p>åœ¨è°ƒè¯• <code>CSS</code> æ ·å¼æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦éšè—ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœé€‰æ‹©å…ƒç´ å¹¶æŒ‰ <code>H</code> é”®ç›˜ï¼Œåˆ™å¯ä»¥å¿«é€Ÿéšè—å…ƒç´ ã€‚æ­¤æ“ä½œæ˜¯å°† <code>visibility: hidden !important;</code> æ ·å¼æ·»åŠ åˆ°ç›¸åº”çš„å…ƒç´ ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210112155003.gif"></p><h2 id="å°†DOMå…ƒç´ å­˜å‚¨åœ¨å…¨å±€ä¸´æ—¶å˜é‡ä¸­"><a href="#å°†DOMå…ƒç´ å­˜å‚¨åœ¨å…¨å±€ä¸´æ—¶å˜é‡ä¸­" class="headerlink" title="å°†DOMå…ƒç´ å­˜å‚¨åœ¨å…¨å±€ä¸´æ—¶å˜é‡ä¸­"></a>å°†DOMå…ƒç´ å­˜å‚¨åœ¨å…¨å±€ä¸´æ—¶å˜é‡ä¸­</h2><blockquote><p>å¦‚æœè¦åœ¨æ§åˆ¶å°ä¸­å¿«é€Ÿè·å– <code>DOMå…ƒç´ </code> å¼•ç”¨ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œ: </p></blockquote><ul><li>é€‰æ‹© HTML å…ƒç´ </li><li>å³é”®ç‚¹å‡»é¼ æ ‡</li><li>ç‚¹å‡» Store as a global variable</li></ul><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210112171845.gif"></p><h2 id="è§¦å‘CSSä¼ªç±»"><a href="#è§¦å‘CSSä¼ªç±»" class="headerlink" title="è§¦å‘CSSä¼ªç±»"></a>è§¦å‘CSSä¼ªç±»</h2><blockquote><p>æˆ‘ä»¬å¯èƒ½ä¸ºä¸€ä¸ªå…ƒç´ ç¼–å†™å¤šä¸ªä¼ªç±»ï¼Œå¹¶ä¸”ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æµ‹è¯•è¿™äº›æ ·å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ <code>å…ƒç´ é¢æ¿</code> ä¸­è§¦å‘è¿™äº›æ ·å¼ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210112172413.gif"></p><h2 id="åœ¨å…ƒç´ é¢æ¿ä¸­æ‹–æ”¾"><a href="#åœ¨å…ƒç´ é¢æ¿ä¸­æ‹–æ”¾" class="headerlink" title="åœ¨å…ƒç´ é¢æ¿ä¸­æ‹–æ”¾"></a>åœ¨å…ƒç´ é¢æ¿ä¸­æ‹–æ”¾</h2><blockquote><p>æœ‰æ—¶æˆ‘ä»¬æƒ³è°ƒæ•´é¡µé¢ä¸ŠæŸäº› <code>DOMå…ƒç´ </code> çš„ä½ç½®ä»¥æµ‹è¯• <code>UI</code>ã€‚åœ¨ <code>å…ƒç´ é¢æ¿</code> ä¸­ï¼Œæ‚¨å¯ä»¥æ‹–æ”¾ä»»ä½• <code>HTMLå…ƒç´ </code> å¹¶æ›´æ”¹å…¶åœ¨é¡µé¢ä¸­çš„ä½ç½®</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210112174634.gif"></p><h2 id="é‡æ–°å‘é€-XHR-è¯·æ±‚"><a href="#é‡æ–°å‘é€-XHR-è¯·æ±‚" class="headerlink" title="é‡æ–°å‘é€ XHR è¯·æ±‚"></a>é‡æ–°å‘é€ XHR è¯·æ±‚</h2><blockquote><p>åœ¨æˆ‘ä»¬çš„å‰ç«¯é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä½¿ç”¨ <code>XHR</code> å‘åç«¯å‘å‡ºè¯·æ±‚ä»¥è·å–æ•°æ®ã€‚å¦‚æœæ‚¨æƒ³é‡æ–°å‘é€ <code>XHR</code> è¯·æ±‚ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ<br>å¯¹äºæ–°æ‰‹æ¥è¯´ï¼Œä»–å¯èƒ½ä¼šåˆ·æ–°é¡µé¢ï¼Œä½†è¿™å¯èƒ½å¾ˆéº»çƒ¦ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ <code>ç½‘ç»œé¢æ¿</code> ä¸­è¿›è¡Œè°ƒè¯•ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210113145430.jpg"></p><h2 id="è°ƒæ•´ç½‘ç»œè¯·æ±‚é€Ÿåº¦"><a href="#è°ƒæ•´ç½‘ç»œè¯·æ±‚é€Ÿåº¦" class="headerlink" title="è°ƒæ•´ç½‘ç»œè¯·æ±‚é€Ÿåº¦"></a>è°ƒæ•´ç½‘ç»œè¯·æ±‚é€Ÿåº¦</h2><blockquote><p>æˆ‘ä»¬æµ‹è¯•çš„æ—¶å€™æœ‰æ—¶éœ€è¦é™åˆ¶ç½‘é€Ÿï¼Œæ¥çœ‹å„ç§æƒ…å†µä¸‹çš„åŠ è½½æ„Ÿå—ã€‚<code>ç½‘ç»œé¢æ¿</code> å¯ä»¥è®¾ç½®ç½‘ç»œçš„é€šä¿¡æ–¹å¼ä¸ºæ–­ç½‘æ¨¡å¼æˆ–è€…æ¨¡æ‹ŸFast 3Gï¼ŒSlow 3Gç­‰æƒ…å†µã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210113150416.jpg"></p><h2 id="ä¸ä½¿ç”¨ç¼“å­˜åŠ è½½"><a href="#ä¸ä½¿ç”¨ç¼“å­˜åŠ è½½" class="headerlink" title="ä¸ä½¿ç”¨ç¼“å­˜åŠ è½½"></a>ä¸ä½¿ç”¨ç¼“å­˜åŠ è½½</h2><blockquote><p>æˆ‘ä»¬åœ¨å¼€å‘çš„æ—¶å€™å¸¸å¸¸ä¼šå› ä¸ºç¼“å­˜é—®é¢˜è€½è¯¯å¾ˆå¤šå¼€å‘çš„æ—¶é—´ï¼Œä¸€èˆ¬æ¥è¯´å› ä¸ºç¼“å­˜é€ æˆçš„é—®é¢˜è¿˜æ˜¯å¾ˆéš¾è§£å†³çš„ï¼Œå¦‚æœè€ƒè™‘ä¸åˆ°ç¼“å­˜é‚£ä¹ˆå°±ä¼šå¾ˆæµªè´¹æ—¶é—´ï¼Œæœ€åå‘ç°æ˜¯ç¼“å­˜é—®é¢˜é‚£ä¹ˆå°±æ˜¯ä¼šå¾ˆçƒ¦ï¼Œå¦‚ä½•ä¸ä½¿ç”¨ç¼“å­˜åŠŸèƒ½å‘¢? è¯¦ç»†å¦‚ä¸‹</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210113151115.jpg"></p><h2 id="ä¸æ¸…ç©ºæ—¥å¿—"><a href="#ä¸æ¸…ç©ºæ—¥å¿—" class="headerlink" title="ä¸æ¸…ç©ºæ—¥å¿—"></a>ä¸æ¸…ç©ºæ—¥å¿—</h2><blockquote><p>ä½ æ˜¯å¦æ›¾ä¸ºé¡µé¢æäº¤æˆåŠŸåè·³è½¬æˆ–åˆ·æ–°é¡µé¢äº†,æ¥ä¸åŠçœ‹ç½‘ç»œçš„å„ä¸ªè¯·æ±‚è€Œçƒ¦æ¼è¿‡ï¼Ÿå…¶å® <code>ç½‘ç»œé¢æ¿</code> ä¹Ÿæä¾›äº†ä¸æ¸…ç©ºæ—¥å¿—çš„é€‰é¡¹ï¼</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210113151952.jpg"></p><h2 id="å‰ç«¯æœ¬åœ°å­˜å‚¨"><a href="#å‰ç«¯æœ¬åœ°å­˜å‚¨" class="headerlink" title="å‰ç«¯æœ¬åœ°å­˜å‚¨"></a>å‰ç«¯æœ¬åœ°å­˜å‚¨</h2><blockquote><p>åœ¨ <code>åº”ç”¨é¢æ¿</code> å†…æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹åˆ°æ‰€æœ‰çš„å‰ç«¯æ•°æ®åº“å­˜å‚¨æƒ…å†µ</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210113152418.jpg"></p><h2 id="ä¸åŠ è½½å›¾ç‰‡-JavaScript-è„šæœ¬"><a href="#ä¸åŠ è½½å›¾ç‰‡-JavaScript-è„šæœ¬" class="headerlink" title="ä¸åŠ è½½å›¾ç‰‡, JavaScript è„šæœ¬"></a>ä¸åŠ è½½å›¾ç‰‡, <code>JavaScript</code> è„šæœ¬</h2><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210113152938.jpg"></p><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210113153456.jpg"></p><h2 id="å‘½ä»¤èœå•"><a href="#å‘½ä»¤èœå•" class="headerlink" title="å‘½ä»¤èœå•"></a>å‘½ä»¤èœå•</h2><blockquote><p><code>å‘½ä»¤</code> èœå•ç”¨äº <code>Chrome</code> æµè§ˆå™¨ï¼Œè€Œå‘½ä»¤è¡Œç®¡ç†ç¨‹åºç”¨äº <code>Linux</code>ã€‚ é€šè¿‡ <code>å‘½ä»¤</code> èœå•, æ‚¨å¯ä»¥è¾“å…¥ä¸€äº›å‘½ä»¤æ¥æ“ä½œ <code>Chrome</code>ã€‚</p></blockquote><p>é¦–å…ˆ, æˆ‘ä»¬æ‰“å¼€ <code>Chrome</code> å¼€å‘è€…å·¥å…·, ç„¶åä½¿ç”¨ä»¥ä¸‹å¿«æ·æ–¹å¼æ‰“å¼€ <code>å‘½ä»¤</code> èœå•:</p><ul><li>windows: CTRL + Shift + P</li><li>macOS: Cmd + Shift + P</li></ul><p>æˆ–è€…, æˆ‘ä»¬å¯ä»¥å•å‡»ä¸‹é¢çš„æŒ‰é’®å°†å…¶æ‰“å¼€:<br><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210113153844.jpg"></p><p>ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>å‘½ä»¤</code> é¢æ¿, åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å„ç§å‘½ä»¤æ¥æ‰§è¡Œå„ç§å¼ºå¤§çš„åŠŸèƒ½ã€‚<br><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210113154106.jpg"></p><h3 id="å±å¹•æˆªå›¾"><a href="#å±å¹•æˆªå›¾" class="headerlink" title="å±å¹•æˆªå›¾"></a>å±å¹•æˆªå›¾</h3><blockquote><p>æ•è·å±å¹•çš„ä¸€éƒ¨åˆ†æ˜¯éå¸¸å¸¸è§çš„è¦æ±‚ï¼Œå¹¶ä¸”æˆ‘ç¡®å®šæ‚¨å½“å‰çš„è®¡ç®—æœºä¸Šå·²ç»å…·æœ‰éå¸¸æ–¹ä¾¿çš„æˆªå›¾è½¯ä»¶ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥å®Œæˆä»¥ä¸‹ä»»åŠ¡å—ï¼Ÿ</p></blockquote><ol><li>æˆªå–ç½‘é¡µä¸Šæ‰€æœ‰å†…å®¹çš„å±å¹•å¿«ç…§ï¼ŒåŒ…æ‹¬å¯è§†çª—å£ä¸­æœªå‡ºç°çš„æ‰€æœ‰å†…å®¹</li><li>ç²¾ç¡®æ•è·DOMå…ƒç´ çš„å†…å®¹</li></ol><p>è¿™æ˜¯ä¸¤ä¸ªå¸¸è§çš„è¦æ±‚, ä½†æ˜¯ä½¿ç”¨æ“ä½œç³»ç»Ÿéšé™„çš„å±å¹•æˆªå›¾å·¥å…·å¾ˆéš¾è§£å†³ã€‚æ­¤æ—¶, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤æ¥å¸®åŠ©æˆ‘ä»¬å®Œæˆæ­¤è¦æ±‚ã€‚</p><h4 id="æˆªå–ç½‘é¡µä¸Šæ‰€æœ‰å†…å®¹çš„å±å¹•å¿«ç…§-å¯¹åº”çš„å‘½ä»¤ä¸º-Capture-full-size-screenshot"><a href="#æˆªå–ç½‘é¡µä¸Šæ‰€æœ‰å†…å®¹çš„å±å¹•å¿«ç…§-å¯¹åº”çš„å‘½ä»¤ä¸º-Capture-full-size-screenshot" class="headerlink" title="æˆªå–ç½‘é¡µä¸Šæ‰€æœ‰å†…å®¹çš„å±å¹•å¿«ç…§, å¯¹åº”çš„å‘½ä»¤ä¸º Capture full size screenshot"></a>æˆªå–ç½‘é¡µä¸Šæ‰€æœ‰å†…å®¹çš„å±å¹•å¿«ç…§, å¯¹åº”çš„å‘½ä»¤ä¸º <code>Capture full size screenshot</code></h4><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210113154424.jpg"></p><h4 id="æˆªå–-DOM-å…ƒç´ çš„å†…å®¹-å¯¹åº”çš„å‘½ä»¤ä¸º-Capture-node-screenshot"><a href="#æˆªå–-DOM-å…ƒç´ çš„å†…å®¹-å¯¹åº”çš„å‘½ä»¤ä¸º-Capture-node-screenshot" class="headerlink" title="æˆªå– DOM å…ƒç´ çš„å†…å®¹, å¯¹åº”çš„å‘½ä»¤ä¸º Capture node screenshot "></a>æˆªå– DOM å…ƒç´ çš„å†…å®¹, å¯¹åº”çš„å‘½ä»¤ä¸º <code>Capture node screenshot </code></h4><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210113155158.jpg"></p><h2 id="é­”æœ¯å˜é‡"><a href="#é­”æœ¯å˜é‡" class="headerlink" title="é­”æœ¯å˜é‡"></a>é­”æœ¯å˜é‡</h2><h3 id="ä½¿ç”¨-åœ¨æ§åˆ¶å°ä¸­å¼•ç”¨ä¸Šä¸€æ¬¡æ“ä½œçš„ç»“æœ"><a href="#ä½¿ç”¨-åœ¨æ§åˆ¶å°ä¸­å¼•ç”¨ä¸Šä¸€æ¬¡æ“ä½œçš„ç»“æœ" class="headerlink" title="ä½¿ç”¨ $_ åœ¨æ§åˆ¶å°ä¸­å¼•ç”¨ä¸Šä¸€æ¬¡æ“ä½œçš„ç»“æœ"></a>ä½¿ç”¨ <code>$_</code> åœ¨æ§åˆ¶å°ä¸­å¼•ç”¨ä¸Šä¸€æ¬¡æ“ä½œçš„ç»“æœ</h3><blockquote><p><code>$_</code>  å®ƒå¼•ç”¨å…ˆå‰æ“ä½œçš„ç»“æœï¼Œå…¶å€¼å§‹ç»ˆç­‰äºæ§åˆ¶å°ä¸­ä¸Šä¸€æ¬¡æ“ä½œçš„ç»“æœã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210113155500.jpeg"></p><h3 id="ä½¿ç”¨-0-åœ¨æ§åˆ¶å°ä¸­å¼•ç”¨å½“å‰é€‰å®šçš„å…ƒç´ "><a href="#ä½¿ç”¨-0-åœ¨æ§åˆ¶å°ä¸­å¼•ç”¨å½“å‰é€‰å®šçš„å…ƒç´ " class="headerlink" title="ä½¿ç”¨ $0 åœ¨æ§åˆ¶å°ä¸­å¼•ç”¨å½“å‰é€‰å®šçš„å…ƒç´ "></a>ä½¿ç”¨ <code>$0</code> åœ¨æ§åˆ¶å°ä¸­å¼•ç”¨å½“å‰é€‰å®šçš„å…ƒç´ </h3><blockquote><p><code>$0</code> å®ƒå¼•ç”¨ <code>å…ƒç´ </code> é¢æ¿ä¸­å½“å‰é€‰å®šçš„å…ƒç´ ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20210113155802.png"></p>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥å…· </tag>
            
            <tag> Chrome </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äº”åˆ†é’Ÿæ­å»ºå…è´¹cdnåŠ é€Ÿå›¾åºŠ</title>
      <link href="2020/12/17/picgo/"/>
      <url>2020/12/17/picgo/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€æ­¥-Github-ç›¸å…³è®¾ç½®"><a href="#ç¬¬ä¸€æ­¥-Github-ç›¸å…³è®¾ç½®" class="headerlink" title="ç¬¬ä¸€æ­¥, Github ç›¸å…³è®¾ç½®"></a>ç¬¬ä¸€æ­¥, Github ç›¸å…³è®¾ç½®</h1><blockquote><p>æœ¬æ•™ç¨‹è·³è¿‡ç™»å½•ã€æ³¨å†Œ <code>github</code> è´¦å·çš„æ­¥éª¤, è‹¥è¿˜ä¸äº†è§£ <code>github</code> çš„ç«¥é‹è¯·è‡ªè¡Œç™¾åº¦, ç™»å½• <code>github</code> è´¦å·ä¹‹åå†è·Ÿç€æ“ä½œ.</p></blockquote><h2 id="åˆ›å»ºå›¾åºŠä»“åº“-Create-a-new-repository"><a href="#åˆ›å»ºå›¾åºŠä»“åº“-Create-a-new-repository" class="headerlink" title="åˆ›å»ºå›¾åºŠä»“åº“ (Create a new repository)"></a>åˆ›å»ºå›¾åºŠä»“åº“ (Create a new repository)</h2><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228111841.jpg"></p><h2 id="åˆ›å»ºä»¤ç‰Œ-ï¼ˆGenerate-a-new-tokenï¼‰"><a href="#åˆ›å»ºä»¤ç‰Œ-ï¼ˆGenerate-a-new-tokenï¼‰" class="headerlink" title="åˆ›å»ºä»¤ç‰Œ ï¼ˆGenerate a new tokenï¼‰"></a>åˆ›å»ºä»¤ç‰Œ ï¼ˆGenerate a new tokenï¼‰</h2><h3 id="æ‰“å¼€ä¸ªäººè®¾ç½®-ï¼ˆSettingsï¼‰"><a href="#æ‰“å¼€ä¸ªäººè®¾ç½®-ï¼ˆSettingsï¼‰" class="headerlink" title="æ‰“å¼€ä¸ªäººè®¾ç½® ï¼ˆSettingsï¼‰"></a>æ‰“å¼€ä¸ªäººè®¾ç½® ï¼ˆSettingsï¼‰</h3><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228111843.png"></p><h3 id="æ‰“å¼€å¼€å‘è€…è®¾ç½®-Developer-settings"><a href="#æ‰“å¼€å¼€å‘è€…è®¾ç½®-Developer-settings" class="headerlink" title="æ‰“å¼€å¼€å‘è€…è®¾ç½® (Developer settings)"></a>æ‰“å¼€å¼€å‘è€…è®¾ç½® (Developer settings)</h3><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228111842.jpg"></p><h3 id="åˆ›å»ºä»¤ç‰Œ"><a href="#åˆ›å»ºä»¤ç‰Œ" class="headerlink" title="åˆ›å»ºä»¤ç‰Œ"></a>åˆ›å»ºä»¤ç‰Œ</h3><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228111844.png"></p><h3 id="å¡«å†™ä»¤ç‰Œç›¸å…³ä¿¡æ¯"><a href="#å¡«å†™ä»¤ç‰Œç›¸å…³ä¿¡æ¯" class="headerlink" title="å¡«å†™ä»¤ç‰Œç›¸å…³ä¿¡æ¯"></a>å¡«å†™ä»¤ç‰Œç›¸å…³ä¿¡æ¯</h3><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228113627.png"></p><h3 id="ä¿å­˜ä»¤ç‰Œ"><a href="#ä¿å­˜ä»¤ç‰Œ" class="headerlink" title="ä¿å­˜ä»¤ç‰Œ"></a>ä¿å­˜ä»¤ç‰Œ</h3><blockquote><p>åˆ·æ–°é¡µé¢å°±å†ä¹Ÿçœ‹ä¸åˆ°tokenäº†ï¼Œæ‰€ä»¥ä¸€å®šè¦åœ¨åˆ›å»ºæˆåŠŸæ—¶ä¿å­˜ä¸‹æ¥</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228111846.jpg"></p><h1 id="ç¬¬äºŒæ­¥-PicGo-å®‰è£…å’Œé…ç½®"><a href="#ç¬¬äºŒæ­¥-PicGo-å®‰è£…å’Œé…ç½®" class="headerlink" title="ç¬¬äºŒæ­¥, PicGo å®‰è£…å’Œé…ç½®"></a>ç¬¬äºŒæ­¥, <code>PicGo</code> å®‰è£…å’Œé…ç½®</h1><h2 id="ä¸‹è½½å®‰è£…å·¥å…·-PicGo"><a href="#ä¸‹è½½å®‰è£…å·¥å…·-PicGo" class="headerlink" title="ä¸‹è½½å®‰è£…å·¥å…· PicGo"></a>ä¸‹è½½å®‰è£…å·¥å…· <code>PicGo</code></h2><blockquote><p><code>PicGo</code> ç›®å‰æœ€æ–°æ­£å¼ç‰ˆv2.2.2, è¯·æ ¹æ®è‡ªèº«ç³»ç»Ÿé€‰æ‹©å¯¹åº”å®‰è£…åŒ…ä¸‹è½½  <a href="https://github.com/Molunerfinn/PicGo/releases/tag/v2.2.2">ä¸‹è½½åœ°å€</a> </p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228111847.png"></p><h2 id="å®‰è£…-PicGo-æ’ä»¶-github-plus"><a href="#å®‰è£…-PicGo-æ’ä»¶-github-plus" class="headerlink" title="å®‰è£… PicGo æ’ä»¶ github-plus"></a>å®‰è£… <code>PicGo</code> æ’ä»¶ <code>github-plus</code></h2><blockquote><p>æ’ä»¶è¯´æ˜: å¦‚æœä¸å®‰è£… <code>github-plus</code> ä¹Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨, ä½†æ˜¯ç”±äº <code>PicGo</code> æä¾›äº†å›¾ç‰‡ç›¸å†ŒåŠŸèƒ½ï¼Œæˆ‘ä»¬å¦‚æœå¸Œæœ›è¿™ä¸ªç›¸å†Œé‡Œçš„å›¾ç‰‡èƒ½å’Œ<code>github</code>å›¾åºŠä»“åº“é‡Œçš„å›¾ç‰‡åŒæ­¥, å°±éœ€è¦è¯¥æ’ä»¶, å¦åˆ™ <code>PicGo</code> ç›¸å†Œé‡Œé¢çš„å›¾ç‰‡åˆ é™¤äº†, <code>github</code> å›¾åºŠä»“åº“é‡Œçš„å›¾ç‰‡ä¸ä¼šè·Ÿç€åˆ é™¤</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228111849.png"></p><h2 id="å›¾åºŠè®¾ç½®"><a href="#å›¾åºŠè®¾ç½®" class="headerlink" title="å›¾åºŠè®¾ç½®"></a>å›¾åºŠè®¾ç½®</h2><blockquote><p>æˆ‘ä»¬ä»èœå•çš„<code>å›¾åºŠè®¾ç½®</code>ä¸­æ‰¾åˆ° <code>githubPlus</code>, å®‰è£…å®Œæ’ä»¶å®ƒåº”è¯¥ä¼šå‡ºç°åœ¨è¯¥èœå•ä¸‹, å¦‚æœæ²¡æœ‰å¯å°è¯•é‡å¯è½¯ä»¶</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228111848.png"></p><h1 id="ç¬¬ä¸‰æ­¥-ä¸Šä¼ å’Œä½¿ç”¨"><a href="#ç¬¬ä¸‰æ­¥-ä¸Šä¼ å’Œä½¿ç”¨" class="headerlink" title="ç¬¬ä¸‰æ­¥, ä¸Šä¼ å’Œä½¿ç”¨"></a>ç¬¬ä¸‰æ­¥, ä¸Šä¼ å’Œä½¿ç”¨</h1><h2 id="ä¸Šä¼ å›¾ç‰‡"><a href="#ä¸Šä¼ å›¾ç‰‡" class="headerlink" title="ä¸Šä¼ å›¾ç‰‡"></a>ä¸Šä¼ å›¾ç‰‡</h2><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228111850.png"></p><h2 id="ä½¿ç”¨å›¾ç‰‡"><a href="#ä½¿ç”¨å›¾ç‰‡" class="headerlink" title="ä½¿ç”¨å›¾ç‰‡"></a>ä½¿ç”¨å›¾ç‰‡</h2><blockquote><p>ä¸Šä¼ æˆåŠŸå <code>github</code> ä»“åº“å°±ä¼šæ·»åŠ å¯¹åº”çš„å›¾ç‰‡, <code>PicGo</code> ç›¸å†Œå†…ä¹Ÿä¼šå‡ºç°å¯¹åº”çš„å›¾ç‰‡</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228111851.png"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><blockquote><p>è‡³æ­¤æ•™ç¨‹å°±ç»“æŸäº†, æ­¤åˆ»ä½ å°±åº”ç»æ‹¥æœ‰äº†ä¸€ä¸ªå¸¦æœ‰cdnåŠ é€Ÿçš„å…è´¹å›¾åºŠå¯ä»¥æ­£å¸¸ä½¿ç”¨äº†, å¹¶ä¸”è¿˜æœ‰ä¸€ä¸ªå…è´¹çš„å›¾åºŠç®¡ç†è½¯ä»¶å¯ä»¥åŒæ­¥æ“ä½œä½ çš„å›¾ç‰‡, è¯¥è½¯ä»¶è¿˜æœ‰è¯¸å¤šä¾¿åˆ©åŠŸèƒ½, å°±ç•™ç»™å¤§å®¶è‡ªå·±æ‘¸ç´¢å•¦~</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥å…· </tag>
            
            <tag> æ€§èƒ½ </tag>
            
            <tag> ä¼˜åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue çš„è‡ªå®šä¹‰æŒ‡ä»¤çš„ç”¨æ³•ä¸å®ä¾‹</title>
      <link href="2020/12/16/directives/"/>
      <url>2020/12/16/directives/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‰ç«¯å¼€å‘çš„åŒå­¦ä»¬åº”è¯¥å¯¹ <code>Element UI</code> ä¸é™Œç”Ÿï¼Œè€Œæ—¥å¸¸å¼€å‘ä¸­ï¼Œå¤šå°‘ä¼šå­˜åœ¨ä¸€äº›ç»„ä»¶æ— æ³•å®Œå…¨æ»¡è¶³æˆ‘ä»¬éœ€æ±‚çš„æƒ…å†µï¼Œæˆ–è€…è¯´æƒ³åœ¨åŸç»„ä»¶çš„åŸºç¡€ä¸Šé™„åŠ ä¸€äº›åŠŸèƒ½ï¼Œå½“é‡åˆ°éœ€è¦é™„åŠ ä¸€äº›ä¸æ˜¯ç‰¹åˆ«å¤æ‚çš„å°ä¸œè¥¿çš„æ—¶å€™ï¼Œé‡‡ç”¨ Vue çš„è‡ªå®šä¹‰æŒ‡ä»¤æ¥å®ç°ï¼Œå°†ä¼šæ˜¾å¾—ååˆ†ä¼˜é›…</p></blockquote><h2 id="å‰æ™¯"><a href="#å‰æ™¯" class="headerlink" title="å‰æ™¯"></a>å‰æ™¯</h2><p>æˆ‘ä»¬çŸ¥é“ <code>Element UI</code> çš„ <code>el-input</code> ç»„ä»¶ <code>type</code> ä¸º <code>textarea</code> æ—¶ï¼Œå¯é€šè¿‡è®¾ç½® <code>show-word-limit</code> å±æ€§æ¥å±•ç¤ºå­—æ•°ç»Ÿè®¡ã€‚ä½†æ˜¯æˆ‘ä»¬å½“å‰é¡¹ç›®ä½¿ç”¨çš„ <code>Element UI</code> ç‰ˆæœ¬ä¸º <code>2.5.21</code>, æ˜¯æ²¡æœ‰è¯¥å±æ€§çš„ï¼Œè€Œæˆ‘ä»¬æš‚æ—¶åˆä¸æ–¹ä¾¿å‡çº§ <code>Element UI</code> ç‰ˆæœ¬ï¼Œè€Œäº§å“ç»ç†åšæŒè¦æ±‚è¿™ä¸ªå°ä¸œè¥¿ï¼Œé‚£ä¹ˆçœ‹çœ‹å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜</p><p>å®é™…ä¸Šè¿™ä¸ªå°åŠŸèƒ½ååˆ†ç®€å•ï¼Œå¦‚ä¸‹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;el-input-wrap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span>    </span></span><br><span class="line"><span class="tag">      <span class="attr">:autosize</span>=<span class="string">&quot;&#123; minRows: 4, maxRows: 4 &#125;&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">&quot;desc&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">maxlength</span>=<span class="string">&quot;30&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;el-input-count&quot;</span>&gt;</span>&#123;&#123; desc.length &#125;&#125;/30<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/ecmascript-6&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        desc: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.el-input-wrap</span> &#123;</span></span><br><span class="line">    position: relative;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="css">  <span class="selector-class">.el-input-count</span> &#123;</span></span><br><span class="line">    position: absolute;</span><br><span class="line">    line-height: 1.5;</span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>: <span class="selector-id">#909399</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">background</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">    font-size: 12px;</span><br><span class="line">    bottom: 5px;</span><br><span class="line">    right: 10px;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡æ‰‹åŠ¨çš„æ–¹å¼æ·»åŠ çˆ¶å…ƒç´ è®¾ç½®å®šä½å±æ€§ï¼Œå†æ·»åŠ  <code>span</code> å…ƒç´ è®¾ç½®å®šä½å’Œæ ·å¼ï¼Œæ¥å±•ç¤ºåŠ¨æ€çš„é•¿åº¦é™åˆ¶æ•ˆæœï¼Œè¿™ä¹ˆåšå°±å¯ä»¥å®ç°å’Œæ–°ç‰ˆæœ¬çš„ <code>show-word-limit</code> ä¸€æ¨¡ä¸€æ ·çš„æ•ˆæœï¼Œç„¶è€Œå§‹ç»ˆæœ‰äº›è®¸éº»çƒ¦ï¼Œæ¯æ¬¡ç”¨åˆ°çš„åœ°æ–¹éƒ½è¦è¿™ä¹ˆæ¥ä¸€éï¼Œä¸”ä¸å¤ªå¥½æŠ½å‡ºæ¥å°è£…ç»„ä»¶ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯å¯ä»¥è€ƒè™‘ä¸€ä¸‹ä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤æ¥åšå‘¢ï¼Ÿ</p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>æœ€ç»ˆæ•ˆæœæœŸæœ›æ˜¯é€šè¿‡ä¸€ä¸ªæŒ‡ä»¤æ¥å®ç°ä¸Šé¢çš„æ•ˆæœï¼Œå¦‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">v-limit</span></span></span><br><span class="line"><span class="tag">  <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span>    </span></span><br><span class="line"><span class="tag">  <span class="attr">:autosize</span>=<span class="string">&quot;&#123; minRows: 4, maxRows: 4 &#125;&quot;</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">&quot;desc&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">maxlength</span>=<span class="string">&quot;30&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å’Œä¹‹å‰å¯¹æ¯”å°‘äº†äº›ä»€ä¹ˆï¼Ÿæˆ‘ä»¬éœ€è¦åšäº›ä»€ä¹ˆï¼Ÿ</p><p>1ï¼Œåˆ›å»ºä¸€ä¸ªçˆ¶å…ƒç´  è®¾ç½®å®šä½å±æ€§ï¼Œè¿™ä¸€æ­¥æ˜¯å±•ç¤ºæ–‡æœ¬æ˜¯å¦å®šä½åœ¨è¾“å…¥æ¡†çš„å³ä¸‹è§’çš„å…³é”®</p><p>2ï¼Œåˆ›å»ºä¸€ä¸ª <code>span</code> å…ƒç´  è®¾ç½®æ ·å¼ï¼Œç”¨äºå±•ç¤ºæ•ˆæœ</p><p>3ï¼Œå°† <code>el-input</code> ç»‘å®šçš„å€¼çš„é•¿åº¦å¡«åˆ° <code>span</code> å…ƒç´ ä¸­</p><p>4ï¼Œæ¯æ¬¡ <code>el-input</code> ç»‘å®šçš„å€¼çš„é•¿åº¦æ”¹å˜æ—¶ï¼Œæ›´æ–° <code>span</code> å…ƒç´ çš„å€¼</p><p>æ€è·¯æœ‰äº†ï¼Œå¹¶ä¸æ˜¯å¾ˆå¤æ‚ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹ï¼Œå¦‚ä½•æ¥ç¼–å†™è¿™ä¸ªä»£ç </p><h2 id="å®æˆ˜ä»£ç "><a href="#å®æˆ˜ä»£ç " class="headerlink" title="å®æˆ˜ä»£ç "></a>å®æˆ˜ä»£ç </h2><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªjsæ–‡ä»¶ <code>showWordLimit.js</code>, ç„¶å <code>export</code> ä¸€ä¸ªå¯ä»¥æ³¨å†ŒæŒ‡ä»¤çš„å¯¹è±¡ï¼Œç„¶ååœ¨é’©å­å‡½æ•° <code>inserted</code> æ—¶ï¼Œæˆ‘ä»¬æ¥å®ç°ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºä¸€ä¸ªçˆ¶å…ƒç´ ï¼Œå¹¶è®¾ç½®å®šä½å±æ€§</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  inserted: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> wrap = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">    wrap.style.position = <span class="string">&#x27;relative&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ—¢ç„¶æ˜¯çˆ¶å…ƒç´ ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°†ä½¿ç”¨äº†è¯¥æŒ‡ä»¤çš„ <code>el-input</code> å…ƒç´ æ’å…¥åˆ°è¿™ä¸ªçˆ¶å…ƒç´ å†…ï¼Œé€šè¿‡é’©å­çš„å‚æ•°æ¥æ‹¿åˆ° <code>dom</code> å…ƒç´ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  inserted: <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> wrap = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">    wrap.style.position = <span class="string">&#x27;relative&#x27;</span></span><br><span class="line">    </span><br><span class="line">    el.parentNode.replaceChild(wrap, el)</span><br><span class="line">    wrap.appendChild(el)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸‹æ¥ï¼Œç¬¬ä¸€æ­¥å°±ç®—å®Œæˆäº†ï¼Œä¸‹é¢ç»§ç»­åˆ›å»ºä¸€ä¸ª <code>span</code> å…ƒç´ ï¼Œå¹¶è®¾ç½®å¥½æ ·å¼ï¼ŒåŒæ—¶è¿˜è¦æ’å…¥åˆ°åˆšåˆšåˆ›å»ºçš„çˆ¶å…ƒç´ å†…</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  inserted: <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> wrap = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">    wrap.style.position = <span class="string">&#x27;relative&#x27;</span></span><br><span class="line">    </span><br><span class="line">    el.parentNode.replaceChild(wrap, el)</span><br><span class="line">    wrap.appendChild(el)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> oSpan = <span class="built_in">document</span>.createElement(<span class="string">&#x27;span&#x27;</span>)</span><br><span class="line">    oSpan.style.lineHeight = <span class="number">1.5</span></span><br><span class="line">    oSpan.style.color = <span class="string">&#x27;#909399&#x27;</span></span><br><span class="line">    oSpan.style.position = <span class="string">&#x27;absolute&#x27;</span></span><br><span class="line">    oSpan.style.background = <span class="string">&#x27;#FFF&#x27;</span></span><br><span class="line">    oSpan.style.fontSize = <span class="string">&#x27;12px&#x27;</span></span><br><span class="line">    oSpan.style.bottom = <span class="string">&#x27;5px&#x27;</span></span><br><span class="line">    oSpan.style.right = <span class="string">&#x27;10px&#x27;</span></span><br><span class="line">    oSpan.innerText = <span class="string">&#x27;0/30&#x27;</span></span><br><span class="line">    </span><br><span class="line">    wrap.appendChild(oSpan)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„åˆ° <code>innerText</code> çš„å€¼ï¼Œåº”è¯¥æ˜¯ä¸ªå˜é‡ï¼Œæ ¹æ® <code>el-input</code> çš„ <code>value</code> å€¼é•¿åº¦æ¥å†³å®šçš„ï¼Œè¿™é‡Œå°±éœ€è¦ç”¨åˆ°åŠ¨æ€æŒ‡ä»¤çš„åšæ³•ï¼Œåœ¨ä½¿ç”¨æŒ‡ä»¤çš„æ—¶å€™ï¼Œå°†è¿™ä¸ªå€¼ä¼ è¿‡æ¥ï¼Œä¾‹å¦‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">v-limit</span>=<span class="string">&quot;desc.length&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span>    </span></span><br><span class="line"><span class="tag">  <span class="attr">:autosize</span>=<span class="string">&quot;&#123; minRows: 4, maxRows: 4 &#125;&quot;</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">&quot;desc&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">maxlength</span>=<span class="string">&quot;30&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å›åˆ° <code>showWordLimit.js</code>ï¼Œæ€ä¹ˆæ¥æ”¶è¿™ä¸ªå€¼å‘¢ï¼ŸåŒæ ·ä¹Ÿæ˜¯é€šè¿‡é’©å­çš„å‚æ•° <code>binding</code> èƒ½æ‹¿åˆ°ï¼Œä¸æ¸…æ¥šçš„å¯ä»¥å‚è€ƒVueå®˜æ–¹æ–‡æ¡£ï¼Œè‡ªå®šä¹‰æŒ‡ä»¤è¿™ä¸€å—ï¼Œå†™å¾—å¾ˆæ¸…æ¥šï¼Œæ‹¿åˆ°äº†ä¹‹åï¼Œæ›¿æ¢æ‰ <code>span</code> å…ƒç´ çš„å€¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  inserted: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> wrap = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">    wrap.style.position = <span class="string">&#x27;relative&#x27;</span></span><br><span class="line">    </span><br><span class="line">    el.parentNode.replaceChild(wrap, el)</span><br><span class="line">    wrap.appendChild(el)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> oSpan = <span class="built_in">document</span>.createElement(<span class="string">&#x27;span&#x27;</span>)</span><br><span class="line">    oSpan.style.lineHeight = <span class="number">1.5</span></span><br><span class="line">    oSpan.style.color = <span class="string">&#x27;#909399&#x27;</span></span><br><span class="line">    oSpan.style.position = <span class="string">&#x27;absolute&#x27;</span></span><br><span class="line">    oSpan.style.background = <span class="string">&#x27;#FFF&#x27;</span></span><br><span class="line">    oSpan.style.fontSize = <span class="string">&#x27;12px&#x27;</span></span><br><span class="line">    oSpan.style.bottom = <span class="string">&#x27;5px&#x27;</span></span><br><span class="line">    oSpan.style.right = <span class="string">&#x27;10px&#x27;</span></span><br><span class="line">    <span class="comment">// binding.value ç­‰äºä½¿ç”¨è¯¥æŒ‡ä»¤çš„ el-input ç»„ä»¶çš„å€¼çš„é•¿åº¦, æ­¤å¤„ä½¿ç”¨çš„ES6å­—ç¬¦ä¸²æ¨¡æ¿æ‹¼æ¥</span></span><br><span class="line">    oSpan.innerText = <span class="string">`<span class="subst">$&#123;binding.value&#125;</span>/30`</span></span><br><span class="line">    </span><br><span class="line">    wrap.appendChild(oSpan)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>OKï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œå§‘ä¸”å¯ä»¥è¯•ç”¨ä¸€ä¸‹äº†ï¼Œåœ¨ <code>man.js</code> å¯¼å…¥å¹¶æ³¨å†Œè¯¥æŒ‡ä»¤</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.jså¦‚æœæ²¡æœ‰ä½¿ç”¨ vue-cli è„šæ‰‹æ¶çš„åŒå­¦ï¼Œéœ€è¦æ‰¾åˆ°å¯¹åº”çš„å…¥å£æ–‡ä»¶å¯¼å…¥æ³¨å†Œ</span></span><br><span class="line"><span class="keyword">import</span> showWordLimit <span class="keyword">from</span> <span class="string">&#x27;@/directive/showWordLimit&#x27;</span></span><br><span class="line">Vue.directive(<span class="string">&#x27;limit&#x27;</span>, showWordLimit)</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åœ¨éœ€è¦ç”¨åˆ°çš„é¡µé¢ä¸­ ä½¿ç”¨æŒ‡ä»¤ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">v-limit</span>=<span class="string">&quot;desc.length&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span>    </span></span><br><span class="line"><span class="tag">  <span class="attr">:autosize</span>=<span class="string">&quot;&#123; minRows: 4, maxRows: 4 &#125;&quot;</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">&quot;desc&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">maxlength</span>=<span class="string">&quot;30&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™ä¼šå‘ç°ï¼Œå±•ç¤ºæ•ˆæœçš„æ•°å€¼ï¼Œæ˜¯ä¸ä¼šéšç€è¾“å…¥æ¡†çš„å†…å®¹é•¿åº¦å˜æ¢è€Œæ›´æ–°çš„ï¼Œè™½ç„¶æ˜¯åšäº†ä¼ é€’æ–‡æœ¬æ¡†å†…å®¹é•¿åº¦çš„å¤„ç†ï¼Œä½†æ˜¯åœ¨ <code>inserted</code> å†…ï¼Œå®ƒåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœæ–‡æœ¬æ¡†é»˜è®¤å€¼çš„é•¿åº¦å°±æœ‰10ï¼Œé‚£ä¹ˆå®ƒæ˜¾ç¤ºçš„å°±å°†æ˜¯10/30ï¼Œç„¶åæˆ‘ä»¬ç¼–è¾‘äº†å†…å®¹ï¼Œé•¿åº¦æ”¹å˜äº†ï¼Œå®ƒä¾ç„¶è¿˜æ˜¯10/30ï¼Œå¦‚æœæƒ³è¦æ¯æ¬¡ç¼–è¾‘å†…å®¹éƒ½æ›´æ–°è¿™ä¸ªå±•ç¤ºæ•ˆæœçš„æ•°å€¼ï¼Œé‚£ä¹ˆä¹…è¦ç”¨åˆ°å¦å¤–ä¸€ä¸ªé’©å­å‡½æ•° <code>update</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  inserted: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> wrap = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">    wrap.style.position = <span class="string">&#x27;relative&#x27;</span></span><br><span class="line">    </span><br><span class="line">    el.parentNode.replaceChild(wrap, el)</span><br><span class="line">    wrap.appendChild(el)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> oSpan = <span class="built_in">document</span>.createElement(<span class="string">&#x27;span&#x27;</span>)</span><br><span class="line">    oSpan.style.lineHeight = <span class="number">1.5</span></span><br><span class="line">    oSpan.style.color = <span class="string">&#x27;#909399&#x27;</span></span><br><span class="line">    oSpan.style.position = <span class="string">&#x27;absolute&#x27;</span></span><br><span class="line">    oSpan.style.background = <span class="string">&#x27;#FFF&#x27;</span></span><br><span class="line">    oSpan.style.fontSize = <span class="string">&#x27;12px&#x27;</span></span><br><span class="line">    oSpan.style.bottom = <span class="string">&#x27;5px&#x27;</span></span><br><span class="line">    oSpan.style.right = <span class="string">&#x27;10px&#x27;</span></span><br><span class="line">    <span class="comment">// binding.value ç­‰äºä½¿ç”¨è¯¥æŒ‡ä»¤çš„ el-input ç»„ä»¶çš„å€¼çš„é•¿åº¦, æ­¤å¤„ä½¿ç”¨çš„ES6å­—ç¬¦ä¸²æ¨¡æ¿æ‹¼æ¥</span></span><br><span class="line">    oSpan.innerText = <span class="string">`<span class="subst">$&#123;binding.value&#125;</span>/30`</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¸ºäº†åœ¨ update ç”Ÿå‘½å‘¨æœŸå‡½æ•°å†…æ–¹ä¾¿è·å–åˆ°å®ƒï¼Œæ·»åŠ ä¸ª id </span></span><br><span class="line">    oSpan.setAttribute(<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;oSpan&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    wrap.appendChild(oSpan)</span><br><span class="line">  &#125;,</span><br><span class="line">  update: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> oSpan = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;oSpan&#x27;</span>)</span><br><span class="line">    oSpan.innerText = <span class="string">`<span class="subst">$&#123;binding.value&#125;</span>/30`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨å±•ç¤ºæ•ˆæœçš„æ•°å€¼åº”è¯¥å·²ç»å¯ä»¥å®ç°å®æ—¶æ›´æ–°äº†ï¼Œç»†å¿ƒçš„åŒå­¦åº”è¯¥ä¼šå‘ç°ï¼Œæœ‰ä¸ªåœ°æ–¹æœ‰é—æ¼ï¼Œé‚£å°±æ˜¯å±•ç¤ºæ•ˆæœçš„æœ€å¤§å­—ç¬¦é™åˆ¶çš„æ•°å­—ï¼Œç›®å‰æ˜¯å›ºå®šæ­»çš„30ï¼Œé‚£å¦‚æœæƒ³é™åˆ¶å­—ç¬¦ä¸ºå…¶ä»–æ•°å€¼ï¼Œå°±ä¸è¡Œäº†ï¼Œé‚£è¦è§£å†³è¿™ä¸ªé—®é¢˜ä¹Ÿéå¸¸ç®€å•ï¼Œå°†ä¼ é€’è¿‡æ¥çš„å€¼ï¼Œæ”¹ä¸ºæ•°ç»„çš„å½¢å¼å³å¯</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-input</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">v-limit</span>=<span class="string">&quot;[desc.length, 50]&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span>    </span></span><br><span class="line"><span class="tag">  <span class="attr">:autosize</span>=<span class="string">&quot;&#123; minRows: 4, maxRows: 4 &#125;&quot;</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">&quot;desc&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">maxlength</span>=<span class="string">&quot;30&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  inserted: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> wrap = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">    wrap.style.position = <span class="string">&#x27;relative&#x27;</span></span><br><span class="line">    </span><br><span class="line">    el.parentNode.replaceChild(wrap, el)</span><br><span class="line">    wrap.appendChild(el)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> oSpan = <span class="built_in">document</span>.createElement(<span class="string">&#x27;span&#x27;</span>)</span><br><span class="line">    oSpan.style.lineHeight = <span class="number">1.5</span></span><br><span class="line">    oSpan.style.color = <span class="string">&#x27;#909399&#x27;</span></span><br><span class="line">    oSpan.style.position = <span class="string">&#x27;absolute&#x27;</span></span><br><span class="line">    oSpan.style.background = <span class="string">&#x27;#FFF&#x27;</span></span><br><span class="line">    oSpan.style.fontSize = <span class="string">&#x27;12px&#x27;</span></span><br><span class="line">    oSpan.style.bottom = <span class="string">&#x27;5px&#x27;</span></span><br><span class="line">    oSpan.style.right = <span class="string">&#x27;10px&#x27;</span></span><br><span class="line">    <span class="comment">// binding.value ç­‰äºä½¿ç”¨è¯¥æŒ‡ä»¤çš„ el-input ç»„ä»¶çš„å€¼çš„é•¿åº¦, æ­¤å¤„ä½¿ç”¨çš„ES6å­—ç¬¦ä¸²æ¨¡æ¿æ‹¼æ¥</span></span><br><span class="line">    oSpan.innerText = <span class="string">`<span class="subst">$&#123;binding.value[<span class="number">0</span>]&#125;</span>/<span class="subst">$&#123;binding.value[<span class="number">1</span>]&#125;</span>`</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¸ºäº†åœ¨ update ç”Ÿå‘½å‘¨æœŸå‡½æ•°å†…æ–¹ä¾¿è·å–åˆ°å®ƒï¼Œæ·»åŠ ä¸ª id </span></span><br><span class="line">    oSpan.setAttribute(<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;oSpan&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    wrap.appendChild(oSpan)</span><br><span class="line">  &#125;,</span><br><span class="line">  update: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> oSpan = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;oSpan&#x27;</span>)</span><br><span class="line">    oSpan.innerText = <span class="string">`<span class="subst">$&#123;binding.value[<span class="number">0</span>]&#125;</span>/<span class="subst">$&#123;binding.value[<span class="number">1</span>]&#125;</span>`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è‡³æ­¤ï¼Œè¿™ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤å°±ç®—å®Œå…¨åšå¥½äº†ï¼Œå½“ç„¶éš¾åº¦ä¸å¤§ï¼Œè¿™ç¯‡æ–‡ç« çš„ç›®çš„ä¸»è¦æ˜¯å¸Œæœ›å¯ä»¥ç»™ä¸€äº›è¿˜æ²¡æœ‰æ¥è§¦è¿‡è‡ªå®šä¹‰æŒ‡ä»¤åº”ç”¨çš„åŒå­¦åšä¸ªå¼•å¯¼ï¼Œè®²è¿°ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨æµç¨‹å’Œæ€è·¯ã€‚</p></blockquote><h2 id="æ›´å¤šå®ä¾‹"><a href="#æ›´å¤šå®ä¾‹" class="headerlink" title="æ›´å¤šå®ä¾‹"></a>æ›´å¤šå®ä¾‹</h2><h3 id="v-copy-å¤åˆ¶ç²˜è´´æŒ‡ä»¤"><a href="#v-copy-å¤åˆ¶ç²˜è´´æŒ‡ä»¤" class="headerlink" title="v-copy å¤åˆ¶ç²˜è´´æŒ‡ä»¤"></a>v-copy å¤åˆ¶ç²˜è´´æŒ‡ä»¤</h3><p>éœ€æ±‚ï¼šå®ç°ä¸€é”®å¤åˆ¶æ–‡æœ¬å†…å®¹ï¼Œç”¨äºé¼ æ ‡å³é”®ç²˜è´´ã€‚</p><p>æ€è·¯ï¼š</p><ol><li>åŠ¨æ€åˆ›å»º textarea æ ‡ç­¾ï¼Œå¹¶è®¾ç½® readOnly å±æ€§åŠç§»å‡ºå¯è§†åŒºåŸŸ</li><li>å°†è¦ copy çš„å€¼èµ‹ç»™ textarea æ ‡ç­¾çš„ value å±æ€§ï¼Œå¹¶æ’å…¥åˆ° body</li><li>é€‰ä¸­å€¼ textarea å¹¶å¤åˆ¶</li><li>å°† body ä¸­æ’å…¥çš„ textarea ç§»é™¤</li><li>åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ç»‘å®šäº‹ä»¶ï¼Œåœ¨è§£ç»‘æ—¶ç§»é™¤äº‹ä»¶</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> copy = &#123;</span><br><span class="line">  <span class="function"><span class="title">bind</span>(<span class="params">el, &#123; value &#125;</span>)</span> &#123;</span><br><span class="line">    el.$value = value</span><br><span class="line">    el.handler = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!el.$value) &#123;</span><br><span class="line">        <span class="comment">// å€¼ä¸ºç©ºçš„æ—¶å€™ï¼Œç»™å‡ºæç¤ºã€‚å¯æ ¹æ®é¡¹ç›®UIä»”ç»†è®¾è®¡</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æ— å¤åˆ¶å†…å®¹&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// åŠ¨æ€åˆ›å»º textarea æ ‡ç­¾</span></span><br><span class="line">      <span class="keyword">const</span> textarea = <span class="built_in">document</span>.createElement(<span class="string">&#x27;textarea&#x27;</span>)</span><br><span class="line">      <span class="comment">// å°†è¯¥ textarea è®¾ä¸º readonly é˜²æ­¢ iOS ä¸‹è‡ªåŠ¨å”¤èµ·é”®ç›˜ï¼ŒåŒæ—¶å°† textarea ç§»å‡ºå¯è§†åŒºåŸŸ</span></span><br><span class="line">      textarea.readOnly = <span class="string">&#x27;readonly&#x27;</span></span><br><span class="line">      textarea.style.position = <span class="string">&#x27;absolute&#x27;</span></span><br><span class="line">      textarea.style.left = <span class="string">&#x27;-9999px&#x27;</span></span><br><span class="line">      <span class="comment">// å°†è¦ copy çš„å€¼èµ‹ç»™ textarea æ ‡ç­¾çš„ value å±æ€§</span></span><br><span class="line">      textarea.value = el.$value</span><br><span class="line">      <span class="comment">// å°† textarea æ’å…¥åˆ° body ä¸­</span></span><br><span class="line">      <span class="built_in">document</span>.body.appendChild(textarea)</span><br><span class="line">      <span class="comment">// é€‰ä¸­å€¼å¹¶å¤åˆ¶</span></span><br><span class="line">      textarea.select()</span><br><span class="line">      <span class="keyword">const</span> result = <span class="built_in">document</span>.execCommand(<span class="string">&#x27;Copy&#x27;</span>)</span><br><span class="line">      <span class="keyword">if</span> (result) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;å¤åˆ¶æˆåŠŸ&#x27;</span>) <span class="comment">// å¯æ ¹æ®é¡¹ç›®UIä»”ç»†è®¾è®¡</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">document</span>.body.removeChild(textarea)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œå°±æ˜¯æ‰€è°“çš„ä¸€é”® copy å•¦</span></span><br><span class="line">    el.addEventListener(<span class="string">&#x27;click&#x27;</span>, el.handler)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// å½“ä¼ è¿›æ¥çš„å€¼æ›´æ–°çš„æ—¶å€™è§¦å‘</span></span><br><span class="line">  <span class="function"><span class="title">componentUpdated</span>(<span class="params">el, &#123; value &#125;</span>)</span> &#123;</span><br><span class="line">    el.$value = value</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘çš„æ—¶å€™ï¼Œç§»é™¤äº‹ä»¶ç»‘å®š</span></span><br><span class="line">  <span class="function"><span class="title">unbind</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">    el.removeEventListener(<span class="string">&#x27;click&#x27;</span>, el.handler)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> copy</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼šç»™ Dom åŠ ä¸Š v-copy åŠå¤åˆ¶çš„æ–‡æœ¬å³å¯</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-copy</span>=<span class="string">&quot;copyText&quot;</span>&gt;</span>å¤åˆ¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        copyText: <span class="string">&#x27;a copy directives&#x27;</span>,</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="v-longpress-é•¿æŒ‰æŒ‡ä»¤"><a href="#v-longpress-é•¿æŒ‰æŒ‡ä»¤" class="headerlink" title="v-longpress é•¿æŒ‰æŒ‡ä»¤"></a>v-longpress é•¿æŒ‰æŒ‡ä»¤</h3><p>éœ€æ±‚ï¼šå®ç°é•¿æŒ‰ï¼Œç”¨æˆ·éœ€è¦æŒ‰ä¸‹å¹¶æŒ‰ä½æŒ‰é’®å‡ ç§’é’Ÿï¼Œè§¦å‘ç›¸åº”çš„äº‹ä»¶</p><p>æ€è·¯ï¼š</p><ol><li>åˆ›å»ºä¸€ä¸ªè®¡æ—¶å™¨ï¼Œ 2 ç§’åæ‰§è¡Œå‡½æ•°</li><li>å½“ç”¨æˆ·æŒ‰ä¸‹æŒ‰é’®æ—¶è§¦å‘ mousedown äº‹ä»¶ï¼Œå¯åŠ¨è®¡æ—¶å™¨ï¼›ç”¨æˆ·æ¾å¼€æŒ‰é’®æ—¶è°ƒç”¨ mouseout äº‹ä»¶ã€‚</li><li>å¦‚æœ mouseup äº‹ä»¶ 2 ç§’å†…è¢«è§¦å‘ï¼Œå°±æ¸…é™¤è®¡æ—¶å™¨ï¼Œå½“ä½œä¸€ä¸ªæ™®é€šçš„ç‚¹å‡»äº‹ä»¶</li><li>å¦‚æœè®¡æ—¶å™¨æ²¡æœ‰åœ¨ 2 ç§’å†…æ¸…é™¤ï¼Œåˆ™åˆ¤å®šä¸ºä¸€æ¬¡é•¿æŒ‰ï¼Œå¯ä»¥æ‰§è¡Œå…³è”çš„å‡½æ•°ã€‚</li><li>åœ¨ç§»åŠ¨ç«¯è¦è€ƒè™‘ touchstartï¼Œtouchend äº‹ä»¶</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> longpress = &#123;</span><br><span class="line">  bind: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding, vNode</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> binding.value !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="string">&#x27;callback must be a function&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å®šä¹‰å˜é‡</span></span><br><span class="line">    <span class="keyword">let</span> pressTimer = <span class="literal">null</span></span><br><span class="line">    <span class="comment">// åˆ›å»ºè®¡æ—¶å™¨ï¼ˆ 2ç§’åæ‰§è¡Œå‡½æ•° ï¼‰</span></span><br><span class="line">    <span class="keyword">let</span> start = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (e.type === <span class="string">&#x27;click&#x27;</span> &amp;&amp; e.button !== <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (pressTimer === <span class="literal">null</span>) &#123;</span><br><span class="line">        pressTimer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          handler()</span><br><span class="line">        &#125;, <span class="number">2000</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å–æ¶ˆè®¡æ—¶å™¨</span></span><br><span class="line">    <span class="keyword">let</span> cancel = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (pressTimer !== <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(pressTimer)</span><br><span class="line">        pressTimer = <span class="literal">null</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¿è¡Œå‡½æ•°</span></span><br><span class="line">    <span class="keyword">const</span> handler = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      binding.value(e)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span></span><br><span class="line">    el.addEventListener(<span class="string">&#x27;mousedown&#x27;</span>, start)</span><br><span class="line">    el.addEventListener(<span class="string">&#x27;touchstart&#x27;</span>, start)</span><br><span class="line">    <span class="comment">// å–æ¶ˆè®¡æ—¶å™¨</span></span><br><span class="line">    el.addEventListener(<span class="string">&#x27;click&#x27;</span>, cancel)</span><br><span class="line">    el.addEventListener(<span class="string">&#x27;mouseout&#x27;</span>, cancel)</span><br><span class="line">    el.addEventListener(<span class="string">&#x27;touchend&#x27;</span>, cancel)</span><br><span class="line">    el.addEventListener(<span class="string">&#x27;touchcancel&#x27;</span>, cancel)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// å½“ä¼ è¿›æ¥çš„å€¼æ›´æ–°çš„æ—¶å€™è§¦å‘</span></span><br><span class="line">  <span class="function"><span class="title">componentUpdated</span>(<span class="params">el, &#123; value &#125;</span>)</span> &#123;</span><br><span class="line">    el.$value = value</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘çš„æ—¶å€™ï¼Œç§»é™¤äº‹ä»¶ç»‘å®š</span></span><br><span class="line">  <span class="function"><span class="title">unbind</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">    el.removeEventListener(<span class="string">&#x27;click&#x27;</span>, el.handler)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> longpress</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼šç»™ Dom åŠ ä¸Š longpress åŠå›è°ƒå‡½æ•°å³å¯</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-longpress</span>=<span class="string">&quot;longpress&quot;</span>&gt;</span>é•¿æŒ‰<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    longpress () &#123;</span><br><span class="line"><span class="javascript">      alert(<span class="string">&#x27;é•¿æŒ‰æŒ‡ä»¤ç”Ÿæ•ˆ&#x27;</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="v-debounce-è¾“å…¥æ¡†é˜²æŠ–æŒ‡ä»¤"><a href="#v-debounce-è¾“å…¥æ¡†é˜²æŠ–æŒ‡ä»¤" class="headerlink" title="v-debounce è¾“å…¥æ¡†é˜²æŠ–æŒ‡ä»¤"></a>v-debounce è¾“å…¥æ¡†é˜²æŠ–æŒ‡ä»¤</h3><p>èƒŒæ™¯ï¼šåœ¨å¼€å‘ä¸­ï¼Œæœ‰äº›æäº¤ä¿å­˜æŒ‰é’®æœ‰æ—¶å€™ä¼šåœ¨çŸ­æ—¶é—´å†…è¢«ç‚¹å‡»å¤šæ¬¡ï¼Œè¿™æ ·å°±ä¼šå¤šæ¬¡é‡å¤è¯·æ±‚åç«¯æ¥å£ï¼Œé€ æˆæ•°æ®çš„æ··ä¹±ï¼Œæ¯”å¦‚æ–°å¢è¡¨å•çš„æäº¤æŒ‰é’®ï¼Œå¤šæ¬¡ç‚¹å‡»å°±ä¼šæ–°å¢å¤šæ¡é‡å¤çš„æ•°æ®ã€‚</p><p>éœ€æ±‚ï¼šé˜²æ­¢æŒ‰é’®åœ¨çŸ­æ—¶é—´å†…è¢«å¤šæ¬¡ç‚¹å‡»ï¼Œä½¿ç”¨é˜²æŠ–å‡½æ•°é™åˆ¶è§„å®šæ—¶é—´å†…åªèƒ½ç‚¹å‡»ä¸€æ¬¡ã€‚</p><p>æ€è·¯ï¼š</p><ol><li>å®šä¹‰ä¸€ä¸ªå»¶è¿Ÿæ‰§è¡Œçš„æ–¹æ³•ï¼Œå¦‚æœåœ¨å»¶è¿Ÿæ—¶é—´å†…å†è°ƒç”¨è¯¥æ–¹æ³•ï¼Œåˆ™é‡æ–°è®¡ç®—æ‰§è¡Œæ—¶é—´ã€‚</li><li>å°†æ—¶é—´ç»‘å®šåœ¨ click æ–¹æ³•ä¸Šã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> debounce = &#123;</span><br><span class="line">  inserted: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timer</span><br><span class="line">    el.addEventListener(<span class="string">&#x27;keyup&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">      &#125;</span><br><span class="line">      timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        binding.value()</span><br><span class="line">      &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> debounce</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼šç»™ Dom åŠ ä¸Š v-debounce åŠå›è°ƒå‡½æ•°å³å¯</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-debounce</span>=<span class="string">&quot;debounceClick&quot;</span>&gt;</span>é˜²æŠ–<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    debounceClick () &#123;</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">&#x27;åªè§¦å‘ä¸€æ¬¡&#x27;</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="v-emoji-ç¦æ­¢è¡¨æƒ…åŠç‰¹æ®Šå­—ç¬¦"><a href="#v-emoji-ç¦æ­¢è¡¨æƒ…åŠç‰¹æ®Šå­—ç¬¦" class="headerlink" title="v-emoji ç¦æ­¢è¡¨æƒ…åŠç‰¹æ®Šå­—ç¬¦"></a>v-emoji ç¦æ­¢è¡¨æƒ…åŠç‰¹æ®Šå­—ç¬¦</h3><p>èƒŒæ™¯ï¼šå¼€å‘ä¸­é‡åˆ°çš„è¡¨å•è¾“å…¥ï¼Œå¾€å¾€ä¼šæœ‰å¯¹è¾“å…¥å†…å®¹çš„é™åˆ¶ï¼Œæ¯”å¦‚ä¸èƒ½è¾“å…¥è¡¨æƒ…å’Œç‰¹æ®Šå­—ç¬¦ï¼Œåªèƒ½è¾“å…¥æ•°å­—æˆ–å­—æ¯ç­‰ã€‚</p><p>æˆ‘ä»¬å¸¸è§„æ–¹æ³•æ˜¯åœ¨æ¯ä¸€ä¸ªè¡¨å•çš„@change äº‹ä»¶ä¸Šåšå¤„ç†ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;note&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;vaidateEmoji&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">    methods: &#123;</span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">vaidateEmoji</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> reg = <span class="regexp">/[^\u4E00-\u9FA5|\d|\a-zA-Z|\r\n\s,.?!ï¼Œã€‚ï¼Ÿï¼â€¦â€”&amp;$=()-+/*&#123;&#125;[\]]|\s/g</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.note = <span class="built_in">this</span>.note.replace(reg, <span class="string">&#x27;&#x27;</span>)</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·ä»£ç é‡æ¯”è¾ƒå¤§è€Œä¸”ä¸å¥½ç»´æŠ¤ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªæŒ‡ä»¤æ¥è§£å†³è¿™é—®é¢˜ã€‚</p><p>éœ€æ±‚ï¼šæ ¹æ®æ­£åˆ™è¡¨è¾¾å¼ï¼Œè®¾è®¡è‡ªå®šä¹‰å¤„ç†è¡¨å•è¾“å…¥è§„åˆ™çš„æŒ‡ä»¤ï¼Œä¸‹é¢ä»¥ç¦æ­¢è¾“å…¥è¡¨æƒ…å’Œç‰¹æ®Šå­—ç¬¦ä¸ºä¾‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> findEle = <span class="function">(<span class="params">parent, type</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> parent.tagName.toLowerCase() === type ? parent : parent.querySelector(type)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> trigger = <span class="function">(<span class="params">el, type</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> e = <span class="built_in">document</span>.createEvent(<span class="string">&#x27;HTMLEvents&#x27;</span>)</span><br><span class="line">  e.initEvent(type, <span class="literal">true</span>, <span class="literal">true</span>)</span><br><span class="line">  el.dispatchEvent(e)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> emoji = &#123;</span><br><span class="line">  bind: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding, vnode</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// æ­£åˆ™è§„åˆ™å¯æ ¹æ®éœ€æ±‚è‡ªå®šä¹‰</span></span><br><span class="line">    <span class="keyword">var</span> regRule = <span class="regexp">/[^\u4E00-\u9FA5|\d|\a-zA-Z|\r\n\s,.?!ï¼Œã€‚ï¼Ÿï¼â€¦â€”&amp;$=()-+/*&#123;&#125;[\]]|\s/g</span></span><br><span class="line">    <span class="keyword">let</span> $inp = findEle(el, <span class="string">&#x27;input&#x27;</span>)</span><br><span class="line">    el.$inp = $inp</span><br><span class="line">    $inp.handle = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> val = $inp.value</span><br><span class="line">      $inp.value = val.replace(regRule, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      trigger($inp, <span class="string">&#x27;input&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    $inp.addEventListener(<span class="string">&#x27;keyup&#x27;</span>, $inp.handle)</span><br><span class="line">  &#125;,</span><br><span class="line">  unbind: <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</span><br><span class="line">    el.$inp.removeEventListener(<span class="string">&#x27;keyup&#x27;</span>, el.$inp.handle)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> emoji</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼šå°†éœ€è¦æ ¡éªŒçš„è¾“å…¥æ¡†åŠ ä¸Š v-emoji å³å¯</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;note&quot;</span> <span class="attr">v-emoji</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="v-LazyLoad-å›¾ç‰‡æ‡’åŠ è½½"><a href="#v-LazyLoad-å›¾ç‰‡æ‡’åŠ è½½" class="headerlink" title="v-LazyLoad å›¾ç‰‡æ‡’åŠ è½½"></a>v-LazyLoad å›¾ç‰‡æ‡’åŠ è½½</h3><p>èƒŒæ™¯ï¼šåœ¨ç±»ç”µå•†ç±»é¡¹ç›®ï¼Œå¾€å¾€å­˜åœ¨å¤§é‡çš„å›¾ç‰‡ï¼Œå¦‚ banner å¹¿å‘Šå›¾ï¼Œèœå•å¯¼èˆªå›¾ï¼Œç¾å›¢ç­‰å•†å®¶åˆ—è¡¨å¤´å›¾ç­‰ã€‚å›¾ç‰‡ä¼—å¤šä»¥åŠå›¾ç‰‡ä½“ç§¯è¿‡å¤§å¾€å¾€ä¼šå½±å“é¡µé¢åŠ è½½é€Ÿåº¦ï¼Œé€ æˆä¸è‰¯çš„ç”¨æˆ·ä½“éªŒï¼Œæ‰€ä»¥è¿›è¡Œå›¾ç‰‡æ‡’åŠ è½½ä¼˜åŒ–åŠ¿åœ¨å¿…è¡Œã€‚</p><p>éœ€æ±‚ï¼šå®ç°ä¸€ä¸ªå›¾ç‰‡æ‡’åŠ è½½æŒ‡ä»¤ï¼ŒåªåŠ è½½æµè§ˆå™¨å¯è§åŒºåŸŸçš„å›¾ç‰‡ã€‚</p><p>æ€è·¯ï¼š</p><ol><li>å›¾ç‰‡æ‡’åŠ è½½çš„åŸç†ä¸»è¦æ˜¯åˆ¤æ–­å½“å‰å›¾ç‰‡æ˜¯å¦åˆ°äº†å¯è§†åŒºåŸŸè¿™ä¸€æ ¸å¿ƒé€»è¾‘å®ç°çš„</li><li>æ‹¿åˆ°æ‰€æœ‰çš„å›¾ç‰‡ dome ï¼Œéå†æ¯ä¸ªå›¾ç‰‡åˆ¤æ–­å½“å‰å›¾ç‰‡æ˜¯å¦åˆ°äº†å¯è§†åŒºèŒƒå›´å†…</li><li>å¦‚æœåˆ°äº†å°±è®¾ç½®å›¾ç‰‡çš„ src å±æ€§ï¼Œå¦åˆ™æ˜¾ç¤ºé»˜è®¤å›¾ç‰‡</li></ol><p>å›¾ç‰‡æ‡’åŠ è½½æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç°ï¼Œä¸€æ˜¯ç»‘å®š srcoll äº‹ä»¶è¿›è¡Œç›‘å¬ï¼ŒäºŒæ˜¯ä½¿ç”¨ IntersectionObserver åˆ¤æ–­å›¾ç‰‡æ˜¯å¦åˆ°äº†å¯è§†åŒºåŸŸï¼Œä½†æ˜¯æœ‰æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜ã€‚</p><p>ä¸‹é¢å°è£…ä¸€ä¸ªæ‡’åŠ è½½æŒ‡ä»¤å…¼å®¹ä¸¤ç§æ–¹æ³•ï¼Œåˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒ IntersectionObserver APIï¼Œå¦‚æœæ”¯æŒå°±ä½¿ç”¨ IntersectionObserver å®ç°æ‡’åŠ è½½ï¼Œå¦åˆ™åˆ™ä½¿ç”¨ srcoll äº‹ä»¶ç›‘å¬ + èŠ‚æµçš„æ–¹æ³•å®ç°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> LazyLoad = &#123;</span><br><span class="line">  <span class="comment">// installæ–¹æ³•</span></span><br><span class="line">  <span class="function"><span class="title">install</span>(<span class="params">Vue, options</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> defaultSrc = options.default</span><br><span class="line">    Vue.directive(<span class="string">&#x27;lazy&#x27;</span>, &#123;</span><br><span class="line">      <span class="function"><span class="title">bind</span>(<span class="params">el, binding</span>)</span> &#123;</span><br><span class="line">        LazyLoad.init(el, binding.value, defaultSrc)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">inserted</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (IntersectionObserver) &#123;</span><br><span class="line">          LazyLoad.observe(el)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          LazyLoad.listenerScroll(el)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">  <span class="function"><span class="title">init</span>(<span class="params">el, val, def</span>)</span> &#123;</span><br><span class="line">    el.setAttribute(<span class="string">&#x27;data-src&#x27;</span>, val)</span><br><span class="line">    el.setAttribute(<span class="string">&#x27;src&#x27;</span>, def)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// åˆ©ç”¨IntersectionObserverç›‘å¬el</span></span><br><span class="line">  <span class="function"><span class="title">observe</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> io = <span class="keyword">new</span> IntersectionObserver(<span class="function">(<span class="params">entries</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> realSrc = el.dataset.src</span><br><span class="line">      <span class="keyword">if</span> (entries[<span class="number">0</span>].isIntersecting) &#123;</span><br><span class="line">        <span class="keyword">if</span> (realSrc) &#123;</span><br><span class="line">          el.src = realSrc</span><br><span class="line">          el.removeAttribute(<span class="string">&#x27;data-src&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    io.observe(el)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ç›‘å¬scrolläº‹ä»¶</span></span><br><span class="line">  <span class="function"><span class="title">listenerScroll</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> handler = LazyLoad.throttle(LazyLoad.load, <span class="number">300</span>)</span><br><span class="line">    LazyLoad.load(el)</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;scroll&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      handler(el)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// åŠ è½½çœŸå®å›¾ç‰‡</span></span><br><span class="line">  <span class="function"><span class="title">load</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> windowHeight = <span class="built_in">document</span>.documentElement.clientHeight</span><br><span class="line">    <span class="keyword">const</span> elTop = el.getBoundingClientRect().top</span><br><span class="line">    <span class="keyword">const</span> elBtm = el.getBoundingClientRect().bottom</span><br><span class="line">    <span class="keyword">const</span> realSrc = el.dataset.src</span><br><span class="line">    <span class="keyword">if</span> (elTop - windowHeight &lt; <span class="number">0</span> &amp;&amp; elBtm &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (realSrc) &#123;</span><br><span class="line">        el.src = realSrc</span><br><span class="line">        el.removeAttribute(<span class="string">&#x27;data-src&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// èŠ‚æµ</span></span><br><span class="line">  <span class="function"><span class="title">throttle</span>(<span class="params">fn, delay</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> timer</span><br><span class="line">    <span class="keyword">let</span> prevTime</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> currTime = <span class="built_in">Date</span>.now()</span><br><span class="line">      <span class="keyword">const</span> context = <span class="built_in">this</span></span><br><span class="line">      <span class="keyword">if</span> (!prevTime) prevTime = currTime</span><br><span class="line">      <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (currTime - prevTime &gt; delay) &#123;</span><br><span class="line">        prevTime = currTime</span><br><span class="line">        fn.apply(context, args)</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        prevTime = <span class="built_in">Date</span>.now()</span><br><span class="line">        timer = <span class="literal">null</span></span><br><span class="line">        fn.apply(context, args)</span><br><span class="line">      &#125;, delay)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> LazyLoad</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼Œå°†ç»„ä»¶å†… <img> æ ‡ç­¾çš„ src æ¢æˆ v-LazyLoad</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">v-LazyLoad</span>=<span class="string">&quot;xxx.jpg&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h3 id="v-permission-æƒé™æ ¡éªŒæŒ‡ä»¤"><a href="#v-permission-æƒé™æ ¡éªŒæŒ‡ä»¤" class="headerlink" title="v-permission æƒé™æ ¡éªŒæŒ‡ä»¤"></a>v-permission æƒé™æ ¡éªŒæŒ‡ä»¤</h3><p>èƒŒæ™¯ï¼šåœ¨ä¸€äº›åå°ç®¡ç†ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æ ¹æ®ç”¨æˆ·è§’è‰²è¿›è¡Œä¸€äº›æ“ä½œæƒé™çš„åˆ¤æ–­ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬éƒ½æ˜¯ç²—æš´åœ°ç»™ä¸€ä¸ªå…ƒç´ æ·»åŠ  v-if / v-show æ¥è¿›è¡Œæ˜¾ç¤ºéšè—ï¼Œä½†å¦‚æœåˆ¤æ–­æ¡ä»¶ç¹çä¸”å¤šä¸ªåœ°æ–¹éœ€è¦åˆ¤æ–­ï¼Œè¿™ç§æ–¹å¼çš„ä»£ç ä¸ä»…ä¸ä¼˜é›…è€Œä¸”å†—ä½™ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤æ¥å¤„ç†ã€‚</p><p>éœ€æ±‚ï¼šè‡ªå®šä¹‰ä¸€ä¸ªæƒé™æŒ‡ä»¤ï¼Œå¯¹éœ€è¦æƒé™åˆ¤æ–­çš„ dom è¿›è¡Œæ˜¾ç¤ºéšè—ã€‚</p><p>æ€è·¯ï¼š</p><ol><li>è‡ªå®šä¹‰ä¸€ä¸ªæƒé™æ•°ç»„</li><li>åˆ¤æ–­ç”¨æˆ·çš„æƒé™æ˜¯å¦åœ¨è¿™ä¸ªæ•°ç»„å†…ï¼Œå¦‚æœæ˜¯åˆ™æ˜¾ç¤ºï¼Œå¦åˆ™åˆ™ç§»é™¤ Dom</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkArray</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> arr = [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>]</span><br><span class="line">  <span class="keyword">let</span> index = arr.indexOf(key)</span><br><span class="line">  <span class="keyword">if</span> (index &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span> <span class="comment">// æœ‰æƒé™</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span> <span class="comment">// æ— æƒé™</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> permission = &#123;</span><br><span class="line">  inserted: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> permission = binding.value <span class="comment">// è·å–åˆ° v-permissionçš„å€¼</span></span><br><span class="line">    <span class="keyword">if</span> (permission) &#123;</span><br><span class="line">      <span class="keyword">let</span> hasPermission = checkArray(permission)</span><br><span class="line">      <span class="keyword">if</span> (!hasPermission) &#123;</span><br><span class="line">        <span class="comment">// æ²¡æœ‰æƒé™ ç§»é™¤Domå…ƒç´ </span></span><br><span class="line">        el.parentNode &amp;&amp; el.parentNode.removeChild(el)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> permission</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼šç»™ v-permission èµ‹å€¼åˆ¤æ–­å³å¯</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btns&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æ˜¾ç¤º --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-permission</span>=<span class="string">&quot;&#x27;1&#x27;&quot;</span>&gt;</span>æƒé™æŒ‰é’®1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ä¸æ˜¾ç¤º --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-permission</span>=<span class="string">&quot;&#x27;10&#x27;&quot;</span>&gt;</span>æƒé™æŒ‰é’®2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="vue-waterMarker-å®ç°é¡µé¢æ°´å°"><a href="#vue-waterMarker-å®ç°é¡µé¢æ°´å°" class="headerlink" title="vue-waterMarker å®ç°é¡µé¢æ°´å°"></a>vue-waterMarker å®ç°é¡µé¢æ°´å°</h3><p>éœ€æ±‚ï¼šç»™æ•´ä¸ªé¡µé¢æ·»åŠ èƒŒæ™¯æ°´å°</p><p>æ€è·¯ï¼š</p><ol><li>ä½¿ç”¨ canvas ç‰¹æ€§ç”Ÿæˆ base64 æ ¼å¼çš„å›¾ç‰‡æ–‡ä»¶ï¼Œè®¾ç½®å…¶å­—ä½“å¤§å°ï¼Œé¢œè‰²ç­‰ã€‚</li><li>å°†å…¶è®¾ç½®ä¸ºèƒŒæ™¯å›¾ç‰‡ï¼Œä»è€Œå®ç°é¡µé¢æˆ–ç»„ä»¶æ°´å°æ•ˆæœ</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addWaterMarker</span>(<span class="params">str, parentNode, font, textColor</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ°´å°æ–‡å­—ï¼Œçˆ¶å…ƒç´ ï¼Œå­—ä½“ï¼Œæ–‡å­—é¢œè‰²</span></span><br><span class="line">  <span class="keyword">var</span> can = <span class="built_in">document</span>.createElement(<span class="string">&#x27;canvas&#x27;</span>)</span><br><span class="line">  parentNode.appendChild(can)</span><br><span class="line">  can.width = <span class="number">200</span></span><br><span class="line">  can.height = <span class="number">150</span></span><br><span class="line">  can.style.display = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">  <span class="keyword">var</span> cans = can.getContext(<span class="string">&#x27;2d&#x27;</span>)</span><br><span class="line">  cans.rotate((-<span class="number">20</span> * <span class="built_in">Math</span>.PI) / <span class="number">180</span>)</span><br><span class="line">  cans.font = font || <span class="string">&#x27;16px Microsoft JhengHei&#x27;</span></span><br><span class="line">  cans.fillStyle = textColor || <span class="string">&#x27;rgba(180, 180, 180, 0.3)&#x27;</span></span><br><span class="line">  cans.textAlign = <span class="string">&#x27;left&#x27;</span></span><br><span class="line">  cans.textBaseline = <span class="string">&#x27;Middle&#x27;</span></span><br><span class="line">  cans.fillText(str, can.width / <span class="number">10</span>, can.height / <span class="number">2</span>)</span><br><span class="line">  parentNode.style.backgroundImage = <span class="string">&#x27;url(&#x27;</span> + can.toDataURL(<span class="string">&#x27;image/png&#x27;</span>) + <span class="string">&#x27;)&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> waterMarker = &#123;</span><br><span class="line">  bind: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>&#123;</span><br><span class="line">    addWaterMarker(binding.value.text, el, binding.value.font, binding.value.textColor)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> waterMarker</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼Œè®¾ç½®æ°´å°æ–‡æ¡ˆï¼Œé¢œè‰²ï¼Œå­—ä½“å¤§å°å³å¯</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-waterMarker</span>=<span class="string">&quot;&#123;text:&#x27;lzgç‰ˆæƒæ‰€æœ‰&#x27;,textColor:&#x27;rgba(180, 180, 180, 0.4)&#x27;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="v-draggable-æ‹–æ‹½æŒ‡ä»¤"><a href="#v-draggable-æ‹–æ‹½æŒ‡ä»¤" class="headerlink" title="v-draggable æ‹–æ‹½æŒ‡ä»¤"></a>v-draggable æ‹–æ‹½æŒ‡ä»¤</h3><p>éœ€æ±‚ï¼šå®ç°ä¸€ä¸ªæ‹–æ‹½æŒ‡ä»¤ï¼Œå¯åœ¨é¡µé¢å¯è§†åŒºåŸŸä»»æ„æ‹–æ‹½å…ƒç´ ã€‚</p><p>æ€è·¯ï¼š</p><ol><li>è®¾ç½®éœ€è¦æ‹–æ‹½çš„å…ƒç´ ä¸ºç›¸å¯¹å®šä½ï¼Œå…¶çˆ¶å…ƒç´ ä¸ºç»å¯¹å®šä½ã€‚</li><li>é¼ æ ‡æŒ‰ä¸‹(onmousedown)æ—¶è®°å½•ç›®æ ‡å…ƒç´ å½“å‰çš„ left å’Œ top å€¼ã€‚</li><li>é¼ æ ‡ç§»åŠ¨(onmousemove)æ—¶è®¡ç®—æ¯æ¬¡ç§»åŠ¨çš„æ¨ªå‘è·ç¦»å’Œçºµå‘è·ç¦»çš„å˜åŒ–å€¼ï¼Œå¹¶æ”¹å˜å…ƒç´ çš„ left å’Œ top å€¼</li><li>é¼ æ ‡æ¾å¼€(onmouseup)æ—¶å®Œæˆä¸€æ¬¡æ‹–æ‹½</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> draggable = &#123;</span><br><span class="line">  inserted: <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</span><br><span class="line">    el.style.cursor = <span class="string">&#x27;move&#x27;</span></span><br><span class="line">    el.onmousedown = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> disx = e.pageX - el.offsetLeft</span><br><span class="line">      <span class="keyword">let</span> disy = e.pageY - el.offsetTop</span><br><span class="line">      <span class="built_in">document</span>.onmousemove = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> x = e.pageX - disx</span><br><span class="line">        <span class="keyword">let</span> y = e.pageY - disy</span><br><span class="line">        <span class="keyword">let</span> maxX = <span class="built_in">document</span>.body.clientWidth - <span class="built_in">parseInt</span>(<span class="built_in">window</span>.getComputedStyle(el).width)</span><br><span class="line">        <span class="keyword">let</span> maxY = <span class="built_in">document</span>.body.clientHeight - <span class="built_in">parseInt</span>(<span class="built_in">window</span>.getComputedStyle(el).height)</span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span>) &#123;</span><br><span class="line">          x = <span class="number">0</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x &gt; maxX) &#123;</span><br><span class="line">          x = maxX</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (y &lt; <span class="number">0</span>) &#123;</span><br><span class="line">          y = <span class="number">0</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (y &gt; maxY) &#123;</span><br><span class="line">          y = maxY</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        el.style.left = x + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">        el.style.top = y + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">document</span>.onmouseup = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">document</span>.onmousemove = <span class="built_in">document</span>.onmouseup = <span class="literal">null</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> draggable</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨: åœ¨ Dom ä¸ŠåŠ ä¸Š v-draggable å³å¯</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;el-dialog&quot;</span> <span class="attr">v-draggable</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vuejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äº”æ‹›è®©ä½ æˆä¸ºVue.jså¤§å¸ˆ</title>
      <link href="2020/12/11/vueMoves/"/>
      <url>2020/12/11/vueMoves/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å¯¹å¤§éƒ¨åˆ†äººæ¥è¯´, æŒæ¡Vue.jsåŸºæœ¬çš„å‡ ä¸ªAPIåå°±å·²ç»èƒ½å¤Ÿæ­£å¸¸åœ°å¼€å‘å‰ç«¯ç½‘ç«™ã€‚ä½†å¦‚æœä½ æƒ³æ›´åŠ é«˜æ•ˆåœ°ä½¿ç”¨Vueæ¥å¼€å‘, æˆä¸ºVue.jså¤§å¸ˆ, é‚£ä¸‹é¢çš„è¿™äº”æ‹›ä½ ä¸€å®šå¾—è®¤çœŸå­¦ä¹ ä¸€ä¸‹äº†ã€‚ </p></blockquote><h1 id="ç¬¬ä¸€æ‹›-åŒ–ç¹ä¸ºç®€çš„Watchers"><a href="#ç¬¬ä¸€æ‹›-åŒ–ç¹ä¸ºç®€çš„Watchers" class="headerlink" title="ç¬¬ä¸€æ‹›: åŒ–ç¹ä¸ºç®€çš„Watchers"></a>ç¬¬ä¸€æ‹›: åŒ–ç¹ä¸ºç®€çš„Watchers</h1><p>åœºæ™¯è¿˜åŸ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">created()&#123;</span><br><span class="line">    this.fetchPostList()</span><br><span class="line">&#125;,</span><br><span class="line">watch: &#123;</span><br><span class="line">    searchInputValue()&#123;</span><br><span class="line">        this.fetchPostList()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»„ä»¶åˆ›å»ºçš„æ—¶å€™æˆ‘ä»¬è·å–ä¸€æ¬¡åˆ—è¡¨, åŒæ—¶ç›‘å¬inputæ¡†, æ¯å½“å‘ç”Ÿå˜åŒ–çš„æ—¶å€™é‡æ–°è·å–ä¸€æ¬¡ç­›é€‰åçš„åˆ—è¡¨è¿™ä¸ªåœºæ™¯å¾ˆå¸¸è§, æœ‰æ²¡æœ‰åŠæ³•ä¼˜åŒ–ä¸€ä¸‹å‘¢ï¼Ÿ<br>æ‹›å¼è§£æ:<br>é¦–å…ˆ, åœ¨watchersä¸­, å¯ä»¥ç›´æ¥ä½¿ç”¨å‡½æ•°çš„å­—é¢é‡åç§°ï¼›å…¶æ¬¡, å£°æ˜immediate:trueè¡¨ç¤ºåˆ›å»ºç»„ä»¶æ—¶ç«‹é©¬æ‰§è¡Œä¸€æ¬¡ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">    searchInputValue:&#123;</span><br><span class="line">        handler: &#39;fetchPostList&#39;,</span><br><span class="line">        immediate: true</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç¬¬äºŒæ‹›-ä¸€åŠ³æ°¸é€¸çš„ç»„ä»¶æ³¨å†Œ"><a href="#ç¬¬äºŒæ‹›-ä¸€åŠ³æ°¸é€¸çš„ç»„ä»¶æ³¨å†Œ" class="headerlink" title="ç¬¬äºŒæ‹›: ä¸€åŠ³æ°¸é€¸çš„ç»„ä»¶æ³¨å†Œ"></a>ç¬¬äºŒæ‹›: ä¸€åŠ³æ°¸é€¸çš„ç»„ä»¶æ³¨å†Œ</h1><p>åœºæ™¯è¿˜åŸ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import BaseButton from &#39;.&#x2F;baseButton&#39;</span><br><span class="line">import BaseIcon from &#39;.&#x2F;baseIcon&#39;</span><br><span class="line">import BaseInput from &#39;.&#x2F;baseInput&#39;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    BaseButton,</span><br><span class="line">    BaseIcon,</span><br><span class="line">    BaseInput</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;BaseInput v-model&#x3D;&quot;searchText&quot; @keydown.enter&#x3D;&quot;search&quot;&#x2F;&gt;</span><br><span class="line">&lt;BaseButton @click&#x3D;&quot;search&quot;&gt;</span><br><span class="line">  &lt;BaseIcon name&#x3D;&quot;search&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;BaseButton&gt;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å†™äº†ä¸€å †åŸºç¡€UIç»„ä»¶, ç„¶åæ¯æ¬¡æˆ‘ä»¬éœ€è¦ä½¿ç”¨è¿™äº›ç»„ä»¶çš„æ—¶å€™, éƒ½å¾—å…ˆimport, ç„¶åå£°æ˜components, å¾ˆç¹çï¼ç§‰æŒèƒ½å·æ‡’å°±å·æ‡’çš„åŸåˆ™, æˆ‘ä»¬è¦æƒ³åŠæ³•ä¼˜åŒ–ï¼<br>æ‹›å¼è§£æ:<br>æˆ‘ä»¬éœ€è¦å€ŸåŠ©ä¸€ä¸‹ç¥å™¨webpack, ä½¿ç”¨ require.context() æ–¹æ³•æ¥åˆ›å»ºè‡ªå·±çš„ï¼ˆæ¨¡å—ï¼‰ä¸Šä¸‹æ–‡, ä»è€Œå®ç°è‡ªåŠ¨åŠ¨æ€requireç»„ä»¶ã€‚è¿™ä¸ªæ–¹æ³•éœ€è¦3ä¸ªå‚æ•°: è¦æœç´¢çš„æ–‡ä»¶å¤¹ç›®å½•, æ˜¯å¦è¿˜åº”è¯¥æœç´¢å®ƒçš„å­ç›®å½•, ä»¥åŠä¸€ä¸ªåŒ¹é…æ–‡ä»¶çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚<br>æˆ‘ä»¬åœ¨componentsæ–‡ä»¶å¤¹æ·»åŠ ä¸€ä¸ªå«global.jsçš„æ–‡ä»¶, åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œå€ŸåŠ©webpackåŠ¨æ€å°†éœ€è¦çš„åŸºç¡€ç»„ä»¶ç»Ÿç»Ÿæ‰“åŒ…è¿›æ¥ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#39;vue&#39;</span><br><span class="line"></span><br><span class="line">function capitalizeFirstLetter(string) &#123;</span><br><span class="line">  return string.charAt(0).toUpperCase() + string.slice(1)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const requireComponent &#x3D; require.context(</span><br><span class="line">  &#39;.&#39;, false, &#x2F;\.vue$&#x2F;</span><br><span class="line">   &#x2F;&#x2F; æ‰¾åˆ°componentsæ–‡ä»¶å¤¹ä¸‹ä»¥.vueå‘½åçš„æ–‡ä»¶</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">requireComponent.keys().forEach(fileName &#x3D;&gt; &#123;</span><br><span class="line">  const componentConfig &#x3D; requireComponent(fileName)</span><br><span class="line"></span><br><span class="line">  const componentName &#x3D; capitalizeFirstLetter(</span><br><span class="line">    fileName.replace(&#x2F;^\.\&#x2F;&#x2F;, &#39;&#39;).replace(&#x2F;\.\w+$&#x2F;, &#39;&#39;)</span><br><span class="line">    &#x2F;&#x2F; å› ä¸ºå¾—åˆ°çš„filenameæ ¼å¼æ˜¯: &#39;.&#x2F;baseButton.vue&#39;, æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å»æ‰å¤´å’Œå°¾, åªä¿ç•™çœŸæ­£çš„æ–‡ä»¶å</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  Vue.component(componentName, componentConfig.default || componentConfig)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æœ€åæˆ‘ä»¬åœ¨main.jsä¸­import â€˜components/global.jsâ€™, ç„¶åæˆ‘ä»¬å°±å¯ä»¥éšæ—¶éšåœ°ä½¿ç”¨è¿™äº›åŸºç¡€ç»„ä»¶, æ— éœ€æ‰‹åŠ¨å¼•å…¥äº†ã€‚</p><h1 id="ç¬¬ä¸‰æ‹›-é‡œåº•æŠ½è–ªçš„router-key"><a href="#ç¬¬ä¸‰æ‹›-é‡œåº•æŠ½è–ªçš„router-key" class="headerlink" title="ç¬¬ä¸‰æ‹›: é‡œåº•æŠ½è–ªçš„router key"></a>ç¬¬ä¸‰æ‹›: é‡œåº•æŠ½è–ªçš„router key</h1><p>åœºæ™¯è¿˜åŸ:<br>ä¸‹é¢è¿™ä¸ªåœºæ™¯çœŸçš„æ˜¯ä¼¤é€äº†å¾ˆå¤šç¨‹åºå‘˜çš„å¿ƒâ€¦å…ˆé»˜è®¤å¤§å®¶ç”¨çš„æ˜¯Vue-routeræ¥å®ç°è·¯ç”±çš„æ§åˆ¶ã€‚<br>å‡è®¾æˆ‘ä»¬åœ¨å†™ä¸€ä¸ªåšå®¢ç½‘ç«™, éœ€æ±‚æ˜¯ä»/post-page/a, è·³è½¬åˆ°/post-page/bã€‚ç„¶åæˆ‘ä»¬æƒŠäººçš„å‘ç°, é¡µé¢è·³è½¬åæ•°æ®ç«Ÿç„¶æ²¡æ›´æ–°ï¼Ÿï¼åŸå› æ˜¯vue-routerâ€æ™ºèƒ½åœ°â€å‘ç°è¿™æ˜¯åŒä¸€ä¸ªç»„ä»¶, ç„¶åå®ƒå°±å†³å®šè¦å¤ç”¨è¿™ä¸ªç»„ä»¶, æ‰€ä»¥ä½ åœ¨createdå‡½æ•°é‡Œå†™çš„æ–¹æ³•å‹æ ¹å°±æ²¡æ‰§è¡Œã€‚é€šå¸¸çš„è§£å†³æ–¹æ¡ˆæ˜¯ç›‘å¬routeçš„å˜åŒ–æ¥åˆå§‹åŒ–æ•°æ®, å¦‚ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    loading: false,</span><br><span class="line">    error: null,</span><br><span class="line">    post: null</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, </span><br><span class="line">watch: &#123;</span><br><span class="line">  &#39;$route&#39;: &#123;</span><br><span class="line">    handler: &#39;resetData&#39;,</span><br><span class="line">    immediate: true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">  resetData() &#123;</span><br><span class="line">    this.loading &#x3D; false</span><br><span class="line">    this.error &#x3D; null</span><br><span class="line">    this.post &#x3D; null</span><br><span class="line">    this.getPost(this.$route.params.id)</span><br><span class="line">  &#125;,</span><br><span class="line">  getPost(id)&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>bugæ˜¯è§£å†³äº†, å¯æ¯æ¬¡è¿™ä¹ˆå†™ä¹Ÿå¤ªä¸ä¼˜é›…äº†å§ï¼Ÿç§‰æŒç€èƒ½å·æ‡’åˆ™å·æ‡’çš„åŸåˆ™, æˆ‘ä»¬å¸Œæœ›ä»£ç è¿™æ ·å†™:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    loading: false,</span><br><span class="line">    error: null,</span><br><span class="line">    post: null</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">created () &#123;</span><br><span class="line">  this.getPost(this.$route.params.id)</span><br><span class="line">&#125;,</span><br><span class="line">methods () &#123;</span><br><span class="line">  getPost(postId) &#123;</span><br><span class="line">    &#x2F;&#x2F; ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‹›å¼è§£æ:<br>é‚£è¦æ€ä¹ˆæ ·æ‰èƒ½å®ç°è¿™æ ·çš„æ•ˆæœå‘¢, ç­”æ¡ˆæ˜¯ç»™router-viewæ·»åŠ ä¸€ä¸ªuniqueçš„key, è¿™æ ·å³ä½¿æ˜¯å…¬ç”¨ç»„ä»¶, åªè¦urlå˜åŒ–äº†, å°±ä¸€å®šä¼šé‡æ–°åˆ›å»ºè¿™ä¸ªç»„ä»¶ã€‚ï¼ˆè™½ç„¶æŸå¤±äº†ä¸€ä¸¢ä¸¢æ€§èƒ½, ä½†é¿å…äº†æ— é™çš„bugï¼‰ã€‚åŒæ—¶, æ³¨æ„æˆ‘å°†keyç›´æ¥è®¾ç½®ä¸ºè·¯ç”±çš„å®Œæ•´è·¯å¾„, ä¸€ä¸¾ä¸¤å¾—ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-view :key&#x3D;&quot;$route.fullpath&quot;&gt;&lt;&#x2F;router-view&gt;</span><br></pre></td></tr></table></figure><h1 id="ç¬¬å››æ‹›-æ— æ‰€ä¸èƒ½çš„renderå‡½æ•°"><a href="#ç¬¬å››æ‹›-æ— æ‰€ä¸èƒ½çš„renderå‡½æ•°" class="headerlink" title="ç¬¬å››æ‹›: æ— æ‰€ä¸èƒ½çš„renderå‡½æ•°"></a>ç¬¬å››æ‹›: æ— æ‰€ä¸èƒ½çš„renderå‡½æ•°</h1><p>åœºæ™¯è¿˜åŸ:<br>vueè¦æ±‚æ¯ä¸€ä¸ªç»„ä»¶éƒ½åªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´ , å½“ä½ æœ‰å¤šä¸ªæ ¹å…ƒç´ æ—¶, vueå°±ä¼šç»™ä½ æŠ¥é”™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;li v-for&#x3D;&quot;route in routes&quot; :key&#x3D;&quot;route.name&quot;&gt;</span><br><span class="line">    &lt;router-link :to&#x3D;&quot;route&quot;&gt;</span><br><span class="line">      &#123;&#123; route.title &#125;&#125;</span><br><span class="line">    &lt;&#x2F;router-link&gt;</span><br><span class="line">  &lt;&#x2F;li&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> ERROR - Component template should contain exactly one root element. </span><br><span class="line">    If you are using v-if on multiple elements, use v-else-if </span><br><span class="line">    to chain them instead.</span><br></pre></td></tr></table></figure><p>æ‹›å¼è§£æ:<br>é‚£æœ‰æ²¡æœ‰åŠæ³•åŒ–è§£å‘¢, ç­”æ¡ˆæ˜¯æœ‰çš„, åªä¸è¿‡è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ä½¿ç”¨render()å‡½æ•°æ¥åˆ›å»ºHTML, è€Œä¸æ˜¯templateã€‚å…¶å®ç”¨jsæ¥ç”Ÿæˆhtmlçš„å¥½å¤„å°±æ˜¯æåº¦çš„çµæ´»åŠŸèƒ½å¼ºå¤§, è€Œä¸”ä½ ä¸éœ€è¦å»å­¦ä¹ ä½¿ç”¨vueçš„é‚£äº›åŠŸèƒ½æœ‰é™çš„æŒ‡ä»¤API, æ¯”å¦‚v-for, v-ifã€‚ï¼ˆreactjså°±å®Œå…¨ä¸¢å¼ƒäº†templateï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">functional: true,</span><br><span class="line">render(h, &#123; props &#125;) &#123;</span><br><span class="line">  return props.routes.map(route &#x3D;&gt;</span><br><span class="line">    &lt;li key&#x3D;&#123;route.name&#125;&gt;</span><br><span class="line">      &lt;router-link to&#x3D;&#123;route&#125;&gt;</span><br><span class="line">        &#123;route.title&#125;</span><br><span class="line">      &lt;&#x2F;router-link&gt;</span><br><span class="line">    &lt;&#x2F;li&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç¬¬äº”æ‹›-æ— æ‹›èƒœæœ‰æ‹›çš„é«˜é˜¶ç»„ä»¶"><a href="#ç¬¬äº”æ‹›-æ— æ‹›èƒœæœ‰æ‹›çš„é«˜é˜¶ç»„ä»¶" class="headerlink" title="ç¬¬äº”æ‹›: æ— æ‹›èƒœæœ‰æ‹›çš„é«˜é˜¶ç»„ä»¶"></a>ç¬¬äº”æ‹›: æ— æ‹›èƒœæœ‰æ‹›çš„é«˜é˜¶ç»„ä»¶</h1><p>åˆ’é‡ç‚¹: è¿™ä¸€æ‹›å¨åŠ›æ— ç©·, è¯·åŠ¡å¿…æŒæ¡<br>å½“æˆ‘ä»¬å†™ç»„ä»¶çš„æ—¶å€™, é€šå¸¸æˆ‘ä»¬éƒ½éœ€è¦ä»çˆ¶ç»„ä»¶ä¼ é€’ä¸€ç³»åˆ—çš„propsåˆ°å­ç»„ä»¶, åŒæ—¶çˆ¶ç»„ä»¶ç›‘å¬å­ç»„ä»¶emitè¿‡æ¥çš„ä¸€ç³»åˆ—äº‹ä»¶ã€‚ä¸¾ä¾‹å­:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;çˆ¶ç»„ä»¶</span><br><span class="line">&lt;BaseInput </span><br><span class="line">    :value&#x3D;&quot;value&quot;</span><br><span class="line">    label&#x3D;&quot;å¯†ç &quot; </span><br><span class="line">    placeholder&#x3D;&quot;è¯·å¡«å†™å¯†ç &quot;</span><br><span class="line">    @input&#x3D;&quot;handleInput&quot;</span><br><span class="line">    @focus&#x3D;&quot;handleFocus&gt;</span><br><span class="line">&lt;&#x2F;BaseInput&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;å­ç»„ä»¶</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;label&gt;</span><br><span class="line">    &#123;&#123; label &#125;&#125;</span><br><span class="line">    &lt;input</span><br><span class="line">      :value&#x3D;&quot;value&quot;</span><br><span class="line">      :placeholder&#x3D;&quot;placeholder&quot;</span><br><span class="line">      @focus&#x3D;$emit(&#39;focus&#39;, $event)&quot;</span><br><span class="line">      @input&#x3D;&quot;$emit(&#39;input&#39;, $event.target.value)&quot;</span><br><span class="line">    &gt;</span><br><span class="line">  &lt;&#x2F;label&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure><p>æœ‰ä¸‹é¢å‡ ä¸ªä¼˜åŒ–ç‚¹:</p><ul><li><p>æ¯ä¸€ä¸ªä»çˆ¶ç»„ä»¶ä¼ åˆ°å­ç»„ä»¶çš„props, æˆ‘ä»¬éƒ½å¾—åœ¨å­ç»„ä»¶çš„Propsä¸­æ˜¾å¼çš„å£°æ˜æ‰èƒ½ä½¿ç”¨ã€‚è¿™æ ·ä¸€æ¥, æˆ‘ä»¬çš„å­ç»„ä»¶æ¯æ¬¡éƒ½éœ€è¦ç”³æ˜ä¸€å¤§å †props, è€Œç±»ä¼¼placeholerè¿™ç§domåŸç”Ÿçš„propertyæˆ‘ä»¬å…¶å®å®Œå…¨å¯ä»¥ç›´æ¥ä»çˆ¶ä¼ åˆ°å­, æ— éœ€å£°æ˜ã€‚æ–¹æ³•å¦‚ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">      :value&#x3D;&quot;value&quot;</span><br><span class="line">      v-bind&#x3D;&quot;$attrs&quot;</span><br><span class="line">      @input&#x3D;&quot;$emit(&#39;input&#39;, $event.target.value)&quot;</span><br><span class="line">    &gt;</span><br></pre></td></tr></table></figure><p>$attrsåŒ…å«äº†çˆ¶ä½œç”¨åŸŸä¸­ä¸ä½œä¸º prop è¢«è¯†åˆ« (ä¸”è·å–) çš„ç‰¹æ€§ç»‘å®š (class å’Œ style é™¤å¤–)ã€‚å½“ä¸€ä¸ªç»„ä»¶æ²¡æœ‰å£°æ˜ä»»ä½• prop æ—¶, è¿™é‡Œä¼šåŒ…å«æ‰€æœ‰çˆ¶ä½œç”¨åŸŸçš„ç»‘å®š, å¹¶ä¸”å¯ä»¥é€šè¿‡ v-bind=â€$attrsâ€ ä¼ å…¥å†…éƒ¨ç»„ä»¶â€”â€”åœ¨åˆ›å»ºæ›´é«˜å±‚æ¬¡çš„ç»„ä»¶æ—¶éå¸¸æœ‰ç”¨ã€‚</p></li><li><p>æ³¨æ„åˆ°å­ç»„ä»¶çš„@focus=$emit(â€˜focusâ€™, $event)â€å…¶å®ä»€ä¹ˆéƒ½æ²¡åš, åªæ˜¯æŠŠeventä¼ å›ç»™çˆ¶ç»„ä»¶è€Œå·², é‚£å…¶å®å’Œä¸Šé¢ç±»ä¼¼, æˆ‘å®Œå…¨æ²¡å¿…è¦æ˜¾å¼åœ°ç”³æ˜:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;input :value&#x3D;&quot;value&quot; v-bind&#x3D;&quot;$attrs&quot; v-on&#x3D;&quot;listeners&quot;&gt;</span><br><span class="line"></span><br><span class="line">computed: &#123;</span><br><span class="line">  listeners() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      ...this.$listeners,</span><br><span class="line">      input: event &#x3D;&gt; </span><br><span class="line">        this.$emit(&#39;input&#39;, event.target.value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>$listenersåŒ…å«äº†çˆ¶ä½œç”¨åŸŸä¸­çš„ (ä¸å« .native ä¿®é¥°å™¨çš„) v-on äº‹ä»¶ç›‘å¬å™¨ã€‚å®ƒå¯ä»¥é€šè¿‡ v-on=â€$listenersâ€ ä¼ å…¥å†…éƒ¨ç»„ä»¶â€”â€”åœ¨åˆ›å»ºæ›´é«˜å±‚æ¬¡çš„ç»„ä»¶æ—¶éå¸¸æœ‰ç”¨ã€‚</p></li><li><p>éœ€è¦æ³¨æ„çš„æ˜¯, ç”±äºæˆ‘ä»¬inputå¹¶ä¸æ˜¯BaseInputè¿™ä¸ªç»„ä»¶çš„æ ¹èŠ‚ç‚¹, è€Œé»˜è®¤æƒ…å†µä¸‹çˆ¶ä½œç”¨åŸŸçš„ä¸è¢«è®¤ä½œ props çš„ç‰¹æ€§ç»‘å®šå°†ä¼šâ€œå›é€€â€ä¸”ä½œä¸ºæ™®é€šçš„ HTML ç‰¹æ€§åº”ç”¨åœ¨å­ç»„ä»¶çš„æ ¹å…ƒç´ ä¸Šã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦è®¾ç½®inheritAttrs:false, è¿™äº›é»˜è®¤è¡Œä¸ºå°†ä¼šè¢«å»æ‰, ä»¥ä¸Šä¸¤ç‚¹çš„ä¼˜åŒ–æ‰èƒ½æˆåŠŸã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vuejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªåŠ¨é€‚é… 2xã€3x èƒŒæ™¯å›¾</title>
      <link href="2020/11/26/2x3x/"/>
      <url>2020/11/26/2x3x/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><ul><li><code>DPI</code>: dots per inch, è¡¨ç¤ºä¸€è‹±å¯¸å¤šå°‘ä¸ªåƒç´ ç‚¹, æˆ‘ä¸€èˆ¬ç§°ä½œåƒç´ å¯†åº¦ï¼Œç®€ç§°å¯†åº¦</li><li><code>åˆ†è¾¨ç‡</code>: æ¨ªçºµ2ä¸ªæ–¹å‘çš„åƒç´ ç‚¹çš„æ•°é‡</li></ul><blockquote><p>è¿™ä¸ªä¸–ç•Œä¸Šå­˜åœ¨ç€å¾ˆå¤šä¸åŒå±å¹•å¯†åº¦çš„æ‰‹æœºï¼Œå±å¹•å¯†åº¦æ˜¯ä»€ä¹ˆï¼Ÿå°±æ˜¯dpiï¼Œå°±æ˜¯å•ä½é•¿åº¦é‡Œçš„åƒç´ æ•°é‡, æƒ³è±¡ä¸€ä¸‹å¦‚æœè¿™äº›æ‰‹æœºçš„å°ºå¯¸ä¸€æ ·, å±å¹•å¯†åº¦ç›¸å·®å¾ˆå¤§, é‚£ä¹ˆæ˜¯ä¸æ˜¯è¯´ä¸€ä¸ªæ‰‹æœºæ°´å¹³æ–¹å‘ä¸Šåƒç´ å¾ˆå°‘ï¼Œå¦ä¸€ä¸ªæ‰‹æœºæ°´å¹³æ–¹å‘ä¸Šåƒç´ å¾ˆå¤šï¼Ÿ</p></blockquote><p>æ‰€ä»¥ç»å¸¸ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µ: åŒæ ·ä¸€å¼ èƒŒæ™¯å›¾, åˆ†åˆ«åœ¨è®¾å¤‡å°ºå¯¸ä¸€æ ·çš„å®‰å“è®¾å¤‡å’Œiosè®¾å¤‡ä¸­è¡¨ç°ä¸ä¸€è‡´ï¼Œä¸€ä¸ªç¨å¾®æ¨¡ç³Šï¼Œä¸€ä¸ªæ¯”è¾ƒæ¸…æ™°ï¼Œå¤§å°éƒ½ä¸€æ ·, è¿™å°±æ˜¯å› ä¸ºDPIä¸ä¸€æ ·, ä¹Ÿå°±æ˜¯æ¸²æŸ“å›¾ç‰‡çš„åƒç´ ç‚¹ä¸ä¸€æ ·æ‰€å¯¼è‡´ã€‚</p><h2 id="å…¼å®¹æ€è·¯"><a href="#å…¼å®¹æ€è·¯" class="headerlink" title="å…¼å®¹æ€è·¯"></a>å…¼å®¹æ€è·¯</h2><p>åŸºäºè¿™ç§æƒ…å†µ, å°±å‡ºç°äº† <code>2å€</code>ã€<code>3å€</code> å°ºå¯¸å›¾çš„æ¦‚å¿µ, ç®€å•æ¥è¯´, æˆ‘ä»¬åœ¨ <code>1å€DPI</code>, <code>2å€DPI</code> çš„å±å¹•è®¾å¤‡ä¸Šï¼Œä½¿ç”¨ <code>2å€å°ºå¯¸çš„å›¾ç‰‡</code>, <code>3å€</code> DPI å±å¹•è®¾å¤‡ä¸Šä½¿ç”¨ <code>3å€å°ºå¯¸çš„å›¾ç‰‡</code>, ä½¿å›¾ç‰‡å§‹ç»ˆä¿æŒé«˜æ¸…, é€šå¸¸ <code>2å€å°ºå¯¸çš„å›¾ç‰‡</code>å’Œ<code>3å€å°ºå¯¸çš„å›¾ç‰‡</code>è¢«ç§°ä¸º <code>2x</code> å›¾ <code>3x</code> å›¾</p><blockquote><p>ä¸ºä»€ä¹ˆ1å€DPIä¹Ÿä½¿ç”¨2xå›¾ç‰‡ï¼Ÿ</p></blockquote><p>å› ä¸ºå›¾ç‰‡ç¼©å°ä¸ä¼šæ¨¡ç³Š</p><blockquote><p>æ—¢ç„¶ç¼©å°ä¸ä¼šæ¨¡ç³Šï¼Œé‚£ä¸ºä»€ä¹ˆä¸å…¨éƒ¨ä½¿ç”¨3xå›¾ç‰‡ï¼Ÿ</p></blockquote><p>ä¸ºäº†æé«˜æ€§èƒ½, å¦‚æœå›¾ç‰‡å…¨éƒ¨ä½¿ç”¨3xå›¾, æé«˜äº†æ‰‹æœºæµé‡çš„æ¶ˆè€—, è€Œä¸”é¡µé¢åŠ è½½é€Ÿåº¦ä¹Ÿä¼šå¤§æ‰“æŠ˜æ‰£</p><h2 id="å®ç°æ–¹æ³•"><a href="#å®ç°æ–¹æ³•" class="headerlink" title="å®ç°æ–¹æ³•"></a>å®ç°æ–¹æ³•</h2><ul><li>é¦–å…ˆä¿è¯ä¸¤å¥—å›¾ç‰‡å‘½åæ˜¯ç”± <code>@2x.png</code>ã€ <code>@3x.png</code>ç»“å°¾, åŒä¸€å¼ å›¾, ä¸¤å¥—å‘½åä¸€è‡´, åç¼€é™¤å¤–, å¦‚ä¸‹å›¾:</li></ul><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228154040.jpeg"></p><ul><li><p>ä½¿ç”¨ <code>less</code> å†™ä¸€ä¸ªé€šç”¨çš„å‡½æ•°, é€šè¿‡ <code>åª’ä½“æŸ¥è¯¢</code> é€‰æ‹©å¯¹åº”çš„å›¾ç‰‡</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bg-image</span>(<span class="variable">@picname</span>) &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: url(<span class="string">&quot;../images/@&#123;picname&#125;@2x.png&quot;</span>);</span><br><span class="line">  <span class="keyword">@media</span> (<span class="attribute">-webkit-min-device-pixel-ratio</span>: <span class="number">3</span>),(<span class="attribute">min-device-pixel-ratio</span>: <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: url(<span class="string">&quot;../images/@&#123;picname&#125;@3x.png&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨æ—¶è°ƒç”¨è¯¥å‡½æ•°</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">    <span class="selector-class">.bg-image</span>(<span class="string">&#x27;clied&#x27;</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>æ•ˆæœå›¾</p></li></ul><p>2å€å¯†åº¦çš„æ‰‹æœº, åº”ç”¨2å€çš„å›¾ç‰‡</p><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228154041.jpeg"></p><p>åˆ‡æ¢3å€å¯†åº¦çš„æ‰‹æœº, è‡ªåŠ¨æ›´æ¢æˆ3å€å›¾ç‰‡</p><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228154044.jpeg"></p><h2 id="å‹ç¼©å›¾ç‰‡ï¼ˆå½©è›‹ï¼‰"><a href="#å‹ç¼©å›¾ç‰‡ï¼ˆå½©è›‹ï¼‰" class="headerlink" title="å‹ç¼©å›¾ç‰‡ï¼ˆå½©è›‹ï¼‰"></a>å‹ç¼©å›¾ç‰‡ï¼ˆå½©è›‹ï¼‰</h2><p>ç¨å¤§äº›çš„å›¾ç‰‡é€šå¸¸éƒ½éœ€è¦é€šè¿‡<code>æ— æŸå‹ç¼©</code>æ¥æé«˜æ€§èƒ½ä½“éªŒ; å‹ç¼©å›¾ç‰‡çš„å·¥å…·æœ‰å¾ˆå¤š, ä½†æ˜¯å¤šå¤šå°‘å°‘éƒ½ä¼šæœ‰äº›ç¼ºé™·, æ¨èä¸€ä¸ªç½‘ç«™çº¿ä¸Šå‹ç¼©: <a href="https://tinypng.com/">https://tinypng.com</a></p><p><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228154043.jpeg"></p>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html 5 </tag>
            
            <tag> CSS 3 </tag>
            
            <tag> Less </tag>
            
            <tag> å…¼å®¹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦™ç”¨ç¬”è®°ï¼ŒJSä¸­çš„éªšæ“ä½œ</title>
      <link href="2020/11/26/jsskill/"/>
      <url>2020/11/26/jsskill/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨-åˆ‡æ¢å˜é‡-1ã€0"><a href="#ä½¿ç”¨-åˆ‡æ¢å˜é‡-1ã€0" class="headerlink" title="ä½¿ç”¨ ^ åˆ‡æ¢å˜é‡ 1ã€0"></a>ä½¿ç”¨ <code>^</code> åˆ‡æ¢å˜é‡ 1ã€0</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> toggle;</span><br><span class="line"><span class="comment">// 0 ~ 1 ä¹‹é—´æ¥å›åˆ‡æ¢, æ¯æ‰§è¡Œä¸€æ¬¡å³å˜åŒ–ä¸€æ¬¡</span></span><br><span class="line">toggle ^= <span class="number">1</span>;  <span class="comment">// 1</span></span><br><span class="line">toggle ^= <span class="number">1</span>;  <span class="comment">// 0</span></span><br><span class="line">toggle ^= <span class="number">1</span>;  <span class="comment">// 1</span></span><br><span class="line">toggle ^= <span class="number">1</span>;  <span class="comment">// 0</span></span><br><span class="line">toggle ^= <span class="number">1</span>;  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-è½¬ä¸ºå¸ƒå°”å€¼"><a href="#ä½¿ç”¨-è½¬ä¸ºå¸ƒå°”å€¼" class="headerlink" title="ä½¿ç”¨ !! è½¬ä¸ºå¸ƒå°”å€¼"></a>ä½¿ç”¨ <code>!!</code> è½¬ä¸ºå¸ƒå°”å€¼</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(!!<span class="number">7</span>);         <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(!!-<span class="number">1</span>);        <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(!!<span class="number">0.71</span>);      <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(!!<span class="string">&#x27;str&#x27;</span>);     <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(!!<span class="string">&#x27;0&#x27;</span>);       <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(!![]);        <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(!!&#123;&#125;);        <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(!!<span class="number">0</span>);         <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(!!<span class="string">&#x27;&#x27;</span>);        <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(!!<span class="literal">null</span>);      <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(!!<span class="literal">undefined</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ !0, !1 æ›¿ä»£ trueã€false</span></span><br><span class="line"><span class="built_in">console</span>.log(!<span class="number">0</span>)           <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(!<span class="number">1</span>)           <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-amp-1-åˆ¤æ–­å¥‡å¶æ•°"><a href="#ä½¿ç”¨-amp-1-åˆ¤æ–­å¥‡å¶æ•°" class="headerlink" title="ä½¿ç”¨Â &amp;Â 1 åˆ¤æ–­å¥‡å¶æ•°"></a>ä½¿ç”¨Â <code>&amp;Â 1</code> åˆ¤æ–­å¥‡å¶æ•°</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &amp; ç¬¦å·å·¦è¾¹ä¸ºéœ€è¦åˆ¤æ–­å¥‡å¶æ•°çš„æ•°å€¼, å³è¾¹å›ºå®šä¸º 1</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span> &amp; <span class="number">1</span>);   <span class="comment">// è¿”å›å€¼ä¸º 1, åˆ™ä¸ºå¥‡æ•°</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">3</span> &amp; <span class="number">1</span>);   <span class="comment">// è¿”å›å€¼ä¸º 1, åˆ™ä¸ºå¥‡æ•°</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">5</span> &amp; <span class="number">1</span>);   <span class="comment">// è¿”å›å€¼ä¸º 1, åˆ™ä¸ºå¥‡æ•°</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">7</span> &amp; <span class="number">1</span>);   <span class="comment">// è¿”å›å€¼ä¸º 1, åˆ™ä¸ºå¥‡æ•°</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">9</span> &amp; <span class="number">1</span>);   <span class="comment">// è¿”å›å€¼ä¸º 1, åˆ™ä¸ºå¥‡æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span> &amp; <span class="number">1</span>);   <span class="comment">// è¿”å›å€¼ä¸º 0, åˆ™ä¸ºå¶æ•°</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">4</span> &amp; <span class="number">1</span>);   <span class="comment">// è¿”å›å€¼ä¸º 0, åˆ™ä¸ºå¶æ•°</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">6</span> &amp; <span class="number">1</span>) ;  <span class="comment">// è¿”å›å€¼ä¸º 0, åˆ™ä¸ºå¶æ•°</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">8</span> &amp; <span class="number">1</span>) ;  <span class="comment">// è¿”å›å€¼ä¸º 0, åˆ™ä¸ºå¶æ•°</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">10</span> &amp; <span class="number">1</span>) ; <span class="comment">// è¿”å›å€¼ä¸º 0, åˆ™ä¸ºå¶æ•°</span></span><br></pre></td></tr></table></figure><h1 id="ä½¿-gt-gt-0-lt-lt-0-0-å–æ•´"><a href="#ä½¿-gt-gt-0-lt-lt-0-0-å–æ•´" class="headerlink" title="ä½¿ ~~, &gt;&gt;0, &lt;&lt;0, |0 å–æ•´"></a>ä½¿ <code>~~</code>, <code>&gt;&gt;0</code>, <code>&lt;&lt;0</code>, <code>|0</code> å–æ•´</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ~~ å•ç›®æ“ä½œç¬¦</span></span><br><span class="line"><span class="built_in">console</span>.log(~~<span class="number">11.71</span>);         <span class="comment">// 11</span></span><br><span class="line"><span class="built_in">console</span>.log(~~-<span class="number">11.71</span>);        <span class="comment">// -11</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &gt;&gt;ã€&lt;&lt;ã€| , è¡¨ç°ä¸€è‡´, è¿ç®—ç¬¦å·¦è¾¹ä¸ºéœ€è¦å–æ•´çš„æ•°å€¼, å³è¾¹å›ºå®šä¸º 0 </span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">11.71</span> &gt;&gt; <span class="number">0</span>);      <span class="comment">// 11</span></span><br><span class="line"><span class="built_in">console</span>.log(-<span class="number">11.71</span> &gt;&gt; <span class="number">0</span>);     <span class="comment">// -11</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">11.71</span> &lt;&lt; <span class="number">0</span>);      <span class="comment">// 11</span></span><br><span class="line"><span class="built_in">console</span>.log(-<span class="number">11.71</span> &lt;&lt; <span class="number">0</span>);     <span class="comment">// -11</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">11.71</span> | <span class="number">0</span>);       <span class="comment">// 11</span></span><br><span class="line"><span class="built_in">console</span>.log(-<span class="number">11.71</span> | <span class="number">0</span>);      <span class="comment">// -11</span></span><br></pre></td></tr></table></figure><h1 id="åˆ¤æ–­æ•°å€¼æ˜¯å¦éƒ½æ˜¯æ­£æ•°æˆ–è€…éƒ½æ˜¯è´Ÿæ•°"><a href="#åˆ¤æ–­æ•°å€¼æ˜¯å¦éƒ½æ˜¯æ­£æ•°æˆ–è€…éƒ½æ˜¯è´Ÿæ•°" class="headerlink" title="åˆ¤æ–­æ•°å€¼æ˜¯å¦éƒ½æ˜¯æ­£æ•°æˆ–è€…éƒ½æ˜¯è´Ÿæ•°"></a>åˆ¤æ–­æ•°å€¼æ˜¯å¦<code>éƒ½æ˜¯æ­£æ•°</code>æˆ–è€…<code>éƒ½æ˜¯è´Ÿæ•°</code></h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§£æ„èµ‹å€¼, x = 1, y = 2, åˆ¤æ–­è¡¨è¾¾å¼å›ºå®šå†™æ³• (æ•°å€¼1 ^ æ•°å€¼2) &gt;= 0</span></span><br><span class="line"><span class="keyword">let</span> [x, y] = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">(x ^ y) &gt;= <span class="number">0</span>; <span class="comment">// åŒä¸ºæ­£æ•°è¿”å› true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x, y] = [-<span class="number">1</span>, -<span class="number">2</span>];</span><br><span class="line">(x ^ y) &gt;= <span class="number">0</span>; <span class="comment">// åŒä¸ºè´Ÿæ•°è¿”å› true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x, y] = [<span class="number">1</span>, -<span class="number">2</span>];</span><br><span class="line">(x ^ y) &gt;= <span class="number">0</span>; <span class="comment">// ä¸€ä¸ªæ­£æ•°,ä¸€ä¸ªè´Ÿæ•°è¿”å› false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x, y] = [-<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">(x ^ y) &gt;= <span class="number">0</span>; <span class="comment">// ä¸€ä¸ªè´Ÿæ•°,ä¸€ä¸ªæ­£æ•°è¿”å› false</span></span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-1-0-æ¥æ›¿ä»£-Infinity"><a href="#ä½¿ç”¨-1-0-æ¥æ›¿ä»£-Infinity" class="headerlink" title="ä½¿ç”¨Â 1/0Â æ¥æ›¿ä»£Â Infinity"></a>ä½¿ç”¨Â <code>1/0</code>Â æ¥æ›¿ä»£Â Infinity</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>/<span class="number">0</span>)        <span class="comment">// Infinty</span></span><br><span class="line"><span class="built_in">console</span>.log(-<span class="number">1</span>/<span class="number">0</span>)       <span class="comment">// -Infinty</span></span><br></pre></td></tr></table></figure><h1 id="n-amp-n-1-å¦‚æœè¿”å›-0-è¯´æ˜-n-æ˜¯-2-çš„æ•´æ•°å¹‚"><a href="#n-amp-n-1-å¦‚æœè¿”å›-0-è¯´æ˜-n-æ˜¯-2-çš„æ•´æ•°å¹‚" class="headerlink" title="n &amp; (n - 1), å¦‚æœè¿”å› 0, è¯´æ˜ n æ˜¯ 2 çš„æ•´æ•°å¹‚"></a><code>n &amp; (n - 1)</code>, å¦‚æœè¿”å› 0, è¯´æ˜ n æ˜¯ 2 çš„æ•´æ•°å¹‚</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span> &amp; (<span class="number">2</span> - <span class="number">1</span>))    <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">4</span> &amp; (<span class="number">4</span> - <span class="number">1</span>))    <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">8</span> &amp; (<span class="number">8</span> - <span class="number">1</span>))    <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">16</span> &amp; (<span class="number">16</span> - <span class="number">1</span>))  <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„: n åº”è¯¥ä¸ºå¤§äºç­‰äº 2 çš„æ­£æ•´æ•°, ä»¥ä¸‹æƒ…å†µä¸å¯å–</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span> &amp; (<span class="number">1</span> - <span class="number">1</span>))</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">0</span> &amp; (<span class="number">0</span> - <span class="number">1</span>))</span><br><span class="line"><span class="built_in">console</span>.log(-<span class="number">16</span> &amp; (-<span class="number">16</span> - <span class="number">1</span>))</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2.7</span> &amp; (<span class="number">2.7</span> - <span class="number">1</span>))</span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-n-0-5-0-å››èˆäº”å…¥"><a href="#ä½¿ç”¨-n-0-5-0-å››èˆäº”å…¥" class="headerlink" title="ä½¿ç”¨ n + 0.5 | 0 å››èˆäº”å…¥"></a>ä½¿ç”¨ <code>n + 0.5 | 0</code> å››èˆäº”å…¥</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">2.4</span> + <span class="number">0.5</span> | <span class="number">0</span>)    <span class="comment">// 2</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2.5</span> + <span class="number">0.5</span> | <span class="number">0</span>)    <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæ˜¯è´Ÿæ•°ï¼Œåªéœ€è¦ - 0.5</span></span><br><span class="line"><span class="built_in">console</span>.log(-<span class="number">2.7</span> - <span class="number">0.5</span> | <span class="number">0</span>)   <span class="comment">// -3</span></span><br></pre></td></tr></table></figure><h1 id="ä¸€äº›å¯ä»¥æ›¿ä»£-undefined-çš„æ“ä½œ"><a href="#ä¸€äº›å¯ä»¥æ›¿ä»£-undefined-çš„æ“ä½œ" class="headerlink" title="ä¸€äº›å¯ä»¥æ›¿ä»£ undefined çš„æ“ä½œ"></a>ä¸€äº›å¯ä»¥æ›¿ä»£ <code>undefined</code> çš„æ“ä½œ</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&#x27;&#x27;</span>._;     <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">1.</span>._;     <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">let</span> c = <span class="number">0</span>[<span class="number">0</span>];     <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">let</span> d = <span class="keyword">void</span> <span class="number">0</span>;   <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line">a === b &amp;&amp; b === c &amp;&amp; c === d &amp;&amp; d === a &amp;&amp; a === <span class="literal">undefined</span>   <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-Array-length-0-æ¥æ¸…ç©ºæ•°ç»„"><a href="#ä½¿ç”¨-Array-length-0-æ¥æ¸…ç©ºæ•°ç»„" class="headerlink" title="ä½¿ç”¨ Array.length = 0 æ¥æ¸…ç©ºæ•°ç»„"></a>ä½¿ç”¨ <code>Array.length = 0</code> æ¥æ¸…ç©ºæ•°ç»„</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">arr.length = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr)  <span class="comment">// []</span></span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-amp-gt-gt-æ¥å®Œæˆrgbå€¼å’Œ16è¿›åˆ¶é¢œè‰²å€¼ä¹‹é—´çš„è½¬æ¢"><a href="#ä½¿ç”¨-amp-gt-gt-æ¥å®Œæˆrgbå€¼å’Œ16è¿›åˆ¶é¢œè‰²å€¼ä¹‹é—´çš„è½¬æ¢" class="headerlink" title="ä½¿ç”¨ &amp;, &gt;&gt;,| æ¥å®Œæˆrgbå€¼å’Œ16è¿›åˆ¶é¢œè‰²å€¼ä¹‹é—´çš„è½¬æ¢"></a>ä½¿ç”¨ <code>&amp;</code>, <code>&gt;&gt;</code>,<code>|</code> æ¥å®Œæˆrgbå€¼å’Œ16è¿›åˆ¶é¢œè‰²å€¼ä¹‹é—´çš„è½¬æ¢</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 16è¿›åˆ¶é¢œè‰²å€¼è½¬RGB</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param  <span class="type">&#123;String&#125;</span> </span>hex 16è¿›åˆ¶é¢œè‰²å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;String&#125;</span>     </span>RGBé¢œè‰²å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">hexToRGB</span>(<span class="params">hex</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> hexx = hex.replace(<span class="string">&#x27;#&#x27;</span>, <span class="string">&#x27;0x&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> r = hexx &gt;&gt; <span class="number">16</span></span><br><span class="line">    <span class="keyword">const</span> g = hexx &gt;&gt; <span class="number">8</span> &amp; <span class="number">0xff</span></span><br><span class="line">    <span class="keyword">const</span> b = hexx &amp; <span class="number">0xff</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">`rgb(<span class="subst">$&#123;r&#125;</span>, <span class="subst">$&#123;g&#125;</span>, <span class="subst">$&#123;b&#125;</span>)`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * RGBé¢œè‰²è½¬16è¿›åˆ¶é¢œè‰²</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param  <span class="type">&#123;String&#125;</span> </span>rgb RGBè¿›åˆ¶é¢œè‰²å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;String&#125;</span>     </span>16è¿›åˆ¶é¢œè‰²å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">RGBToHex</span>(<span class="params">rgb</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> rgbArr = rgb.split(<span class="regexp">/[^\d]+/</span>)</span><br><span class="line">    <span class="keyword">const</span> color = rgbArr[<span class="number">1</span>] &lt;&lt; <span class="number">16</span> | rgbArr[<span class="number">2</span>] &lt;&lt; <span class="number">8</span> | rgbArr[<span class="number">3</span>]</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;#&#x27;</span>+ color.toString(<span class="number">16</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// -------------------------------------------------</span></span><br><span class="line">hexToRGB(<span class="string">&#x27;#ffffff&#x27;</span>)               <span class="comment">// &#x27;rgb(255,255,255)&#x27;</span></span><br><span class="line">RGBToHex(<span class="string">&#x27;rgb(255, 255, 255)&#x27;</span>)      <span class="comment">// &#x27;#ffffff&#x27;</span></span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-link-åˆ›å»ºé“¾æ¥"><a href="#ä½¿ç”¨-link-åˆ›å»ºé“¾æ¥" class="headerlink" title="ä½¿ç”¨ .link() åˆ›å»ºé“¾æ¥"></a>ä½¿ç”¨ <code>.link()</code> åˆ›å»ºé“¾æ¥</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// --- before ---</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="string">`&lt;a herf=&quot;www.google.com&quot;&gt;google&lt;/a&gt;`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸€ä¸ªé²œä¸ºäººçŸ¥çš„æ–¹æ³•ï¼Œå¯ä»¥å¿«é€Ÿåˆ›å»º a æ ‡ç­¾</span></span><br><span class="line"><span class="comment">// --- after ---</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="string">&#x27;google&#x27;</span>.link(<span class="string">&#x27;www.google.com&#x27;</span>);</span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨-Array-includes-æ¥å¤„ç†å¤šé‡æ¡ä»¶"><a href="#ä½¿ç”¨-Array-includes-æ¥å¤„ç†å¤šé‡æ¡ä»¶" class="headerlink" title="ä½¿ç”¨ Array.includes æ¥å¤„ç†å¤šé‡æ¡ä»¶"></a>ä½¿ç”¨ <code>Array.includes</code> æ¥å¤„ç†å¤šé‡æ¡ä»¶</h1><p>ä¸¾ä¸ªä¾‹å­:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¡ä»¶è¯­å¥</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">fruit</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (fruit === <span class="string">&#x27;apple&#x27;</span> || fruit === <span class="string">&#x27;strawberry&#x27;</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;red&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹ä¸€çœ‹ï¼Œè¿™ä¹ˆå†™ä¼¼ä¹æ²¡ä»€ä¹ˆå¤§é—®é¢˜ã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦åŒ¹é…æ›´å¤šçš„çº¢è‰²æ°´æœå‘¢ï¼Œæ¯”æ–¹è¯´ã€æ¨±æ¡ƒã€å’Œã€è”“è¶Šè“ã€ï¼Ÿæˆ‘ä»¬æ˜¯ä¸æ˜¯å¾—ç”¨æ›´å¤šçš„ || æ¥æ‰©å±•è¿™æ¡è¯­å¥ï¼Ÿ<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>Array.includes(Array.includes)</code> é‡å†™ä»¥ä¸Šæ¡ä»¶å¥ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">fruit</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æŠŠæ¡ä»¶æå–åˆ°æ•°ç»„ä¸­</span></span><br><span class="line">  <span class="keyword">const</span> redFruits = [<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;strawberry&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>, <span class="string">&#x27;cranberries&#x27;</span>]</span><br><span class="line">  <span class="keyword">if</span> (redFruits.includes(fruit)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æŠŠçº¢è‰²çš„æ°´æœï¼ˆæ¡ä»¶ï¼‰éƒ½æå–åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬çš„ä»£ç çœ‹èµ·æ¥æ›´åŠ æ•´æ´ã€‚</p><h1 id="å°‘å†™åµŒå¥—ï¼Œå°½æ—©è¿”å›"><a href="#å°‘å†™åµŒå¥—ï¼Œå°½æ—©è¿”å›" class="headerlink" title="å°‘å†™åµŒå¥—ï¼Œå°½æ—©è¿”å›"></a>å°‘å†™åµŒå¥—ï¼Œå°½æ—©è¿”å›</h1><p>è®©æˆ‘ä»¬ä¸ºä¹‹å‰çš„ä¾‹å­æ·»åŠ ä¸¤ä¸ªæ¡ä»¶: å¦‚æœæ²¡æœ‰æä¾›æ°´æœï¼ŒæŠ›å‡ºé”™è¯¯ã€‚å¦‚æœè¯¥æ°´æœçš„æ•°é‡å¤§äº 10ï¼Œå°†å…¶æ‰“å°å‡ºæ¥ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">fruit, quantity</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> redFruits = [<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;strawberry&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>, <span class="string">&#x27;cranberries&#x27;</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¡ä»¶ 1ï¼šfruit å¿…é¡»æœ‰å€¼</span></span><br><span class="line">  <span class="keyword">if</span> (fruit) &#123;</span><br><span class="line">    <span class="comment">// æ¡ä»¶ 2ï¼šå¿…é¡»ä¸ºçº¢è‰²</span></span><br><span class="line">    <span class="keyword">if</span> (redFruits.includes(fruit)) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;red&#x27;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ¡ä»¶ 3ï¼šå¿…é¡»æ˜¯å¤§é‡å­˜åœ¨</span></span><br><span class="line">      <span class="keyword">if</span> (quantity &gt; <span class="number">10</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;big quantity&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;No fruit!&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•ç»“æœ</span></span><br><span class="line">test(<span class="literal">null</span>); <span class="comment">// æŠ¥é”™ï¼šNo fruits</span></span><br><span class="line">test(<span class="string">&#x27;apple&#x27;</span>); <span class="comment">// æ‰“å°ï¼šred</span></span><br><span class="line">test(<span class="string">&#x27;apple&#x27;</span>, <span class="number">20</span>); <span class="comment">// æ‰“å°ï¼šredï¼Œbig quantity</span></span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬æ¥ä»”ç»†çœ‹çœ‹ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬æœ‰:</p><ul><li>1 ä¸ª if/else è¯­å¥æ¥ç­›é€‰æ— æ•ˆçš„æ¡ä»¶</li><li>3 å±‚ if è¯­å¥åµŒå¥—ï¼ˆæ¡ä»¶ 1ï¼Œ2 &amp; 3ï¼‰</li></ul><blockquote><p>å°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œæˆ‘éµå¾ªçš„ä¸€ä¸ªæ€»çš„è§„åˆ™æ˜¯å½“å‘ç°æ— æ•ˆæ¡ä»¶æ—¶å°½æ—©è¿”å›ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">fruit, quantity</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> redFruits = [<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;strawberry&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>, <span class="string">&#x27;cranberries&#x27;</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¡ä»¶ 1ï¼šå°½æ—©æŠ›å‡ºé”™è¯¯</span></span><br><span class="line">  <span class="keyword">if</span> (!fruit) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;No fruit!&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¡ä»¶2ï¼šå¿…é¡»ä¸ºçº¢è‰²</span></span><br><span class="line">  <span class="keyword">if</span> (redFruits.includes(fruit)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;red&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¡ä»¶ 3ï¼šå¿…é¡»æ˜¯å¤§é‡å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">if</span> (quantity &gt; <span class="number">10</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;big quantity&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æ­¤ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å°‘å†™äº†ä¸€å±‚åµŒå¥—ã€‚è¿™æ˜¯ç§å¾ˆå¥½çš„ä»£ç é£æ ¼ï¼Œå°¤å…¶æ˜¯åœ¨ if è¯­å¥å¾ˆé•¿çš„æ—¶å€™ï¼ˆè¯•æƒ³ä¸€ä¸‹ï¼Œä½ å¾—æ»šåŠ¨åˆ°åº•éƒ¨æ‰èƒ½çŸ¥é“é‚£å„¿è¿˜æœ‰ä¸ª else è¯­å¥ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹ä¸çˆ½ï¼‰ã€‚<br>å¦‚æœåè½¬ä¸€ä¸‹æ¡ä»¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è¿›ä¸€æ­¥åœ°å‡å°‘åµŒå¥—å±‚çº§ã€‚æ³¨æ„è§‚å¯Ÿä¸‹é¢çš„æ¡ä»¶ 2 è¯­å¥ï¼Œçœ‹çœ‹æ˜¯å¦‚ä½•åšåˆ°è¿™ç‚¹çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">fruit, quantity</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> redFruits = [<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;strawberry&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>, <span class="string">&#x27;cranberries&#x27;</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!fruit) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;No fruit!&#x27;</span>); <span class="comment">// æ¡ä»¶ 1ï¼šå°½æ—©æŠ›å‡ºé”™è¯¯</span></span><br><span class="line">  <span class="keyword">if</span> (!redFruits.includes(fruit)) <span class="keyword">return</span>; <span class="comment">// æ¡ä»¶ 2ï¼šå½“ fruit ä¸æ˜¯çº¢è‰²çš„æ—¶å€™ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;red&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¡ä»¶ 3ï¼šå¿…é¡»æ˜¯å¤§é‡å­˜åœ¨</span></span><br><span class="line">  <span class="keyword">if</span> (quantity &gt; <span class="number">10</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;big quantity&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡åè½¬æ¡ä»¶ 2 çš„æ¡ä»¶ï¼Œç°åœ¨æˆ‘ä»¬çš„ä»£ç å·²ç»æ²¡æœ‰åµŒå¥—äº†ã€‚å½“æˆ‘ä»¬ä»£ç çš„é€»è¾‘é“¾å¾ˆé•¿ï¼Œå¹¶ä¸”å¸Œæœ›å½“æŸä¸ªæ¡ä»¶ä¸æ»¡è¶³æ—¶ä¸å†æ‰§è¡Œä¹‹åæµç¨‹æ—¶ï¼Œè¿™ä¸ªæŠ€å·§ä¼šå¾ˆå¥½ç”¨ã€‚<br>ç„¶è€Œï¼Œå¹¶æ²¡æœ‰ä»»ä½•ç¡¬æ€§è§„åˆ™è¦æ±‚ä½ è¿™ä¹ˆåšã€‚è¿™å–å†³äºä½ è‡ªå·±ï¼Œå¯¹ä½ è€Œè¨€ï¼Œè¿™ä¸ªç‰ˆæœ¬çš„ä»£ç ï¼ˆæ²¡æœ‰åµŒå¥—ï¼‰æ˜¯å¦è¦æ¯”ä¹‹å‰é‚£ä¸ªç‰ˆæœ¬ï¼ˆæ¡ä»¶ 2 æœ‰åµŒå¥—ï¼‰çš„æ›´å¥½ã€å¯è¯»æ€§æ›´å¼ºï¼Ÿ<br>æ˜¯æˆ‘çš„è¯ï¼Œæˆ‘ä¼šé€‰æ‹©å‰ä¸€ä¸ªç‰ˆæœ¬ï¼ˆæ¡ä»¶ 2 æœ‰åµŒå¥—ï¼‰ã€‚åŸå› åœ¨äº:</p><ul><li>è¿™æ ·çš„ä»£ç æ¯”è¾ƒç®€çŸ­å’Œç›´ç™½ï¼Œä¸€ä¸ªåµŒå¥—çš„ if ä½¿å¾—ç»“æ„æ›´åŠ æ¸…æ™°ã€‚</li><li>æ¡ä»¶åè½¬ä¼šå¯¼è‡´æ›´å¤šçš„æ€è€ƒè¿‡ç¨‹ï¼ˆå¢åŠ è®¤çŸ¥è´Ÿæ‹…ï¼‰ã€‚</li></ul><p>å› æ­¤ï¼Œå§‹ç»ˆè¿½æ±‚æ›´å°‘çš„åµŒå¥—ï¼Œæ›´æ—©åœ°è¿”å›ï¼Œä½†æ˜¯ä¸è¦è¿‡åº¦ã€‚</p><h1 id="ä½¿ç”¨å‡½æ•°é»˜è®¤å‚æ•°å’Œè§£æ„"><a href="#ä½¿ç”¨å‡½æ•°é»˜è®¤å‚æ•°å’Œè§£æ„" class="headerlink" title="ä½¿ç”¨å‡½æ•°é»˜è®¤å‚æ•°å’Œè§£æ„"></a>ä½¿ç”¨å‡½æ•°é»˜è®¤å‚æ•°å’Œè§£æ„</h1><p>æˆ‘çŒœä½ ä¹Ÿè®¸å¾ˆç†Ÿæ‚‰ä»¥ä¸‹çš„ä»£ç ï¼Œåœ¨ JavaScript ä¸­æˆ‘ä»¬ç»å¸¸éœ€è¦æ£€æŸ¥ null / undefined å¹¶èµ‹äºˆé»˜è®¤å€¼:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">fruit, quantity</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!fruit) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">const</span> q = quantity || <span class="number">1</span>; <span class="comment">// å¦‚æœæ²¡æœ‰æä¾› quantityï¼Œé»˜è®¤ä¸º 1</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`We have <span class="subst">$&#123;q&#125;</span> <span class="subst">$&#123;fruit&#125;</span>!`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•ç»“æœ</span></span><br><span class="line">test(<span class="string">&#x27;banana&#x27;</span>); <span class="comment">// We have 1 banana!</span></span><br><span class="line">test(<span class="string">&#x27;apple&#x27;</span>, <span class="number">2</span>); <span class="comment">// We have 2 apple!</span></span><br></pre></td></tr></table></figure><p>äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‡½æ•°çš„é»˜è®¤å‚æ•°æ¥å»æ‰å˜é‡ qã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">fruit, quantity = <span class="number">1</span></span>) </span>&#123; <span class="comment">// å¦‚æœæ²¡æœ‰æä¾› quantityï¼Œé»˜è®¤ä¸º 1</span></span><br><span class="line">  <span class="keyword">if</span> (!fruit) <span class="keyword">return</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`We have <span class="subst">$&#123;quantity&#125;</span> <span class="subst">$&#123;fruit&#125;</span>!`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•ç»“æœ</span></span><br><span class="line">test(<span class="string">&#x27;banana&#x27;</span>); <span class="comment">// We have 1 banana!</span></span><br><span class="line">test(<span class="string">&#x27;apple&#x27;</span>, <span class="number">2</span>); <span class="comment">// We have 2 apple!</span></span><br></pre></td></tr></table></figure><p>æ˜¯ä¸æ˜¯æ›´åŠ ç®€å•ã€ç›´ç™½äº†ï¼Ÿè¯·æ³¨æ„ï¼Œæ‰€æœ‰çš„å‡½æ•°å‚æ•°éƒ½å¯ä»¥æœ‰å…¶é»˜è®¤å€¼ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥ä¸º fruit èµ‹äºˆä¸€ä¸ªé»˜è®¤å€¼ï¼šfunction test(fruit = â€˜unknownâ€™, quantity = 1)ã€‚<br>é‚£ä¹ˆå¦‚æœ fruit æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆObjectï¼‰å‘¢ï¼Ÿæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨é»˜è®¤å‚æ•°å—ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">fruit</span>) </span>&#123; </span><br><span class="line">  <span class="comment">// å¦‚æœæœ‰å€¼ï¼Œåˆ™æ‰“å°å‡ºæ¥</span></span><br><span class="line">  <span class="keyword">if</span> (fruit &amp;&amp; fruit.name)  &#123;</span><br><span class="line">    <span class="built_in">console</span>.log (fruit.name);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;unknown&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•ç»“æœ</span></span><br><span class="line">test(<span class="literal">undefined</span>); <span class="comment">// unknown</span></span><br><span class="line">test(&#123; &#125;); <span class="comment">// unknown</span></span><br><span class="line">test(&#123; <span class="attr">name</span>: <span class="string">&#x27;apple&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span> &#125;); <span class="comment">// apple</span></span><br></pre></td></tr></table></figure><p>è§‚å¯Ÿä¸Šé¢çš„ä¾‹å­ï¼Œå½“æ°´æœåç§°å±æ€§å­˜åœ¨æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›å°†å…¶æ‰“å°å‡ºæ¥ï¼Œå¦åˆ™æ‰“å°ã€unknownã€ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡é»˜è®¤å‚æ•°å’Œè§£æ„èµ‹å€¼çš„æ–¹æ³•æ¥é¿å…å†™å‡º fruit &amp;&amp; fruit.name è¿™ç§æ¡ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§£æ„ â€”â€” åªå¾—åˆ° name å±æ€§</span></span><br><span class="line"><span class="comment">// é»˜è®¤å‚æ•°ä¸ºç©ºå¯¹è±¡ &#123;&#125;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">&#123;name&#125; = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log (name || <span class="string">&#x27;unknown&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•ç»“æœ</span></span><br><span class="line">test(<span class="literal">undefined</span>); <span class="comment">// unknown</span></span><br><span class="line">test(&#123; &#125;); <span class="comment">// unknown</span></span><br><span class="line">test(&#123; <span class="attr">name</span>: <span class="string">&#x27;apple&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span> &#125;); <span class="comment">// apple</span></span><br></pre></td></tr></table></figure><p>æ—¢ç„¶æˆ‘ä»¬åªéœ€è¦ fruit çš„ name å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ {name} æ¥å°†å…¶è§£æ„å‡ºæ¥ï¼Œä¹‹åæˆ‘ä»¬å°±å¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨ name å˜é‡æ¥å–ä»£ fruit.nameã€‚<br>æˆ‘ä»¬è¿˜ä½¿ç”¨ {} ä½œä¸ºå…¶é»˜è®¤å€¼ã€‚å¦‚æœæˆ‘ä»¬ä¸è¿™ä¹ˆåšçš„è¯ï¼Œåœ¨æ‰§è¡Œ test(undefined) æ—¶ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ Cannot destructure property name of â€˜undefinedâ€™ or â€˜nullâ€™.ï¼Œå› ä¸º undefined ä¸Šå¹¶æ²¡æœ‰ name å±æ€§ã€‚ï¼ˆè¯‘è€…æ³¨ï¼šè¿™é‡Œä¸å¤ªå‡†ç¡®ï¼Œå…¶å®å› ä¸ºè§£æ„åªé€‚ç”¨äºå¯¹è±¡ï¼ˆObjectï¼‰ï¼Œè€Œä¸æ˜¯å› ä¸ºundefined ä¸Šå¹¶æ²¡æœ‰ name å±æ€§ï¼ˆç©ºå¯¹è±¡ä¸Šä¹Ÿæ²¡æœ‰ï¼‰ã€‚å‚è€ƒè§£æ„èµ‹å€¼ - MDNï¼‰<br>å¦‚æœä½ ä¸ä»‹æ„ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“çš„è¯ï¼Œæœ‰ä¸€äº›æ–¹æ³•å¯ä»¥å¸®åŠ©å‡å°‘ç©ºå€¼ï¼ˆnullï¼‰æ£€æŸ¥ï¼š</p><p>ä½¿ç”¨ Lodash get å‡½æ•°<br>ä½¿ç”¨ Facebook å¼€æºçš„ idx åº“ï¼ˆéœ€æ­é… Babeljsï¼‰</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªä½¿ç”¨ Lodash çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  ä½¿ç”¨ lodash åº“æä¾›çš„ _ æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">fruit</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(_.get(fruit, <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;unknown&#x27;</span>)); <span class="comment">// è·å–å±æ€§ name çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰ï¼Œè®¾ä¸ºé»˜è®¤å€¼ unknown</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•ç»“æœ</span></span><br><span class="line">test(<span class="literal">undefined</span>); <span class="comment">// unknown</span></span><br><span class="line">test(&#123; &#125;); <span class="comment">// unknown</span></span><br><span class="line">test(&#123; <span class="attr">name</span>: <span class="string">&#x27;apple&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span> &#125;); <span class="comment">// apple</span></span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥åœ¨è¿™é‡Œè¿è¡Œæ¼”ç¤ºä»£ç ã€‚å¦å¤–ï¼Œå¦‚æœä½ åçˆ±å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFPï¼‰ï¼Œä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨ Lodash fpâ€”â€”å‡½æ•°å¼ç‰ˆæœ¬çš„ Lodashï¼ˆæ–¹æ³•åå˜ä¸º get æˆ– getOrï¼‰ã€‚</p><h1 id="ç›¸è¾ƒäº-switchï¼ŒMap-Object-ä¹Ÿè®¸æ˜¯æ›´å¥½çš„é€‰æ‹©"><a href="#ç›¸è¾ƒäº-switchï¼ŒMap-Object-ä¹Ÿè®¸æ˜¯æ›´å¥½çš„é€‰æ‹©" class="headerlink" title="ç›¸è¾ƒäº switchï¼ŒMap / Object ä¹Ÿè®¸æ˜¯æ›´å¥½çš„é€‰æ‹©"></a>ç›¸è¾ƒäº <code>switch</code>ï¼Œ<code>Map / Object</code> ä¹Ÿè®¸æ˜¯æ›´å¥½çš„é€‰æ‹©</h1><p>è®©æˆ‘ä»¬çœ‹ä¸‹é¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬æƒ³è¦æ ¹æ®é¢œè‰²æ‰“å°å‡ºå„ç§æ°´æœ:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">color</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ switch case æ¥æ‰¾åˆ°å¯¹åº”é¢œè‰²çš„æ°´æœ</span></span><br><span class="line">  <span class="keyword">switch</span> (color) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;red&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> [<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;strawberry&#x27;</span>];</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;yellow&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> [<span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;pineapple&#x27;</span>];</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;purple&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> [<span class="string">&#x27;grape&#x27;</span>, <span class="string">&#x27;plum&#x27;</span>];</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> [];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•ç»“æœ</span></span><br><span class="line">test(<span class="literal">null</span>); <span class="comment">// []</span></span><br><span class="line">test(<span class="string">&#x27;yellow&#x27;</span>); <span class="comment">// [&#x27;banana&#x27;, &#x27;pineapple&#x27;]</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç çœ‹ä¸Šå»å¹¶æ²¡æœ‰é”™ï¼Œä½†æ˜¯å°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œå®ƒçœ‹ä¸Šå»å¾ˆå†—é•¿ã€‚åŒæ ·çš„ç»“æœå¯ä»¥é€šè¿‡å¯¹è±¡å­—é¢é‡æ¥å®ç°ï¼Œè¯­æ³•ä¹Ÿæ›´åŠ ç®€æ´:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨å¯¹è±¡å­—é¢é‡æ¥æ‰¾åˆ°å¯¹åº”é¢œè‰²çš„æ°´æœ</span></span><br><span class="line">  <span class="keyword">const</span> fruitColor = &#123;</span><br><span class="line">    red: [<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;strawberry&#x27;</span>],</span><br><span class="line">    yellow: [<span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;pineapple&#x27;</span>],</span><br><span class="line">    purple: [<span class="string">&#x27;grape&#x27;</span>, <span class="string">&#x27;plum&#x27;</span>]</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">color</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> fruitColor[color] || [];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Map æ¥å®ç°åŒæ ·çš„æ•ˆæœ:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ Map æ¥æ‰¾åˆ°å¯¹åº”é¢œè‰²çš„æ°´æœ</span></span><br><span class="line">  <span class="keyword">const</span> fruitColor = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">    .set(<span class="string">&#x27;red&#x27;</span>, [<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;strawberry&#x27;</span>])</span><br><span class="line">    .set(<span class="string">&#x27;yellow&#x27;</span>, [<span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;pineapple&#x27;</span>])</span><br><span class="line">    .set(<span class="string">&#x27;purple&#x27;</span>, [<span class="string">&#x27;grape&#x27;</span>, <span class="string">&#x27;plum&#x27;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">color</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> fruitColor.get(color) || [];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Map æ˜¯ ES2015 å¼•å…¥çš„æ–°çš„å¯¹è±¡ç±»å‹ï¼Œå…è®¸ä½ å­˜æ”¾é”®å€¼å¯¹ã€‚<br>é‚£æ˜¯ä¸æ˜¯è¯´æˆ‘ä»¬åº”è¯¥ç¦æ­¢ä½¿ç”¨ switch è¯­å¥ï¼Ÿ åˆ«æŠŠè‡ªå·±é™åˆ¶ä½ã€‚æˆ‘è‡ªå·±ä¼šåœ¨ä»»ä½•å¯èƒ½çš„æ—¶å€™ä½¿ç”¨å¯¹è±¡å­—é¢é‡ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯è¯´æˆ‘å°±ä¸ç”¨ switchï¼Œè¿™å¾—è§†åœºæ™¯è€Œå®šã€‚</p><blockquote><p>æ‡’äººç‰ˆï¼šé‡æ„è¯­æ³•</p></blockquote><p>å°±ä»¥ä¸Šçš„ä¾‹å­ï¼Œäº‹å®ä¸Šæˆ‘ä»¬å¯ä»¥é€šè¿‡é‡æ„æˆ‘ä»¬çš„ä»£ç ï¼Œä½¿ç”¨ Array.filter å®ç°åŒæ ·çš„æ•ˆæœã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fruits = [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;apple&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span> &#125;, </span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;strawberry&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span> &#125;, </span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;banana&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;yellow&#x27;</span> &#125;, </span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;pineapple&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;yellow&#x27;</span> &#125;, </span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;grape&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;purple&#x27;</span> &#125;, </span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;plum&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;purple&#x27;</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">color</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ Array filter æ¥æ‰¾åˆ°å¯¹åº”é¢œè‰²çš„æ°´æœ</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> fruits.filter(<span class="function"><span class="params">f</span> =&gt;</span> f.color == color);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£å†³é—®é¢˜çš„æ–¹æ³•æ°¸è¿œä¸åªä¸€ç§ã€‚å¯¹äºè¿™ä¸ªä¾‹å­æˆ‘ä»¬å±•ç¤ºäº†å››ç§å®ç°æ–¹æ³•ã€‚</p><h1 id="ä½¿ç”¨-Array-every-å’Œ-Array-some-æ¥å¤„ç†å…¨éƒ¨-éƒ¨åˆ†æ»¡è¶³æ¡ä»¶"><a href="#ä½¿ç”¨-Array-every-å’Œ-Array-some-æ¥å¤„ç†å…¨éƒ¨-éƒ¨åˆ†æ»¡è¶³æ¡ä»¶" class="headerlink" title="ä½¿ç”¨ Array.every å’Œ Array.some æ¥å¤„ç†å…¨éƒ¨/éƒ¨åˆ†æ»¡è¶³æ¡ä»¶"></a>ä½¿ç”¨ <code>Array.every</code> å’Œ <code>Array.some</code> æ¥å¤„ç†å…¨éƒ¨/éƒ¨åˆ†æ»¡è¶³æ¡ä»¶</h1><p>è§‚å¯Ÿä»¥ä¸‹çš„ä»£ç ï¼Œæˆ‘ä»¬æƒ³è¦æ£€æŸ¥æ˜¯å¦æ‰€æœ‰çš„æ°´æœéƒ½æ˜¯çº¢è‰²çš„:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fruits = [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;apple&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;banana&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;yellow&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;grape&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;purple&#x27;</span> &#125;</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> isAllRed = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¡ä»¶ï¼šæ‰€æœ‰çš„æ°´æœéƒ½å¿…é¡»æ˜¯çº¢è‰²</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> f <span class="keyword">of</span> fruits) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!isAllRed) <span class="keyword">break</span>;</span><br><span class="line">    isAllRed = (f.color == <span class="string">&#x27;red&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(isAllRed); <span class="comment">// false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç ä¹Ÿå¤ªé•¿äº†ï¼æˆ‘ä»¬å¯ä»¥é€šè¿‡ Array.every æ¥ç¼©å‡ä»£ç :</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fruits = [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;apple&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;banana&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;yellow&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;grape&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;purple&#x27;</span> &#125;</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ¡ä»¶ï¼šï¼ˆç®€çŸ­å½¢å¼ï¼‰æ‰€æœ‰çš„æ°´æœéƒ½å¿…é¡»æ˜¯çº¢è‰²</span></span><br><span class="line">  <span class="keyword">const</span> isAllRed = fruits.every(<span class="function"><span class="params">f</span> =&gt;</span> f.color == <span class="string">&#x27;red&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(isAllRed); <span class="comment">// false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¸…æ™°å¤šäº†å¯¹å§ï¼Ÿç±»ä¼¼çš„ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æ£€æŸ¥æ˜¯å¦æœ‰è‡³å°‘ä¸€ä¸ªæ°´æœæ˜¯çº¢è‰²çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Array.some ä»…ç”¨ä¸€è¡Œä»£ç å°±å®ç°å‡ºæ¥ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fruits = [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;apple&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;banana&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;yellow&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;grape&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;purple&#x27;</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ¡ä»¶ï¼šè‡³å°‘ä¸€ä¸ªæ°´æœæ˜¯çº¢è‰²çš„</span></span><br><span class="line">  <span class="keyword">const</span> isAnyRed = fruits.some(<span class="function"><span class="params">f</span> =&gt;</span> f.color == <span class="string">&#x27;red&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(isAnyRed); <span class="comment">// true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gyp ERR! stack Error: EACCES: permission denied, mkdir é—®é¢˜è§£å†³æ–¹æ¡ˆ</title>
      <link href="2020/11/26/permission/"/>
      <url>2020/11/26/permission/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› :"></a>åŸå› :</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;<strong>æƒé™é—®é¢˜</strong></p><ul><li>npm å‡ºäºå®‰å…¨è€ƒè™‘ä¸æ”¯æŒä»¥ root ç”¨æˆ·è¿è¡Œï¼Œå³ä½¿ä½ ç”¨ root ç”¨æˆ·èº«ä»½è¿è¡Œäº†ï¼Œnpm ä¼šè‡ªåŠ¨è½¬æˆä¸€ä¸ªå« nobody çš„ç”¨æˆ·æ¥è¿è¡Œï¼Œè€Œè¿™ä¸ªç”¨æˆ·å‡ ä¹æ²¡æœ‰ä»»ä½•æƒé™ã€‚è¿™æ ·çš„è¯å¦‚æœä½ è„šæœ¬é‡Œæœ‰ä¸€äº›éœ€è¦æƒé™çš„æ“ä½œï¼Œæ¯”å¦‚å†™æ–‡ä»¶ï¼ˆå°¤å…¶æ˜¯å†™ /root/.node-gypï¼‰ï¼Œå°±ä¼šå´©æ‰äº†ã€‚</li><li>ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼ŒåŠ  â€“unsafe-perm å‚æ•°ï¼Œè¿™æ ·å°±ä¸ä¼šåˆ‡æ¢åˆ° nobody ä¸Šï¼Œè¿è¡Œæ—¶æ˜¯å“ªä¸ªç”¨æˆ·å°±æ˜¯å“ªä¸ªç”¨æˆ·ï¼Œå³æ˜¯ rootã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install --unsafe-perm</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ’é”™ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘½ä»¤è¡Œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac ä½¿ç”¨æŠ€å·§ä¹‹è‡ªå®šä¹‰å¿«æ·é”®å”¤èµ· APP</title>
      <link href="2020/11/26/Automator/"/>
      <url>2020/11/26/Automator/</url>
      
        <content type="html"><![CDATA[<h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><p>é€šè¿‡è‡ªå®šä¹‰çš„å¿«æ·é”®ï¼Œå¿«é€Ÿæ‰“å¼€ MAC ä¸Šå·²ç»å®‰è£…çš„åº”ç”¨</p><h2 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h2><p>é€šè¿‡ MAC è‡ªå¸¦è½¯ä»¶ Automator.appï¼ˆè‡ªåŠ¨æ“ä½œï¼‰ï¼Œè¿è¡Œ AppleScript å®ç°æ‰“å¼€åº”ç”¨</p><h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><ol><li><p>å¿«æ·é”® Cmd + ç©ºæ ¼ æ‰“å¼€ Automator.appã€‚æœç´¢æ¡†é”®å…¥ Automatorï¼Œæ‰“å¼€è‡ªåŠ¨æ“ä½œã€‚ï¼ˆæˆ–æ˜¯ï¼šæ‰“å¼€å¯åŠ¨å° -&gt; å…¶ä»– -&gt; è‡ªåŠ¨æ“ä½œï¼‰<br><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228152837.png"></p></li><li><p>æ–°å»ºé¡¹ç›®ï¼Œç±»å‹é€‰æ‹©å¿«é€Ÿæ“ä½œ<br><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228152839.png"></p></li><li><p>å·¦ä¾§æ åŒå‡»è¿è¡Œ AppleScriptï¼Œå³ä¸Šå·¥ä½œæµç¨‹é€‰æ‹©æ²¡æœ‰è¾“å…¥ã€‚<br><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228152841.png"></p></li><li><p>å³ä¸­æ–‡æœ¬æ¡†é”®å…¥ä»¥ä¸‹å†…å®¹ï¼Œè¿™é‡Œä»¥å”¤èµ·MACè‡ªå¸¦ç»ˆç«¯ Terminal ä¸ºä¾‹ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">on</span> <span class="built_in">run</span> &#123;input, parameters&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">(* Your script goes here *)</span></span><br><span class="line"><span class="keyword">tell</span> <span class="built_in">application</span> <span class="string">&quot;Terminal&quot;</span></span><br><span class="line">reopen</span><br><span class="line"><span class="built_in">activate</span></span><br><span class="line"><span class="keyword">end</span> <span class="keyword">tell</span></span><br><span class="line"><span class="keyword">end</span> <span class="built_in">run</span></span><br></pre></td></tr></table></figure></li><li><p>ç‚¹å‡»è¿è¡Œï¼Œçœ‹åº”ç”¨ï¼ˆ ç»ˆç«¯ ï¼‰æ˜¯å¦å¯ä»¥æ­£å¸¸æ‰“å¼€<br><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228152838.png"></p></li><li><p>command + s ä¿å­˜è„šæœ¬ã€‚ä¸ºå…¶å‘½åOpenTerminal ã€‚<br><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228152840.png"></p></li><li><p>æ‰“å¼€ç³»ç»Ÿåå¥½è®¾ç½® -&gt; é”®ç›˜ -&gt; å¿«æ·é”® -&gt; å·¦ä¾§æ ç‚¹å¼€æœåŠ¡ -&gt; å³ä¾§æ æ‰¾åˆ° OpenTerminalã€‚â€¨<br><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228152842.png"></p></li><li><p>åŒå‡» OpenTerminalï¼Œå³ä¾§æ˜¾ç¤ºæ·»åŠ å¿«æ·é”®ï¼Œç‚¹å‡»å®ƒè¿›å…¥è¾“å…¥æ¡†æŒ‰ä¸‹ä¸€ä¸ªè‡ªå®šä¹‰å¿«æ·é”®â€¨<br><img src="https://cdn.jsdelivr.net/gh/og-liu/image-host/20201228152843.png"></p></li><li><p>è‡³æ­¤å·²å®Œæˆï¼ŒæŒ‰ä¸‹å¿«æ·é”®è¯•è¯•å§</p></li><li><p>ä¸Šè¿°æ˜¯ä»¥MACè‡ªå¸¦ç»ˆç«¯ Terminal ä¸ºä¾‹ï¼Œå…¶ä»–åº”ç”¨æ­¥éª¤ä¸€æ ·ï¼Œéœ€è¦å…ˆç¡®è®¤æ˜¯å¦å·²ç»å®‰è£…äº†åº”ç”¨åŠåº”ç”¨åç§°ï¼Œç„¶ååœ¨ <code>æ­¥éª¤4</code> å¤„ï¼Œä¿®æ”¹ä»£ç ä¸­çš„åº”ç”¨åç§°â€¨</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">on</span> <span class="built_in">run</span> &#123;input, parameters&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">(* Your script goes here *)</span></span><br><span class="line"><span class="keyword">tell</span> <span class="built_in">application</span> <span class="string">&quot;Webstorm&quot;</span><span class="comment">(* æ­¤å¤„Webstorm å³ä¸ºéœ€è¦å”¤é†’çš„åº”ç”¨ *)</span></span><br><span class="line">reopen</span><br><span class="line"><span class="built_in">activate</span></span><br><span class="line"><span class="keyword">end</span> <span class="keyword">tell</span></span><br><span class="line"><span class="keyword">end</span> <span class="built_in">run</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> macOS </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
